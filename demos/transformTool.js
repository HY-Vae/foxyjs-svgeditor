/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./examples/transformTool.js":
/*!***********************************!*\
  !*** ./examples/transformTool.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var foxyjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! foxyjs */ \"./node_modules/foxyjs/index.js\");\n/* harmony import */ var foxyjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(foxyjs__WEBPACK_IMPORTED_MODULE_0__);\n\r\nconst container = document.querySelector(\"#container\");\r\nconst stage = new foxyjs__WEBPACK_IMPORTED_MODULE_0__.Stage(container);\r\n\r\nconst rect = new foxyjs__WEBPACK_IMPORTED_MODULE_0__.SVGRect({\r\n    x: 90,\r\n    y: 90,\r\n    width: 100,\r\n    height: 100,\r\n    fill: \"red\",\r\n    stroke: \"#000000\",\r\n    strokeWidth: 2,\r\n});\r\n\r\nconst circle = new foxyjs__WEBPACK_IMPORTED_MODULE_0__.SVGCircle({\r\n    cx: 180,\r\n    cy: 180,\r\n    r: 50,\r\n    fill: \"purple\",\r\n    stroke: \"#000000\",\r\n    strokeWidth: 2,\r\n});\r\n\r\nconst ellipse = new foxyjs__WEBPACK_IMPORTED_MODULE_0__.SVGEllipse({\r\n    cx: 100,\r\n    cy: 370,\r\n    rx: 100,\r\n    ry: 50,\r\n    fill: \"pink\",\r\n    stroke: \"#000000\",\r\n    strokeWidth: 2,\r\n});\r\n\r\nconst ring = new foxyjs__WEBPACK_IMPORTED_MODULE_0__.SVGRing({\r\n    x: 339,\r\n    y: 99,\r\n    outerRx: 70,\r\n    outerRy: 70,\r\n    innerRx: 30,\r\n    innerRy: 30,\r\n    fill: \"blue\",\r\n    stroke: \"#000000\",\r\n    strokeWidth: 2,\r\n});\r\n\r\nconst star = new foxyjs__WEBPACK_IMPORTED_MODULE_0__.SVGStar({\r\n    x: 250,\r\n    y: 250,\r\n    rx: 50,\r\n    ry: 50,\r\n    fill: \"yellow\",\r\n    stroke: \"#000000\",\r\n    strokeWidth: 2,\r\n});\r\n\r\nconst star2 = new foxyjs__WEBPACK_IMPORTED_MODULE_0__.SVGStar({\r\n    x: 260,\r\n    y: 350,\r\n    rx: 50,\r\n    ry: 50,\r\n    arms: 12,\r\n    depth: 0.8,\r\n    fill: \"yellow\",\r\n    stroke: \"#000000\",\r\n    strokeWidth: 2,\r\n});\r\n\r\nconst text = new foxyjs__WEBPACK_IMPORTED_MODULE_0__.SVGText({\r\n    x: 300,\r\n    y: 250,\r\n    fontSize: \"28px\",\r\n    fontFamily: \"Arial\",\r\n    textContent: \"hello foxyjs\",\r\n    fill: \"#000000\",\r\n});\r\n\r\nstage.addGraph(rect);\r\nstage.addGraph(circle);\r\nstage.addGraph(ellipse);\r\nstage.addGraph(ring);\r\nstage.addGraph(star);\r\nstage.addGraph(star2);\r\nstage.addGraph(text);\r\nstage.toggleTool('transform-tool');\r\n\n\n//# sourceURL=webpack:///./examples/transformTool.js?");

/***/ }),

/***/ "./node_modules/foxyjs/dependencies/node-extensions.js":
/*!*************************************************************!*\
  !*** ./node_modules/foxyjs/dependencies/node-extensions.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("Object.defineProperty(exports, \"__esModule\", ({value:true}));if(!Element.prototype.getMatrix){Element.prototype.getMatrix=function(){const t=getComputedStyle(this).transform;const e=DOMMatrix||WebKitCSSMatrix;return new e(t)}}\n\n//# sourceURL=webpack:///./node_modules/foxyjs/dependencies/node-extensions.js?");

/***/ }),

/***/ "./node_modules/foxyjs/dependencies/path-data.js":
/*!*******************************************************!*\
  !*** ./node_modules/foxyjs/dependencies/path-data.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("Object.defineProperty(exports, \"__esModule\", ({value:true}));const d_Type={Z:\"Z\",M:\"M\",L:\"L\",C:\"C\",Q:\"Q\",A:\"A\",H:\"H\",V:\"V\",S:\"S\",T:\"T\",z:\"Z\",m:\"m\",l:\"l\",c:\"c\",q:\"q\",a:\"a\",h:\"h\",v:\"v\",s:\"s\",t:\"t\"};const s=-1!==window.navigator.userAgent.indexOf(\"MSIE \");const pathArrConvert=e=>{const t=[];let a=0;while(a<=e.length){const s=e[a];if(d_Type.hasOwnProperty(s)){if(s.toLowerCase()===\"v\"||s.toLowerCase()===\"h\"){t.push({type:s,values:[Number(e[a+1])]})}if(s.toLowerCase()===\"m\"||s.toLowerCase()===\"l\"||s.toLowerCase()===\"t\"){t.push({type:s,values:[Number(e[a+1]),Number(e[a+2])]})}if(s.toLowerCase()===\"q\"||s.toLowerCase()===\"s\"){t.push({type:s,values:[Number(e[a+1]),Number(e[a+2]),Number(e[a+3]),Number(e[a+4])]})}if(s.toLowerCase()===\"c\"){t.push({type:s,values:[Number(e[a+1]),Number(e[a+2]),Number(e[a+3]),Number(e[a+4]),Number(e[a+5]),Number(e[a+6])]})}if(s.toLowerCase()===\"a\"){t.push({type:s,values:[Number(e[a+1]),Number(e[a+2]),Number(e[a+3]),Number(e[a+4]),Number(e[a+5]),Number(e[a+6]),Number(e[a+7])]})}if(s.toLowerCase()===\"z\"){t.push({type:s,values:[]})}}a++}return t};if(!SVGPathElement.prototype.setPathData){SVGPathElement.prototype.setPathData=function(e){if(0===e.length)s?this.setAttribute(\"d\",\"\"):this.removeAttribute(\"d\");else{for(var t=\"\",a=0,l=e.length;a<l;a+=1){var u=e[a];a>0&&(t+=\" \");t+=u.type;u.values&&u.values.length>0&&(t+=\" \"+u.values.join(\" \"))}this.setAttribute(\"d\",t)}}}if(!SVGPathElement.prototype.getPathData){SVGPathElement.prototype.getPathData=function(){const e=this.getAttribute(\"d\");const t=e.replace(/[\\n\\r]/g,\"\").replace(/-/g,\" -\").replace(/(\\d*\\.)(\\d+)(?=\\.)/g,\"$1$2 \").replace(/([A-Za-z])(\\d+\\.\\d+ || \\d+)/g,\"$1 $2 \").replace(/(\\d+\\.\\d+ || \\d+)([A-Za-z])/g,\"$1 $2 \").trim().split(/\\s*,|\\s+/);const a=pathArrConvert(t);return a}}if(!SVGRectElement.prototype.getPathData){SVGRectElement.prototype.getPathData=function(){const e=this.x.baseVal.value;const t=this.y.baseVal.value;const a=this.width.baseVal.value;const s=this.height.baseVal.value;let l=this.hasAttribute(\"rx\")?this.rx.baseVal.value:this.ry.baseVal.value;let u=this.hasAttribute(\"ry\")?this.ry.baseVal.value:this.rx.baseVal.value;l>a/2&&(l=a/2);u>s/2&&(u=s/2);const v=[{type:\"M\",values:[e+l,t]},{type:\"H\",values:[e+a-l]},{type:\"A\",values:[l,u,0,0,1,e+a,t+u]},{type:\"V\",values:[t+s-u]},{type:\"A\",values:[l,u,0,0,1,e+a-l,t+s]},{type:\"H\",values:[e+l]},{type:\"A\",values:[l,u,0,0,1,e,t+s-u]},{type:\"V\",values:[t+u]},{type:\"A\",values:[l,u,0,0,1,e+l,t]},{type:\"Z\",values:[]}];return v}}if(!SVGCircleElement.prototype.getPathData){SVGCircleElement.prototype.getPathData=function(){const e=this.cx.baseVal.value,t=this.cy.baseVal.value,a=this.r.baseVal.value,s=[{type:\"M\",values:[e+a,t]},{type:\"A\",values:[a,a,0,0,1,e,t+a]},{type:\"A\",values:[a,a,0,0,1,e-a,t]},{type:\"A\",values:[a,a,0,0,1,e,t-a]},{type:\"A\",values:[a,a,0,0,1,e+a,t]},{type:\"Z\",values:[]}];return s}}if(!SVGEllipseElement.prototype.getPathData){SVGEllipseElement.prototype.getPathData=function(){const e=this.cx.baseVal.value,t=this.cy.baseVal.value,a=this.rx.baseVal.value,s=this.ry.baseVal.value,l=[{type:\"M\",values:[e+a,t]},{type:\"A\",values:[a,s,0,0,1,e,t+s]},{type:\"A\",values:[a,s,0,0,1,e-a,t]},{type:\"A\",values:[a,s,0,0,1,e,t-s]},{type:\"A\",values:[a,s,0,0,1,e+a,t]},{type:\"Z\",values:[]}];return l}}if(!SVGLineElement.prototype.getPathData){SVGLineElement.prototype.getPathData=function(){return[{type:\"M\",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:\"L\",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]}}if(!SVGPolylineElement.prototype.getPathData){SVGPolylineElement.prototype.getPathData=function(){const a=[];for(let t=0;t<this.points.numberOfItems;t+=1){const e=this.points.getItem(t);a.push({type:0===t?\"M\":\"L\",values:[e.x,e.y]})}return a}}if(!SVGPolygonElement.prototype.getPathData){SVGPolygonElement.prototype.getPathData=function(){const a=[];for(let t=0;t<this.points.numberOfItems;t+=1){const e=this.points.getItem(t);a.push({type:0===t?\"M\":\"L\",values:[e.x,e.y]})}return a.push({type:\"Z\",values:[]}),a}}if(!SVGPathElement.prototype.toUpperCase){SVGPathElement.prototype.toUpperCase=function(){const e=this.getAttribute(\"d\");if(!(e===null||e===void 0?void 0:e.includes(d_Type.A))&&!(e===null||e===void 0?void 0:e.includes(d_Type.a))&&!(e===null||e===void 0?void 0:e.includes(d_Type.t))&&!(e===null||e===void 0?void 0:e.includes(d_Type.T))&&!(e===null||e===void 0?void 0:e.includes(d_Type.q))&&!(e===null||e===void 0?void 0:e.includes(d_Type.Q))&&!(e===null||e===void 0?void 0:e.includes(d_Type.h))&&!(e===null||e===void 0?void 0:e.includes(d_Type.H))&&!(e===null||e===void 0?void 0:e.includes(d_Type.v))&&!(e===null||e===void 0?void 0:e.includes(d_Type.V))&&!(e===null||e===void 0?void 0:e.includes(d_Type.s))&&!(e===null||e===void 0?void 0:e.includes(d_Type.S))&&!(e===null||e===void 0?void 0:e.includes(d_Type.m))&&!(e===null||e===void 0?void 0:e.includes(d_Type.l))&&!(e===null||e===void 0?void 0:e.includes(d_Type.c)))return;let v=\"\";let o=0;let i=0;const t=this.getPathData();t.forEach(e=>{const t=e.type.toUpperCase();switch(e.type){case\"m\":v+=`${t} ${o+e.values[0]} ${i+e.values[1]} `;o+=e.values[0];i+=e.values[1];break;case\"M\":case\"L\":case\"T\":v+=`${t===\"T\"?\"L\":t} ${e.values[0]} ${e.values[1]} `;o=e.values[0];i=e.values[1];break;case\"h\":v+=`L ${o+e.values[0]} ${i} `;o+=e.values[0];break;case\"H\":v+=`L ${e.values[0]} ${i} `;o=e.values[0];break;case\"v\":v+=`L ${o} ${i+e.values[0]} `;i+=e.values[0];break;case\"V\":v+=`L ${o} ${e.values[0]} `;i=e.values[0];break;case\"l\":case\"t\":v+=`L ${o+e.values[0]} ${i+e.values[1]} `;o+=e.values[0];i+=e.values[1];break;case\"q\":{const a=(o+e.values[0]-o)*(2/3)+o;const s=(i+e.values[1]-i)*(2/3)+i;const l=(o+e.values[2]-o)*(1/3)+a;const u=(i+e.values[3]-i)*(1/3)+s;v+=`C ${a} ${s} ${l} ${u} ${o+e.values[2]} ${i+e.values[3]} `;o+=e.values[2];i+=e.values[3]}break;case\"Q\":{const a=(e.values[0]-o)*(2/3)+o;const s=(e.values[1]-i)*(2/3)+i;const l=(e.values[2]-o)*(1/3)+a;const u=(e.values[3]-i)*(1/3)+s;v+=`C ${a} ${s} ${l} ${u} ${e.values[2]} ${e.values[3]} `;o=e.values[2];i=e.values[3]}break;case\"s\":v+=`C ${o} ${i} ${o+e.values[0]} ${i+e.values[1]} ${o+e.values[2]} ${i+e.values[3]}`;o+=e.values[2];i+=e.values[3];break;case\"S\":v+=`C ${o} ${i} ${e.values[0]} ${e.values[1]} ${e.values[2]} ${e.values[3]} `;o=e.values[2];i=e.values[3];break;case\"c\":v+=`${t} ${o+e.values[0]} ${i+e.values[1]} ${o+e.values[2]} ${i+e.values[3]} ${o+e.values[4]} ${i+e.values[5]} `;o+=e.values[4];i+=e.values[5];break;case\"C\":v+=`${t} ${e.values[0]} ${e.values[1]} ${e.values[2]} ${e.values[3]} ${e.values[4]} ${e.values[5]} `;o=e.values[4];i=e.values[5];break;case\"a\":v+=`${t} ${e.values[0]} ${e.values[1]} ${e.values[2]} ${e.values[3]} ${e.values[4]} ${o+e.values[5]} ${i+e.values[6]}`;o+=e.values[5];i+=e.values[6];break;case\"A\":v+=`${t} ${e.values[0]} ${e.values[1]} ${e.values[2]} ${e.values[3]} ${e.values[4]} ${e.values[5]} ${e.values[6]} `;o=e.values[5];i=e.values[6];break;case\"z\":case\"Z\":v+=t;break}});this.setAttribute(\"d\",v)}}\n\n//# sourceURL=webpack:///./node_modules/foxyjs/dependencies/path-data.js?");

/***/ }),

/***/ "./node_modules/foxyjs/index.js":
/*!**************************************!*\
  !*** ./node_modules/foxyjs/index.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __awaiter=this&&this.__awaiter||function(e,l,a,_){function o(t){return t instanceof a?t:new a(function(e){e(t)})}return new(a||(a=Promise))(function(t,a){function r(e){try{i(_.next(e))}catch(e){a(e)}}function s(e){try{i(_[\"throw\"](e))}catch(e){a(e)}}function i(e){e.done?t(e.value):o(e.value).then(r,s)}i((_=_.apply(e,l||[])).next())})};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,a,r){if(a===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return a===\"m\"?r:a===\"a\"?r.call(e):r?r.value:t.get(e)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,a,r,s){if(r===\"m\")throw new TypeError(\"Private method is not writable\");if(r===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return r===\"a\"?s.call(e,a):s?s.value=a:t.set(e,a),a};var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var _Stage_instances,_Stage_scale,_Stage_board,_Stage_workspaces,_Stage_currentContainer,_Stage_currentTool,_Stage_selectedObjectElements,_Stage_selectedElements,_Stage_selectedTextRange,_Stage_config,_Stage_svg,_Stage_canvas,_Stage_currentWorkspace,_Stage_transformTool,_Stage_transformSelect,_Stage_rubberBand,_Stage_hoverManager,_Stage_zoomManager,_Stage_panTool,_Stage_rectTool,_Stage_ellipseTool,_Stage_otherShapeTool,_Stage_undoManager,_Stage_viewTool,_Stage_freehandHud,_Stage_freehandTool,_Stage_splineTool,_Stage_cubicBezierSegHud,_Stage_penTool,_Stage_textHud,_Stage_textTool,_Stage_clipboardManager,_Stage_manualManager,_Stage_smartManager,_Stage_gridManager,_Stage_rulerManager,_Stage_snapManager,_Stage_arrangementManager,_Stage_groupManager,_Stage_transformManager,_Stage_orderManager,_Stage_commands,_Stage_pointerClickCount,_Stage_pointerClientPoint,_Stage_textInputMode,_Stage_PM,_Stage_Ra,_Stage_createdObserver,_Stage_workspacemutation,_Stage_textInputModeChange,_Stage_zoomChange,_Stage_setSelectedTextRange,_Stage_pointerdown,_Stage_pointermove,_Stage_pointerup,_Stage_qi,_Stage_Xi;Object.defineProperty(exports, \"__esModule\", ({value:true}));exports.SVGPolygon=exports.SVGPolyline=exports.SVGLine=exports.SVGSpiral=exports.SVGCross=exports.SVGCog=exports.SVGStar=exports.SVGNGon=exports.SVGTriangle=exports.SVGCrescent=exports.SVGPie=exports.SVGRing=exports.SVGEllipse=exports.SVGCircle=exports.SVGRect=exports.SVGText=exports.SVGPath=exports.SVGImage=exports.Stage=void 0;const graphManager_1=__webpack_require__(/*! ./support/graphManager */ \"./node_modules/foxyjs/support/graphManager.js\");Object.defineProperty(exports, \"SVGImage\", ({enumerable:true,get:function(){return graphManager_1.SVGImage}}));Object.defineProperty(exports, \"SVGPath\", ({enumerable:true,get:function(){return graphManager_1.SVGPath}}));Object.defineProperty(exports, \"SVGText\", ({enumerable:true,get:function(){return graphManager_1.SVGText}}));Object.defineProperty(exports, \"SVGRect\", ({enumerable:true,get:function(){return graphManager_1.SVGRect}}));Object.defineProperty(exports, \"SVGCircle\", ({enumerable:true,get:function(){return graphManager_1.SVGCircle}}));Object.defineProperty(exports, \"SVGEllipse\", ({enumerable:true,get:function(){return graphManager_1.SVGEllipse}}));Object.defineProperty(exports, \"SVGRing\", ({enumerable:true,get:function(){return graphManager_1.SVGRing}}));Object.defineProperty(exports, \"SVGPie\", ({enumerable:true,get:function(){return graphManager_1.SVGPie}}));Object.defineProperty(exports, \"SVGCrescent\", ({enumerable:true,get:function(){return graphManager_1.SVGCrescent}}));Object.defineProperty(exports, \"SVGTriangle\", ({enumerable:true,get:function(){return graphManager_1.SVGTriangle}}));Object.defineProperty(exports, \"SVGNGon\", ({enumerable:true,get:function(){return graphManager_1.SVGNGon}}));Object.defineProperty(exports, \"SVGStar\", ({enumerable:true,get:function(){return graphManager_1.SVGStar}}));Object.defineProperty(exports, \"SVGCog\", ({enumerable:true,get:function(){return graphManager_1.SVGCog}}));Object.defineProperty(exports, \"SVGCross\", ({enumerable:true,get:function(){return graphManager_1.SVGCross}}));Object.defineProperty(exports, \"SVGSpiral\", ({enumerable:true,get:function(){return graphManager_1.SVGSpiral}}));Object.defineProperty(exports, \"SVGLine\", ({enumerable:true,get:function(){return graphManager_1.SVGLine}}));Object.defineProperty(exports, \"SVGPolyline\", ({enumerable:true,get:function(){return graphManager_1.SVGPolyline}}));Object.defineProperty(exports, \"SVGPolygon\", ({enumerable:true,get:function(){return graphManager_1.SVGPolygon}}));const common_1=__webpack_require__(/*! ./utils/common */ \"./node_modules/foxyjs/utils/common.js\");__webpack_require__(/*! ./dependencies/node-extensions */ \"./node_modules/foxyjs/dependencies/node-extensions.js\");__webpack_require__(/*! ./dependencies/path-data */ \"./node_modules/foxyjs/dependencies/path-data.js\");const rubberBand_1=__importDefault(__webpack_require__(/*! ./tools/rubberBand */ \"./node_modules/foxyjs/tools/rubberBand.js\"));const transformTool_1=__importDefault(__webpack_require__(/*! ./tools/transformTool */ \"./node_modules/foxyjs/tools/transformTool.js\"));const transformSelect_1=__importDefault(__webpack_require__(/*! ./tools/transformSelect */ \"./node_modules/foxyjs/tools/transformSelect.js\"));const layout_1=__importDefault(__webpack_require__(/*! ./support/layout */ \"./node_modules/foxyjs/support/layout.js\"));const textTool_1=__importDefault(__webpack_require__(/*! ./tools/textTool */ \"./node_modules/foxyjs/tools/textTool.js\"));const textHud_1=__importDefault(__webpack_require__(/*! ./tools/textHud */ \"./node_modules/foxyjs/tools/textHud.js\"));const panTool_1=__importDefault(__webpack_require__(/*! ./tools/panTool */ \"./node_modules/foxyjs/tools/panTool.js\"));const freehandHud_1=__importDefault(__webpack_require__(/*! ./tools/freehandHud */ \"./node_modules/foxyjs/tools/freehandHud.js\"));const freehandTool_1=__importDefault(__webpack_require__(/*! ./tools/freehandTool */ \"./node_modules/foxyjs/tools/freehandTool.js\"));const splineTool_1=__importDefault(__webpack_require__(/*! ./tools/splineTool */ \"./node_modules/foxyjs/tools/splineTool.js\"));const cubicBezierSegHud_1=__importDefault(__webpack_require__(/*! ./tools/cubicBezierSegHud */ \"./node_modules/foxyjs/tools/cubicBezierSegHud.js\"));const penTool_1=__importDefault(__webpack_require__(/*! ./tools/penTool */ \"./node_modules/foxyjs/tools/penTool.js\"));const viewTool_1=__importDefault(__webpack_require__(/*! ./tools/viewTool */ \"./node_modules/foxyjs/tools/viewTool.js\"));const hoverManager_1=__importDefault(__webpack_require__(/*! ./support/hoverManager */ \"./node_modules/foxyjs/support/hoverManager.js\"));const clipboardManager_1=__importDefault(__webpack_require__(/*! ./support/clipboardManager */ \"./node_modules/foxyjs/support/clipboardManager.js\"));const rulerManager_1=__importDefault(__webpack_require__(/*! ./support/rulerManager */ \"./node_modules/foxyjs/support/rulerManager.js\"));const snapManager_1=__importDefault(__webpack_require__(/*! ./support/snapManager */ \"./node_modules/foxyjs/support/snapManager.js\"));const smartManager_1=__importDefault(__webpack_require__(/*! ./support/smartManager */ \"./node_modules/foxyjs/support/smartManager.js\"));const gridManager_1=__importDefault(__webpack_require__(/*! ./support/gridManager */ \"./node_modules/foxyjs/support/gridManager.js\"));const manualManager_1=__importDefault(__webpack_require__(/*! ./support/manualManager */ \"./node_modules/foxyjs/support/manualManager.js\"));const rectTool_1=__importDefault(__webpack_require__(/*! ./tools/rectTool */ \"./node_modules/foxyjs/tools/rectTool.js\"));const ellipseTool_1=__importDefault(__webpack_require__(/*! ./tools/ellipseTool */ \"./node_modules/foxyjs/tools/ellipseTool.js\"));const otherShapeTool_1=__importDefault(__webpack_require__(/*! ./tools/otherShapeTool */ \"./node_modules/foxyjs/tools/otherShapeTool.js\"));const undoManager_1=__importDefault(__webpack_require__(/*! ./support/undoManager */ \"./node_modules/foxyjs/support/undoManager.js\"));const config_1=__importDefault(__webpack_require__(/*! ./utils/config */ \"./node_modules/foxyjs/utils/config.js\"));const zoomManager_1=__importDefault(__webpack_require__(/*! ./support/zoomManager */ \"./node_modules/foxyjs/support/zoomManager.js\"));const arrangementManager_1=__importDefault(__webpack_require__(/*! ./support/arrangementManager */ \"./node_modules/foxyjs/support/arrangementManager.js\"));const groupManager_1=__importDefault(__webpack_require__(/*! ./support/groupManager */ \"./node_modules/foxyjs/support/groupManager.js\"));const transformManager_1=__importDefault(__webpack_require__(/*! ./support/transformManager */ \"./node_modules/foxyjs/support/transformManager.js\"));const orderManager_1=__importDefault(__webpack_require__(/*! ./support/orderManager */ \"./node_modules/foxyjs/support/orderManager.js\"));const commands_1=__importDefault(__webpack_require__(/*! ./support/commands */ \"./node_modules/foxyjs/support/commands.js\"));class Stage{get scale(){return __classPrivateFieldGet(this,_Stage_scale,\"f\")}get board(){return __classPrivateFieldGet(this,_Stage_board,\"f\")}get workspaces(){return __classPrivateFieldGet(this,_Stage_workspaces,\"f\")}get currentContainer(){return __classPrivateFieldGet(this,_Stage_currentContainer,\"f\")}set currentContainer(e){__classPrivateFieldSet(this,_Stage_currentContainer,e,\"f\");this.board.dispatchEvent(new CustomEvent(\"currentcontainerchange\"))}get currentTool(){return __classPrivateFieldGet(this,_Stage_currentTool,\"f\")}get selectedObjectElements(){return __classPrivateFieldGet(this,_Stage_selectedObjectElements,\"f\")}get selectedTextRange(){return __classPrivateFieldGet(this,_Stage_selectedTextRange,\"f\")}set selectedTextRange(e){__classPrivateFieldGet(this,_Stage_setSelectedTextRange,\"f\").call(this,e)}get config(){return __classPrivateFieldGet(this,_Stage_config,\"f\")}get svg(){return __classPrivateFieldGet(this,_Stage_svg,\"f\")}get canvas(){return __classPrivateFieldGet(this,_Stage_canvas,\"f\")}get currentWorkspace(){return __classPrivateFieldGet(this,_Stage_currentWorkspace,\"f\")}get transformTool(){return __classPrivateFieldGet(this,_Stage_transformTool,\"f\")}get transformSelect(){return __classPrivateFieldGet(this,_Stage_transformSelect,\"f\")}get rubberBand(){return __classPrivateFieldGet(this,_Stage_rubberBand,\"f\")}get hoverManager(){return __classPrivateFieldGet(this,_Stage_hoverManager,\"f\")}get zoomManager(){return __classPrivateFieldGet(this,_Stage_zoomManager,\"f\")}get panTool(){return __classPrivateFieldGet(this,_Stage_panTool,\"f\")}get rectTool(){return __classPrivateFieldGet(this,_Stage_rectTool,\"f\")}get ellipseTool(){return __classPrivateFieldGet(this,_Stage_ellipseTool,\"f\")}get otherShapeTool(){return __classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\")}get undoManager(){return __classPrivateFieldGet(this,_Stage_undoManager,\"f\")}get viewTool(){return __classPrivateFieldGet(this,_Stage_viewTool,\"f\")}get freehandHud(){return __classPrivateFieldGet(this,_Stage_freehandHud,\"f\")}get freehandTool(){return __classPrivateFieldGet(this,_Stage_freehandTool,\"f\")}get splineTool(){return __classPrivateFieldGet(this,_Stage_splineTool,\"f\")}get cubicBezierSegHud(){return __classPrivateFieldGet(this,_Stage_cubicBezierSegHud,\"f\")}get penTool(){return __classPrivateFieldGet(this,_Stage_penTool,\"f\")}get textHud(){return __classPrivateFieldGet(this,_Stage_textHud,\"f\")}get textTool(){return __classPrivateFieldGet(this,_Stage_textTool,\"f\")}get clipboardManager(){return __classPrivateFieldGet(this,_Stage_clipboardManager,\"f\")}get manualManager(){return __classPrivateFieldGet(this,_Stage_manualManager,\"f\")}get smartManager(){return __classPrivateFieldGet(this,_Stage_smartManager,\"f\")}get gridManager(){return __classPrivateFieldGet(this,_Stage_gridManager,\"f\")}get rulerManager(){return __classPrivateFieldGet(this,_Stage_rulerManager,\"f\")}get snapManager(){return __classPrivateFieldGet(this,_Stage_snapManager,\"f\")}get arrangementManager(){return __classPrivateFieldGet(this,_Stage_arrangementManager,\"f\")}get groupManager(){return __classPrivateFieldGet(this,_Stage_groupManager,\"f\")}get transformManager(){return __classPrivateFieldGet(this,_Stage_transformManager,\"f\")}get orderManager(){return __classPrivateFieldGet(this,_Stage_orderManager,\"f\")}get commands(){return __classPrivateFieldGet(this,_Stage_commands,\"f\")}get pointerClickCount(){return __classPrivateFieldGet(this,_Stage_pointerClickCount,\"f\")}get pointerClientPoint(){return __classPrivateFieldGet(this,_Stage_pointerClientPoint,\"f\")}get textInputMode(){return __classPrivateFieldGet(this,_Stage_textInputMode,\"f\")}constructor(e){_Stage_instances.add(this);_Stage_scale.set(this,1);this.geometryPrecision=3;this.transformPrecision=6;_Stage_board.set(this,void 0);_Stage_workspaces.set(this,void 0);_Stage_currentContainer.set(this,void 0);_Stage_currentTool.set(this,void 0);_Stage_selectedObjectElements.set(this,new Map);_Stage_selectedElements.set(this,new Map);this.selectedElements={set:e=>{if(!__classPrivateFieldGet(this,_Stage_selectedElements,\"f\").has(e)){__classPrivateFieldGet(this,_Stage_selectedElements,\"f\").set(e,e);common_1.S.includes(e.localName)&&__classPrivateFieldGet(this,_Stage_selectedObjectElements,\"f\").set(e,e);this.board.dispatchEvent(new CustomEvent(\"selectedelementschange\"))}},sets:e=>{e.forEach(e=>{__classPrivateFieldGet(this,_Stage_selectedElements,\"f\").set(e,e);common_1.S.includes(e.localName)&&__classPrivateFieldGet(this,_Stage_selectedObjectElements,\"f\").set(e,e)});this.board.dispatchEvent(new CustomEvent(\"selectedelementschange\"))},get:e=>{if(e)return __classPrivateFieldGet(this,_Stage_selectedElements,\"f\").get(e);else return __classPrivateFieldGet(this,_Stage_selectedElements,\"f\")},has:e=>{return __classPrivateFieldGet(this,_Stage_selectedElements,\"f\").has(e)},delete:e=>{__classPrivateFieldGet(this,_Stage_selectedElements,\"f\").delete(e);__classPrivateFieldGet(this,_Stage_selectedObjectElements,\"f\").delete(e);this.board.dispatchEvent(new CustomEvent(\"selectedelementschange\"))},clear:()=>{__classPrivateFieldGet(this,_Stage_selectedElements,\"f\").clear();__classPrivateFieldGet(this,_Stage_selectedObjectElements,\"f\").clear();this.board.dispatchEvent(new CustomEvent(\"selectedelementschange\"))},keys:()=>{return __classPrivateFieldGet(this,_Stage_selectedElements,\"f\").keys()},length:()=>{return __classPrivateFieldGet(this,_Stage_selectedElements,\"f\").size},get size(){return this.length()}};_Stage_selectedTextRange.set(this,void 0);_Stage_config.set(this,void 0);_Stage_svg.set(this,void 0);_Stage_canvas.set(this,void 0);_Stage_currentWorkspace.set(this,void 0);_Stage_transformTool.set(this,void 0);_Stage_transformSelect.set(this,void 0);_Stage_rubberBand.set(this,void 0);_Stage_hoverManager.set(this,void 0);_Stage_zoomManager.set(this,void 0);_Stage_panTool.set(this,void 0);_Stage_rectTool.set(this,void 0);_Stage_ellipseTool.set(this,void 0);_Stage_otherShapeTool.set(this,void 0);_Stage_undoManager.set(this,void 0);_Stage_viewTool.set(this,void 0);_Stage_freehandHud.set(this,void 0);_Stage_freehandTool.set(this,void 0);_Stage_splineTool.set(this,void 0);_Stage_cubicBezierSegHud.set(this,void 0);_Stage_penTool.set(this,void 0);_Stage_textHud.set(this,void 0);_Stage_textTool.set(this,void 0);_Stage_clipboardManager.set(this,void 0);_Stage_manualManager.set(this,void 0);_Stage_smartManager.set(this,void 0);_Stage_gridManager.set(this,void 0);_Stage_rulerManager.set(this,void 0);_Stage_snapManager.set(this,void 0);_Stage_arrangementManager.set(this,void 0);_Stage_groupManager.set(this,void 0);_Stage_transformManager.set(this,void 0);_Stage_orderManager.set(this,void 0);_Stage_commands.set(this,void 0);_Stage_pointerClickCount.set(this,0);_Stage_pointerClientPoint.set(this,new DOMPoint(0,0));this.shiftKey=false;this.ctrlKey=false;this.altKey=false;_Stage_textInputMode.set(this,false);_Stage_PM.set(this,[]);this.toggleTool=e=>{if(!e||__classPrivateFieldGet(this,_Stage_currentTool,\"f\")===e)return;__classPrivateFieldGet(this,_Stage_transformSelect,\"f\").disabledCallback();__classPrivateFieldGet(this,_Stage_transformTool,\"f\").disabledCallback();__classPrivateFieldGet(this,_Stage_hoverManager,\"f\").disabledCallback();__classPrivateFieldGet(this,_Stage_textTool,\"f\").disabledCallback();__classPrivateFieldGet(this,_Stage_panTool,\"f\").disabledCallback();__classPrivateFieldGet(this,_Stage_rectTool,\"f\").disabledCallback();__classPrivateFieldGet(this,_Stage_ellipseTool,\"f\").disabledCallback();__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").disabledCallback();__classPrivateFieldGet(this,_Stage_textHud,\"f\").disabledCallback();__classPrivateFieldGet(this,_Stage_freehandTool,\"f\").disabledCallback();__classPrivateFieldGet(this,_Stage_splineTool,\"f\").disabledCallback();__classPrivateFieldGet(this,_Stage_penTool,\"f\").disabledCallback();switch(e){case\"transform-tool\":__classPrivateFieldGet(this,_Stage_transformSelect,\"f\").enabledCallback();__classPrivateFieldGet(this,_Stage_transformTool,\"f\").enabledCallback();__classPrivateFieldGet(this,_Stage_hoverManager,\"f\").enabledCallback();break;case\"edit-tool\":break;case\"pan-tool\":__classPrivateFieldGet(this,_Stage_panTool,\"f\").enabledCallback();break;case\"freehand-tool\":__classPrivateFieldGet(this,_Stage_freehandTool,\"f\").enabledCallback();__classPrivateFieldGet(this,_Stage_splineTool,\"f\").enabledCallback();break;case\"pen-tool\":__classPrivateFieldGet(this,_Stage_penTool,\"f\").enabledCallback();__classPrivateFieldGet(this,_Stage_splineTool,\"f\").enabledCallback();break;case\"rect-tool\":__classPrivateFieldGet(this,_Stage_rectTool,\"f\").enabledCallback();break;case\"ellipse-tool\":__classPrivateFieldGet(this,_Stage_ellipseTool,\"f\").enabledCallback();break;case\"text-tool\":__classPrivateFieldGet(this,_Stage_textTool,\"f\").enabledCallback();__classPrivateFieldGet(this,_Stage_textHud,\"f\").enabledCallback();__classPrivateFieldGet(this,_Stage_hoverManager,\"f\").enabledCallback();break;case\"line-tool\":break;case\"triangle-tool\":__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").useType(\"triangle\");__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").enabledCallback();break;case\"n-gon-tool\":__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").useType(\"n-gon\");__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").enabledCallback();break;case\"star-tool\":__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").useType(\"star\");__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").enabledCallback();break;case\"cross-tool\":__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").useType(\"cross\");__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").enabledCallback();break;case\"frame-tool\":__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").useType(\"frame\");__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").enabledCallback();break;case\"ring-tool\":__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").useType(\"ring\");__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").enabledCallback();break;case\"pie-tool\":__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").useType(\"pie\");__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").enabledCallback();break;case\"crescent-tool\":__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").useType(\"crescent\");__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").enabledCallback();break;case\"cog-tool\":__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").useType(\"cog\");__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").enabledCallback();break;case\"spiral-tool\":__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").useType(\"spiral\");__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").enabledCallback();break;case\"arrow-tool\":__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").useType(\"arrow\");__classPrivateFieldGet(this,_Stage_otherShapeTool,\"f\").enabledCallback();break;case\"path-tool\":break;case\"view-tool\":break;default:break}__classPrivateFieldSet(this,_Stage_currentTool,e,\"f\")};this.setStyle=t=>{if(Object.keys(t).length>1)return;let a=void 0;let r=void 0;Object.keys(t).forEach(e=>{a=e;r=t[e]});this.undoManager.checkpoint(\"#color\",`#${a}-panel`);const e=__classPrivateFieldGet(this,_Stage_instances,\"m\",_Stage_Ra).call(this);const s=e.filter(e=>\"text\"===e.localName);const i=this.selectedTextRange;let l=[];for(let e of s)(0,common_1.Ti)(e,i);for(let r of e)if(\"text\"===r.localName&&r.querySelector(\"tspan\")){let e=r.querySelectorAll(\"tspan\");let t=(0,common_1.$i)(i,r);let a=t.length>0&&!i.collapsed?t:e;l.push(...a)}else l.push(r);for(let e of l){e.style[a]=r}};_Stage_createdObserver.set(this,()=>{new MutationObserver(e=>__classPrivateFieldGet(this,_Stage_workspacemutation,\"f\").call(this,e)).observe(this.workspaces,{attributeOldValue:false,attributes:true,characterData:true,characterDataOldValue:false,childList:true,subtree:true});new MutationObserver(()=>__classPrivateFieldGet(this,_Stage_zoomChange,\"f\").call(this)).observe(this.canvas,{attributes:true,attributeFilter:[\"transform\"]});__classPrivateFieldGet(this,_Stage_textInputModeChange,\"f\").call(this)});_Stage_workspacemutation.set(this,e=>{var a,r;this.board.dispatchEvent(new CustomEvent(\"workspacemutation\",{detail:e}));const t=\"disabled\";let s=!1;let i=!1;let l=!1;let _=!1;for(let t of e)if(t.target===this.workspaces)\"childList\"===t.type&&(s=!0);else{if(\"defs\"===t.target.localName){if(t.removedNodes.length>0){\"view\"===t.removedNodes[0].localName&&(l=!0);for(let e of t.removedNodes)if((a=e.hasAttribute)===null||a===void 0?void 0:a.call(e,\"data-bx-fonts\")){i=!0;break}}else{if(t.addedNodes.length>0){\"view\"===t.addedNodes[0].localName&&(l=!0);for(let e of t.addedNodes)if((r=e.hasAttribute)===null||r===void 0?void 0:r.call(e,\"data-bx-fonts\")){i=!0;break}}}}}if(s){this.board.dispatchEvent(new CustomEvent(\"currentworkspacechange\"))}});_Stage_textInputModeChange.set(this,()=>{__classPrivateFieldGet(this,_Stage_textHud,\"f\").hud.addEventListener(\"textinputmodestart\",()=>{__classPrivateFieldSet(this,_Stage_textInputMode,true,\"f\")});__classPrivateFieldGet(this,_Stage_textHud,\"f\").hud.addEventListener(\"textinputmodeend\",()=>{__classPrivateFieldSet(this,_Stage_textInputMode,false,\"f\")})});_Stage_zoomChange.set(this,()=>{__classPrivateFieldSet(this,_Stage_scale,this.canvas.getMatrix().a,\"f\");this.board.dispatchEvent(new CustomEvent(\"zoomchange\"))});_Stage_setSelectedTextRange.set(this,e=>{null===__classPrivateFieldGet(this,_Stage_selectedTextRange,\"f\")&&null===e||__classPrivateFieldGet(this,_Stage_selectedTextRange,\"f\")&&e&&__classPrivateFieldGet(this,_Stage_selectedTextRange,\"f\").startContainer===e.startContainer&&__classPrivateFieldGet(this,_Stage_selectedTextRange,\"f\").endContainer===e.endContainer&&__classPrivateFieldGet(this,_Stage_selectedTextRange,\"f\").startOffset===e.startOffset&&__classPrivateFieldGet(this,_Stage_selectedTextRange,\"f\").endOffset===e.endOffset||__classPrivateFieldSet(this,_Stage_selectedTextRange,e,\"f\");this.board.dispatchEvent(new CustomEvent(\"selectedtextrangechange\"))});_Stage_pointerdown.set(this,e=>{const{shiftKey:t,ctrlKey:a,altKey:r,clientX:s,clientY:i}=e;this.shiftKey=t;this.ctrlKey=a;this.altKey=r;__classPrivateFieldSet(this,_Stage_pointerClientPoint,new DOMPoint(s,i),\"f\");{let t=1;let a=null;for(__classPrivateFieldGet(this,_Stage_PM,\"f\").push(e);__classPrivateFieldGet(this,_Stage_PM,\"f\").length>8;){__classPrivateFieldGet(this,_Stage_PM,\"f\").shift()}for(let e of __classPrivateFieldGet(this,_Stage_PM,\"f\")){if(a){if(\"pen\"===e.pointerType||\"touch\"===e.pointerType){const l=\"touch\"===e.pointerType?9:3;Math.sqrt(Math.pow(e.clientX-a.clientX,2)+Math.pow(e.clientY-a.clientY,2))<l&&e.timeStamp-a.timeStamp<600?t+=1:t=1}else e.clientX===a.clientX&&e.clientY===a.clientY&&e.timeStamp-a.timeStamp<600?t+=1:t=1}a=e}__classPrivateFieldSet(this,_Stage_pointerClickCount,t,\"f\")}});_Stage_pointermove.set(this,e=>{const{shiftKey:t,ctrlKey:a,altKey:r,clientX:s,clientY:i}=e;this.shiftKey=t;this.ctrlKey=a;this.altKey=r;__classPrivateFieldSet(this,_Stage_pointerClientPoint,new DOMPoint(s,i),\"f\")});_Stage_pointerup.set(this,e=>{const{shiftKey:t,ctrlKey:a,altKey:r,clientX:s,clientY:i}=e;this.shiftKey=t;this.ctrlKey=a;this.altKey=r;__classPrivateFieldSet(this,_Stage_pointerClientPoint,new DOMPoint(s,i),\"f\")});this.getHitWorkspaceElements=(r,s)=>{const i=[];for(let[e,a]of common_1.vc){let t=document.elementFromPoint(r+e,s+a);if(t){if(\"tspan\"===t.localName||\"textPath\"===t.localName)t=t.closest(\"text\");else{if(\"a\"===t.localName){let e=t.closest(\"text\");e&&(t=e)}}!i.includes(t)&&this.currentWorkspace.contains(t)&&i.push(t)}}return(0,common_1.os)(i)};this.scrollBy=(e=0,t=0)=>{const a=new DOMMatrix;a.translateSelf(e,t);a.multiplySelf((0,common_1.ct)(this.canvas));this.canvas.setAttribute(\"transform\",a.toString())};this.insertBitmap=(o,n=\"boardCenter\")=>__awaiter(this,void 0,void 0,function*(){let{width:e,height:t}=yield(0,common_1.On)(o);const a=(0,common_1.Zi)(\"svg:image\");a.setAttribute(\"href\",o);a.setAttribute(\"width\",e);a.setAttribute(\"height\",t);let r;let s=this.currentContainer||this.currentWorkspace;let i=(0,common_1.ut)(s).inverse();if(\"boardCenter\"===n){let e=this.board.getBoundingClientRect();r=new DOMPoint(e.left+e.width/2,e.top+e.height/2)}else\"pointer\"===n&&(r=this.pointerClientPoint);let l=r.matrixTransform(i);s.append(a);let _=(0,common_1.Wi)(a);a.setAttribute(\"x\",(l[\"x\"]-_.width/2).toString());a.setAttribute(\"y\",(l[\"y\"]-_.height/2).toString());this.selectedElements.clear();this.selectedElements.set(a)});this.insertArtwork=(t,r=\"boardCenter\")=>{let s=this.currentContainer||this.currentWorkspace;let l=[];let e=this.extractArtwork();(0,common_1.Dc)(t,e);for(let e of t.style)\"shape-rendering\"===e&&s.style.setProperty(e,t.style.getPropertyValue(e));for(let r of[...t.children])if(\"defs\"===r.localName){for(let t of[...r.children])if(\"style\"===t.localName&&t.hasAttribute(\"data-bx-fonts\")){let e=t.getAttribute(\"data-bx-fonts\")}else{}}else{if(common_1.b.includes(r.localName)){let e=(0,common_1.pt)(s,this.currentWorkspace);let t=(0,common_1.ct)(r);let a=new DOMMatrix;a.multiplySelf(e.inverse());a.multiplySelf(t);a=(0,common_1.lt)(a,6);a.isIdentity?r.removeAttribute(\"transform\"):r.setAttribute(\"transform\",a.toString());s.append(r);l.push(r)}else s.append(r)}if(\"original\"!==r){let e=l.map(e=>(0,common_1.Yi)(e));e=e.filter(e=>e.width>0||e.height>0);let t,a=(0,common_1.ci)(e);if(\"boardCenter\"===r){let e=this.board.getBoundingClientRect();t=new DOMPoint(e.left+e.width/2,e.top+e.height/2)}else t=\"belowOriginal\"===r?new DOMPoint(a.x+a.width/2+15,a.y+a.height/2+15):this.pointerClientPoint;let s=t.x-(a.x+a.width/2);let i=t.y-(a.y+a.height/2);for(let r of l){let e=(0,common_1.ut)(r);let t=e.inverse();let a=(0,common_1.ct)(r);a.multiplySelf(t);a.translateSelf(s,i);a.multiplySelf(e);a=(0,common_1.lt)(a,6);r.setAttribute(\"transform\",a.toString())}}this.selectedElements.clear();l.forEach(e=>{this.selectedElements.set(e)})};this.extractArtwork=()=>{let s=(0,common_1.Zi)(\"svg:svg\");let a=__classPrivateFieldGet(this,_Stage_currentWorkspace,\"f\");for(let{name:e,value:t}of a[\"attributes\"])\"data-bx-workspace\"!==e&&(\"data-bx-transform\"===e?s.setAttribute(\"transform\",t):s[\"setAttribute\"](e,t));for(let e of a[\"childNodes\"])s.append(e.cloneNode(!0));if(\"symbol\"===this.currentWorkspace.getAttribute(\"data-bx-workspace\")){let a=this.currentWorkspace;let r=s.querySelector(\"symbol#\"+CSS.escape(a[\"id\"]));for(let{name:e,value:t}of r.attributes)!1===a.hasAttribute(e)&&r.removeAttribute(e);for(let{name:e,value:t}of a.attributes)\"data-bx-workspace\"!==e&&r.setAttribute(e,t);r.innerHTML=a.innerHTML}if(\"pattern\"===this.currentWorkspace.getAttribute(\"data-bx-workspace\")){let a=this.currentWorkspace;let r=s.querySelector(\"pattern#\"+CSS.escape(a[\"id\"]));for(let{name:e,value:t}of r.attributes)!1===a.hasAttribute(e)&&r.removeAttribute(e);for(let{name:e,value:t}of a.attributes)\"data-bx-workspace\"!==e&&r.setAttribute(e,t);r.innerHTML=a.innerHTML}if(\"marker\"===this.currentWorkspace.getAttribute(\"data-bx-workspace\")){let a=this.currentWorkspace;let r=s.querySelector(\"marker#\"+CSS.escape(a[\"id\"]));for(let{name:e,value:t}of r.attributes)!1===a.hasAttribute(e)&&r.removeAttribute(e);for(let{name:e,value:t}of a.attributes)\"data-bx-workspace\"!==e&&r.setAttribute(e,t);r.innerHTML=a.innerHTML}return s};this.extractArtworkWithSelectedElements=(e=[0,0,0,0])=>{return this.extractArtworkWithElements(Array.from(__classPrivateFieldGet(this,_Stage_selectedElements,\"f\").keys()),e)};this.extractArtworkWithElements=(c,g=[0,0,0,0])=>{c=(0,common_1.os)(c);let e=__classPrivateFieldGet(this,_Stage_instances,\"m\",_Stage_qi).call(this,c);let a=[];for(let t of e){let e=this.currentWorkspace.querySelector(\"#\"+CSS.escape(t));e||(e=this.currentWorkspace.querySelector(\"#\"+CSS.escape(t)));e&&a.push(e)}a=a.filter(t=>{for(let e of c)if(e.contains(t)||e===t)return!1;for(let e of a)if(e.contains(t)&&e!==t)return!1;return!0});let d=(0,common_1.Zi)(\"svg:svg\");let t=(0,common_1.Zi)(\"svg:defs\");d.append(t);for(let e of a)e.closest(\"defs\")?t.append(e.cloneNode(!0)):d.append(e.cloneNode(!0));for(let a of c){let e=a.cloneNode(!0);let t=(0,common_1.pt)(a,this.currentWorkspace);t=(0,common_1.lt)(t,6);t.isIdentity?e.removeAttribute(\"transform\"):e.setAttribute(\"transform\",t.toString());d.append(e)}for(let e of __classPrivateFieldGet(this,_Stage_workspaces,\"f\").querySelectorAll(\"style\"))t.append(e.cloneNode(!0));0===t.childElementCount&&t.remove();{let e=c.map(e=>(0,common_1.Yi)(e));let t=(0,common_1.ci)(e);t=(0,common_1.di)(t,(0,common_1.ut)(this.currentWorkspace).inverse());t=(0,common_1.hi)(t,3);let[a,r,s,i]=g;let l=t.x-i;let _=t.y-a;let o=t.width+i+r;let n=t.height+a+s;d.setAttribute(\"viewBox\",l+\" \"+_+\" \"+o+\" \"+n);d.setAttribute(\"width\",o.toString());d.setAttribute(\"height\",n.toString())}return d};this.isSelectableElement=e=>{return!1!==common_1.b[\"includes\"](e[\"localName\"])&&(e[\"parentElement\"]!==__classPrivateFieldGet(this,_Stage_workspaces,\"f\")&&(!1!==this[\"currentWorkspace\"][\"contains\"](e)&&(!e[\"closest\"](\"defs\")&&(!e[\"closest\"](\"text\")||\"text\"===e[\"localName\"]))))};this.addGraph=e=>{let t=__classPrivateFieldGet(this,_Stage_currentContainer,\"f\")||__classPrivateFieldGet(this,_Stage_currentWorkspace,\"f\");t.append(e)};this.generateUniqueID=(a,r=null,e=0)=>{for(let t=e;t<Infinity;t+=1){let e=a+t;if(!__classPrivateFieldGet(this,_Stage_workspaces,\"f\").querySelector(\"#\"+CSS.escape(e))){if(!r)return e;if(!r[\"querySelector\"](\"#\"+CSS.escape(e)))return e}}};if(!e)throw new Error(\"set board please.\");__classPrivateFieldSet(this,_Stage_config,new config_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_board,e,\"f\");__classPrivateFieldGet(this,_Stage_board,\"f\").style.setProperty(\"user-select\",\"none\");__classPrivateFieldSet(this,_Stage_svg,(0,common_1.Zi)(\"svg:svg\"),\"f\");__classPrivateFieldGet(this,_Stage_svg,\"f\").style.background=\"#f0f0f0\";__classPrivateFieldGet(this,_Stage_svg,\"f\").innerHTML=(0,layout_1.default)({a:1,b:0,c:0,d:1,e:20,f:20});this.board.append(__classPrivateFieldGet(this,_Stage_svg,\"f\"));__classPrivateFieldSet(this,_Stage_workspaces,document.querySelector(\"#workspaces\"),\"f\");window.addEventListener(\"pointerdown\",__classPrivateFieldGet(this,_Stage_pointerdown,\"f\"),!0);window.addEventListener(\"pointermove\",__classPrivateFieldGet(this,_Stage_pointermove,\"f\"));window.addEventListener(\"pointerup\",__classPrivateFieldGet(this,_Stage_pointerup,\"f\"));__classPrivateFieldSet(this,_Stage_currentWorkspace,document.querySelector('[uid=\"foxy-workspace\"]'),\"f\");__classPrivateFieldSet(this,_Stage_canvas,document.querySelector('[uid=\"canvas\"]'),\"f\");__classPrivateFieldSet(this,_Stage_currentContainer,this.currentWorkspace,\"f\");__classPrivateFieldSet(this,_Stage_clipboardManager,new clipboardManager_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_undoManager,new undoManager_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_rulerManager,new rulerManager_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_manualManager,new manualManager_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_smartManager,new smartManager_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_gridManager,new gridManager_1.default(this),\"f\");window.onload=()=>{const e=__classPrivateFieldGet(this,_Stage_board,\"f\").clientWidth||window.innerWidth;const t=__classPrivateFieldGet(this,_Stage_board,\"f\").clientHeight||window.innerHeight;__classPrivateFieldGet(this,_Stage_svg,\"f\").setAttribute(\"width\",e.toString());__classPrivateFieldGet(this,_Stage_svg,\"f\").setAttribute(\"height\",t.toString());__classPrivateFieldGet(this,_Stage_svg,\"f\").setAttribute(\"viewBox\",`0  0 ${e} ${t}`);const{manualGuides:a,smartGuides:r,grid:s}=this.config;if(!s.disabled)__classPrivateFieldGet(this,_Stage_gridManager,\"f\").enabledCallback();if(!r.disabled)__classPrivateFieldGet(this,_Stage_smartManager,\"f\").enabledCallback();if(!a.disabled){__classPrivateFieldGet(this,_Stage_rulerManager,\"f\").enabledCallback();__classPrivateFieldGet(this,_Stage_manualManager,\"f\").enabledCallback()}};__classPrivateFieldSet(this,_Stage_snapManager,new snapManager_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_zoomManager,new zoomManager_1.default(this),\"f\");__classPrivateFieldGet(this,_Stage_zoomManager,\"f\").enabledCallback();__classPrivateFieldSet(this,_Stage_hoverManager,new hoverManager_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_transformSelect,new transformSelect_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_transformTool,new transformTool_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_rubberBand,new rubberBand_1.default,\"f\");__classPrivateFieldSet(this,_Stage_panTool,new panTool_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_rectTool,new rectTool_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_ellipseTool,new ellipseTool_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_otherShapeTool,new otherShapeTool_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_textTool,new textTool_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_textHud,new textHud_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_viewTool,new viewTool_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_arrangementManager,new arrangementManager_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_groupManager,new groupManager_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_transformManager,new transformManager_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_orderManager,new orderManager_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_commands,new commands_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_splineTool,new splineTool_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_freehandHud,new freehandHud_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_freehandTool,new freehandTool_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_cubicBezierSegHud,new cubicBezierSegHud_1.default(this),\"f\");__classPrivateFieldSet(this,_Stage_penTool,new penTool_1.default(this),\"f\");__classPrivateFieldGet(this,_Stage_createdObserver,\"f\").call(this)}uninstall(){window.removeEventListener(\"pointerdown\",__classPrivateFieldGet(this,_Stage_pointerdown,\"f\"),!0);window.removeEventListener(\"pointermove\",__classPrivateFieldGet(this,_Stage_pointermove,\"f\"));window.removeEventListener(\"pointerup\",__classPrivateFieldGet(this,_Stage_pointerup,\"f\"))}}exports.Stage=Stage;_Stage_scale=new WeakMap,_Stage_board=new WeakMap,_Stage_workspaces=new WeakMap,_Stage_currentContainer=new WeakMap,_Stage_currentTool=new WeakMap,_Stage_selectedObjectElements=new WeakMap,_Stage_selectedElements=new WeakMap,_Stage_selectedTextRange=new WeakMap,_Stage_config=new WeakMap,_Stage_svg=new WeakMap,_Stage_canvas=new WeakMap,_Stage_currentWorkspace=new WeakMap,_Stage_transformTool=new WeakMap,_Stage_transformSelect=new WeakMap,_Stage_rubberBand=new WeakMap,_Stage_hoverManager=new WeakMap,_Stage_zoomManager=new WeakMap,_Stage_panTool=new WeakMap,_Stage_rectTool=new WeakMap,_Stage_ellipseTool=new WeakMap,_Stage_otherShapeTool=new WeakMap,_Stage_undoManager=new WeakMap,_Stage_viewTool=new WeakMap,_Stage_freehandHud=new WeakMap,_Stage_freehandTool=new WeakMap,_Stage_splineTool=new WeakMap,_Stage_cubicBezierSegHud=new WeakMap,_Stage_penTool=new WeakMap,_Stage_textHud=new WeakMap,_Stage_textTool=new WeakMap,_Stage_clipboardManager=new WeakMap,_Stage_manualManager=new WeakMap,_Stage_smartManager=new WeakMap,_Stage_gridManager=new WeakMap,_Stage_rulerManager=new WeakMap,_Stage_snapManager=new WeakMap,_Stage_arrangementManager=new WeakMap,_Stage_groupManager=new WeakMap,_Stage_transformManager=new WeakMap,_Stage_orderManager=new WeakMap,_Stage_commands=new WeakMap,_Stage_pointerClickCount=new WeakMap,_Stage_pointerClientPoint=new WeakMap,_Stage_textInputMode=new WeakMap,_Stage_PM=new WeakMap,_Stage_createdObserver=new WeakMap,_Stage_workspacemutation=new WeakMap,_Stage_textInputModeChange=new WeakMap,_Stage_zoomChange=new WeakMap,_Stage_setSelectedTextRange=new WeakMap,_Stage_pointerdown=new WeakMap,_Stage_pointermove=new WeakMap,_Stage_pointerup=new WeakMap,_Stage_instances=new WeakSet,_Stage_Ra=function e(){let a=[];const r=t=>{for(let e of t)common_1.w.includes(e.localName)||\"use\"===e.localName?a.push(e):\"g\"!==e.localName&&\"a\"!==e.localName||r(e.children)};r(Array.from(__classPrivateFieldGet(this,_Stage_selectedObjectElements,\"f\").keys()));return a},_Stage_qi=function e(a){a=(0,common_1.os)(a);let r=new Set;for(let t of a)for(let e of __classPrivateFieldGet(this,_Stage_instances,\"m\",_Stage_Xi).call(this,t))r[\"add\"](e);return[...r]},_Stage_Xi=function e(t){let i=new Set;const l=[\"fill\",\"stroke\",\"filter\",\"clip-path\",\"mask\",\"marker-mid\",\"marker-start\",\"marker-end\"];let _=e=>{var t,a;let r=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT);let s=null;for(;s=r.nextNode();){let r=getComputedStyle(s);for(let e of l){let t=r.getPropertyValue(e);let a=new Set;if(\"filter\"===e){if(\"none\"!==t){}}else{if(t===null||t===void 0?void 0:t.startsWith('url(\"#')){let e=t.substring(6,t.length-2);a.add(e)}}for(let t of a)if(!1===i.has(t)){i.add(t);let e=this.currentWorkspace.querySelector(\"#\"+CSS.escape(t));e||(e=this.currentWorkspace.querySelector(\"#\"+CSS.escape(t)));e&&_(e)}}if(\"#\"===((a=(t=s.href)===null||t===void 0?void 0:t.baseVal)===null||a===void 0?void 0:a[0])){let t=s.href.baseVal.substring(1,s.href.baseVal.length);if(!1===i.has(t)){i.add(t);let e=this.currentWorkspace.querySelector(\"#\"+CSS.escape(t));e||(e=this.currentWorkspace.querySelector(\"#\"+CSS.escape(t)));e&&_(e)}}}};_(t);return[...i]};\n\n//# sourceURL=webpack:///./node_modules/foxyjs/index.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/arrangementManager.js":
/*!***********************************************************!*\
  !*** ./node_modules/foxyjs/support/arrangementManager.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,i,a,r){if(a===\"m\")throw new TypeError(\"Private method is not writable\");if(a===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return a===\"a\"?r.call(e,i):r?r.value=i:t.set(e,i),i};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,i,a){if(i===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return i===\"m\"?a:i===\"a\"?a.call(e):a?a.value:t.get(e)};var _arrangementManager_instances,_arrangementManager_stage,_arrangementManager_hp,_arrangementManager_Zw,_arrangementManager_Kw;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class arrangementManager{constructor(e){_arrangementManager_instances.add(this);_arrangementManager_stage.set(this,void 0);this.move=(e,t)=>{__classPrivateFieldGet(this,_arrangementManager_instances,\"m\",_arrangementManager_Kw).call(this,e,t)};__classPrivateFieldSet(this,_arrangementManager_stage,e,\"f\")}align(e,t){var i;const a=Array.from(__classPrivateFieldGet(this,_arrangementManager_stage,\"f\").selectedObjectElements.keys());const r=(i=document.querySelector(\"#background-outlines\"))===null||i===void 0?void 0:i.getBoundingClientRect();__classPrivateFieldGet(this,_arrangementManager_instances,\"m\",_arrangementManager_hp).call(this,a,t||r,e)}}_arrangementManager_stage=new WeakMap,_arrangementManager_instances=new WeakSet,_arrangementManager_hp=function e(i,d,c,t=!0){if(!1===t)for(let m of i){let e=(0,common_1.ct)(m);let t=(0,common_1.ut)(m);let i=t.inverse();let a=(0,common_1.Yi)(m);let r=0;let n=0;let l=1;let s=1;let h=0;let o=0;if(\"move-left-inside\"===c)r=d[\"x\"]-a[\"x\"];else{if(\"move-left-outside\"===c)r=d[\"x\"]-a[\"x\"]-a.width;else{if(\"move-right-inside\"===c)r=d[\"x\"]+d.width-a[\"x\"]-a.width;else{if(\"move-right-outside\"===c)r=d[\"x\"]+d.width-a[\"x\"];else{if(\"move-top-inside\"===c)n=d[\"y\"]-a[\"y\"];else{if(\"move-top-outside\"===c)n=d[\"y\"]-a[\"y\"]-a.height;else{if(\"move-bottom-inside\"===c)n=d[\"y\"]+d.height-a[\"y\"]-a.height;else{if(\"move-bottom-outside\"===c)n=d[\"y\"]+d.height-a[\"y\"];else{if(\"center\"===c){r=d[\"x\"]-a[\"x\"]+d.width/2-a.width/2;n=d[\"y\"]-a[\"y\"]+d.height/2-a.height/2}else{if(\"horizontal-center\"===c)r=d[\"x\"]-a[\"x\"]+d.width/2-a.width/2;else{if(\"vertical-center\"===c)n=d[\"y\"]-a[\"y\"]+d.height/2-a.height/2;else{if(\"stretch\"===c){l=d.width/a.width;s=d.height/a.height;r=d[\"x\"]-a[\"x\"]*l;n=d[\"y\"]-a[\"y\"]*s}else{if(\"horizontal-stretch\"===c){l=d.width/a.width;r=d[\"x\"]-a[\"x\"]*l}else{if(\"vertical-stretch\"===c){s=d.height/a.height;n=d[\"y\"]-a[\"y\"]*s}else{if(\"fit\"===c){let e=Math.min(d.width/a.width,d.height/a.height);l=e;s=e;r=d[\"x\"]-a[\"x\"]+d.width/2-a.width/2;n=d[\"y\"]-a[\"y\"]+d.height/2-a.height/2;h=a[\"x\"]+a.width/2;o=a[\"y\"]+a.height/2}else{if(\"horizontal-fit\"===c){l=d.width/a.width;s=l;r=d[\"x\"]-a[\"x\"];h=a[\"x\"];o=a[\"y\"]}else{s=d.height/a.height;l=s;n=d[\"y\"]-a[\"y\"];h=a[\"x\"];o=a[\"y\"]}}}}}}}}}}}}}}}}let g=e.multiply(i);g.translateSelf(r,n);g.scaleSelf(l,s,1,h,o);g.multiplySelf(t);m.setAttribute(\"transform\",g.toString())}else{if(!0===t){let e=i.map(e=>(0,common_1.Yi)(e));let t=(0,common_1.ci)(e);let n=0;let l=0;let s=1;let h=1;let o=0;let g=0;if(\"move-left-inside\"===c)n=d[\"x\"]-t[\"x\"];else{if(\"move-left-outside\"===c)n=d[\"x\"]-t[\"x\"]-t.width;else{if(\"move-right-inside\"===c)n=d[\"x\"]+d.width-t[\"x\"]-t.width;else{if(\"move-right-outside\"===c)n=d[\"x\"]+d.width-t[\"x\"];else{if(\"move-top-inside\"===c)l=d[\"y\"]-t[\"y\"];else{if(\"move-top-outside\"===c)l=d[\"y\"]-t[\"y\"]-t.height;else{if(\"move-bottom-inside\"===c)l=d[\"y\"]+d.height-t[\"y\"]-t.height;else{if(\"move-bottom-outside\"===c)l=d[\"y\"]+d.height-t[\"y\"];else{if(\"center\"===c){n=d[\"x\"]-t[\"x\"]+d.width/2-t.width/2;l=d[\"y\"]-t[\"y\"]+d.height/2-t.height/2}else{if(\"horizontal-center\"===c)n=d[\"x\"]-t[\"x\"]+d.width/2-t.width/2;else{if(\"vertical-center\"===c)l=d[\"y\"]-t[\"y\"]+d.height/2-t.height/2;else{if(\"stretch\"===c){s=d.width/t.width;h=d.height/t.height;n=d[\"x\"]-t[\"x\"]*s;l=d[\"y\"]-t[\"y\"]*h}else{if(\"horizontal-stretch\"===c){s=d.width/t.width;n=d[\"x\"]-t[\"x\"]*s}else{if(\"vertical-stretch\"===c){h=d.height/t.height;l=d[\"y\"]-t[\"y\"]*h}else{if(\"fit\"===c){let e=Math.min(d.width/t.width,d.height/t.height);s=e;h=e;n=d[\"x\"]-t[\"x\"]+d.width/2-t.width/2;l=d[\"y\"]-t[\"y\"]+d.height/2-t.height/2;o=t[\"x\"]+t.width/2;g=t[\"y\"]+t.height/2}else{if(\"horizontal-fit\"===c){s=d.width/t.width;h=s;n=d[\"x\"]-t[\"x\"];o=t[\"x\"];g=t[\"y\"]}else{h=d.height/t.height;s=h;l=d[\"y\"]-t[\"y\"];o=t[\"x\"];g=t[\"y\"]}}}}}}}}}}}}}}}}for(let r of i){let e=(0,common_1.ct)(r);let t=(0,common_1.ut)(r);let i=t.inverse();let a=e.multiply(i);a.translateSelf(n,l);a.scaleSelf(s,h,1,o,g);a.multiplySelf(t);r.setAttribute(\"transform\",a.toString())}}}},_arrangementManager_Zw=function e(){},_arrangementManager_Kw=function e(l,s){__classPrivateFieldGet(this,_arrangementManager_stage,\"f\").undoManager.checkpoint(\"#move\",null);let t=!1;let i=!1;__classPrivateFieldGet(this,_arrangementManager_stage,\"f\").viewTool.enabled?t=__classPrivateFieldGet(this,_arrangementManager_stage,\"f\").viewTool.moveCallback(l,s):__classPrivateFieldGet(this,_arrangementManager_stage,\"f\").splineTool.enabled&&(i=__classPrivateFieldGet(this,_arrangementManager_stage,\"f\").splineTool.moveCallback(l,s));if(!1===t&&!1===i){for(let n of Array.from(__classPrivateFieldGet(this,_arrangementManager_stage,\"f\").selectedElements.keys()))if(\"bx-guide\"===n.localName){}else{let e=(0,common_1.ct)(n);let t=(0,common_1.pt)(n,__classPrivateFieldGet(this,_arrangementManager_stage,\"f\").currentWorkspace);let i=t.inverse();let a=new DOMMatrix;a.translateSelf(l,s);let r=DOMMatrix.fromMatrix(e);r.multiplySelf(i);r.multiplySelf(a);r.multiplySelf(t);n.setAttribute(\"transform\",r.toString())}}};exports[\"default\"]=arrangementManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/arrangementManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/clipboardManager.js":
/*!*********************************************************!*\
  !*** ./node_modules/foxyjs/support/clipboardManager.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __awaiter=this&&this.__awaiter||function(e,s,i,r){function n(t){return t instanceof i?t:new i(function(e){e(t)})}return new(i||(i=Promise))(function(t,i){function a(e){try{o(r.next(e))}catch(e){i(e)}}function l(e){try{o(r[\"throw\"](e))}catch(e){i(e)}}function o(e){e.done?t(e.value):n(e.value).then(a,l)}o((r=r.apply(e,s||[])).next())})};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,i,a,l){if(a===\"m\")throw new TypeError(\"Private method is not writable\");if(a===\"a\"&&!l)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!l:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return a===\"a\"?l.call(e,i):l?l.value=i:t.set(e,i),i};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,i,a){if(i===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return i===\"m\"?a:i===\"a\"?a.call(e):a?a.value:t.get(e)};var _Clipboard_stage;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class Clipboard{constructor(e){_Clipboard_stage.set(this,void 0);this.cut=()=>{if(__classPrivateFieldGet(this,_Clipboard_stage,\"f\").textInputMode)document.execCommand(\"cut\");else{__classPrivateFieldGet(this,_Clipboard_stage,\"f\").undoManager.checkpoint(\"#cut\",null);this.copy();let t=(0,common_1.os)(Array.from(__classPrivateFieldGet(this,_Clipboard_stage,\"f\").selectedElements.keys()));t[\"reverse\"]();__classPrivateFieldGet(this,_Clipboard_stage,\"f\").selectedElements.clear();for(let e of t)e[\"remove\"]()}};this.copy=()=>__awaiter(this,void 0,void 0,function*(){if(__classPrivateFieldGet(this,_Clipboard_stage,\"f\").textInputMode)document.execCommand(\"copy\");else{let e=__classPrivateFieldGet(this,_Clipboard_stage,\"f\").extractArtworkWithSelectedElements();let t=2;let i=(0,common_1.kc)(e,\"html\",t);let a=(0,common_1.kc)(e,\"xml\",t);let l={\"text/plain\":i,\"text/html\":i,\"image/svg+xml\":a,\"image/png\":yield(0,common_1.Ig)(a)};this.setClipboardData(l)}});this.paste=()=>__awaiter(this,void 0,void 0,function*(){if(__classPrivateFieldGet(this,_Clipboard_stage,\"f\").textInputMode)document.execCommand(\"paste\");else{const t=yield this.getClipboardData();if(t){const i=__classPrivateFieldGet(this,_Clipboard_stage,\"f\").board[\"matches\"](\":hover\")?\"pointer\":\"boardCenter\";if(t[\"text/html\"]&&(0,common_1.Pc)(t[\"text/html\"])){__classPrivateFieldGet(this,_Clipboard_stage,\"f\").undoManager.checkpoint(\"#paste\",null);let e=(0,common_1.Rl)(t[\"text/html\"]);__classPrivateFieldGet(this,_Clipboard_stage,\"f\").insertArtwork(e,i)}else{if(t[\"text/plain\"]&&(0,common_1.Pc)(t[\"text/plain\"])){__classPrivateFieldGet(this,_Clipboard_stage,\"f\").undoManager.checkpoint(\"#paste\",null);let e=(0,common_1.Rl)(t[\"text/plain\"]);__classPrivateFieldGet(this,_Clipboard_stage,\"f\").insertArtwork(e,i)}else{if(t[\"image/png\"]){__classPrivateFieldGet(this,_Clipboard_stage,\"f\").undoManager.checkpoint(\"#paste\",null);let e=t[\"image/png\"];__classPrivateFieldGet(this,_Clipboard_stage,\"f\").insertBitmap(e,i)}else{if(t[\"text/plain\"]){__classPrivateFieldGet(this,_Clipboard_stage,\"f\").undoManager.checkpoint(\"#paste\",null);let e=(0,common_1.Rl)('<svg><text style=\"font-size: 36; font-family: Roboto; white-space: pre;\">'+t[\"text/plain\"]+\"</text></svg>\");__classPrivateFieldGet(this,_Clipboard_stage,\"f\").insertArtwork(e,i)}}}}}}});this.setClipboardData=l=>{return new Promise(a=>__awaiter(this,void 0,void 0,function*(){let e={};void 0!==l[\"text/plain\"]&&(e[\"text/plain\"]=new Blob([l[\"text/plain\"]],{type:\"text/plain\"}));void 0!==l[\"image/png\"]&&(e[\"image/png\"]=l[\"image/png\"]);let t=new ClipboardItem(e);try{yield navigator.clipboard.write([t])}catch(e){console.error(e)}let i={};void 0!==l[\"text/plain\"]&&(i[\"text/plain\"]=l[\"text/plain\"]);void 0!==l[\"text/html\"]&&(i[\"text/html\"]=l[\"text/html\"]);void 0!==l[\"image/svg+xml\"]&&(i[\"image/svg+xml\"]=l[\"image/svg+xml\"]);a()}))};this.getClipboardData=()=>{return new Promise(t=>__awaiter(this,void 0,void 0,function*(){let l={};let e=null;try{e=yield navigator.clipboard.read()}catch(e){console.error(e)}if(e){let a=e[0];if(a){for(let i of a.types)if(\"text/plain\"===i||\"text/html\"===i||\"image/svg+xml\"===i){let e=yield a.getType(i);let t=yield(0,common_1.ql)(e,\"text\");!1===t.startsWith(\"image/\")&&(l[i]=t)}else{if(\"image/png\"===i||\"image/jpg\"===i||\"image/jpeg\"===i||\"image/webp\"===i||\"image/avif\"===i||\"image/gif\"===i){let e=yield a.getType(i);let t=yield(0,common_1.ql)(e,\"dataURL\");l[i]=t}}}}t(l)}))};if(!e)throw new Error(\"stage not found!\");__classPrivateFieldSet(this,_Clipboard_stage,e,\"f\")}}_Clipboard_stage=new WeakMap;exports[\"default\"]=Clipboard;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/clipboardManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/commands.js":
/*!*************************************************!*\
  !*** ./node_modules/foxyjs/support/commands.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,s,a,r){if(a===\"m\")throw new TypeError(\"Private method is not writable\");if(a===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return a===\"a\"?r.call(e,s):r?r.value=s:t.set(e,s),s};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,s,a){if(s===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return s===\"m\"?a:s===\"a\"?a.call(e):a?a.value:t.get(e)};var _Commands_instances,_Commands_stage,_Commands_delete;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class Commands{constructor(e){_Commands_instances.add(this);_Commands_stage.set(this,void 0);this.delete=()=>{__classPrivateFieldGet(this,_Commands_instances,\"m\",_Commands_delete).call(this)};__classPrivateFieldSet(this,_Commands_stage,e,\"f\")}}_Commands_stage=new WeakMap,_Commands_instances=new WeakSet,_Commands_delete=function e(){__classPrivateFieldGet(this,_Commands_stage,\"f\").undoManager.checkpoint(\"#delete\",null);const t=(0,common_1.os)(Array.from(__classPrivateFieldGet(this,_Commands_stage,\"f\").selectedElements.keys()));t.reverse();__classPrivateFieldGet(this,_Commands_stage,\"f\").selectedElements.clear();for(let e of t)e.remove()};exports[\"default\"]=Commands;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/commands.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/graphManager.js":
/*!*****************************************************!*\
  !*** ./node_modules/foxyjs/support/graphManager.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("Object.defineProperty(exports, \"__esModule\", ({value:true}));exports.SVGPolygon=exports.SVGPolyline=exports.SVGLine=exports.SVGSpiral=exports.SVGCross=exports.SVGCog=exports.SVGStar=exports.SVGNGon=exports.SVGTriangle=exports.SVGCrescent=exports.SVGPie=exports.SVGRing=exports.SVGEllipse=exports.SVGCircle=exports.SVGRect=exports.SVGText=exports.SVGPath=exports.SVGImage=void 0;const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class SVGImage{constructor(t){const{x:o,y:s,width:r,height:e,href:n}=t;return(0,common_1.fs)`<image\n      x=\"${o-r/2}\"\n      y=\"${s-e/2}\"\n      width=\"${r}\"\n      height=\"${e}\"\n      href=\"${n}\">\n    </image>\n  `}}exports.SVGImage=SVGImage;class SVGPath{constructor(t){const{d:o,fill:s,stroke:r,strokeWidth:e}=t;return(0,common_1.fs)`<path \n      d=\"${o}\n      fill=\"${s}\"\n      stroke=\"${r}\"\n      stroke-width=\"${e}\"></path>\n    `}}exports.SVGPath=SVGPath;class SVGText{constructor(t){const{x:o,y:s,fontSize:r,fontFamily:e,textContent:n,fill:c}=t;return(0,common_1.fs)`<text \n      x=\"${o}\" \n      y=\"${s}\" \n      font-size=\"${r}\" \n      font-family=\"${e||\"Arial\"}\" \n      fill=\"${c}\">${n||\"foxyjs\"}</text>\n    `}}exports.SVGText=SVGText;class SVGRect{constructor(t){const{x:o,y:s,width:r,height:e,rx:n,fill:c,stroke:i,strokeWidth:l}=t;return(0,common_1.fs)`<rect\n      x=\"${o-r/2}\"\n      y=\"${s-e/2}\"\n      width=\"${r}\"\n      height=\"${e}\"\n      rx=\"${n||0}\"\n      fill=\"${c}\"\n      stroke=\"${i}\"\n      stroke-width=\"${l}\">\n      </rect>\n    `}}exports.SVGRect=SVGRect;class SVGCircle{constructor(t){const{cx:o,cy:s,r,fill:e,stroke:n,strokeWidth:c}=t;return(0,common_1.fs)`<circle\n        cx=\"${o}\"\n        cy=\"${s}\"\n        r=\"${r}\"\n        fill=\"${e}\"\n        stroke=\"${n}\"\n        stroke-width=\"${c}\">\n      </circle>\n      `}}exports.SVGCircle=SVGCircle;class SVGEllipse{constructor(t){const{cx:o,cy:s,rx:r,ry:e,fill:n,stroke:c,strokeWidth:i}=t;return(0,common_1.fs)`<ellipse\n      cx=\"${o}\"\n      cy=\"${s}\"\n      rx=\"${r}\"\n      ry=\"${e}\"\n      fill=\"${n}\"\n      stroke=\"${c}\"\n      stroke-width=\"${i}\">\n    </ellipse>\n    `}}exports.SVGEllipse=SVGEllipse;class SVGRing{constructor(t){const{x:o,y:s,outerRx:r,outerRy:e,innerRx:n,innerRy:c,fill:i,stroke:l,strokeWidth:h}=t;const p=(0,common_1.fs)`<path fill=\"${i}\" stroke=\"${l}\" stroke-width=\"${h}\"></path>`;const $={type:\"ring\",values:[o,s,n,c,r,e]};(0,common_1.to)(p,$,3);return p}}exports.SVGRing=SVGRing;class SVGPie{constructor(t){const{x:o,y:s,outerRadius:r,innerRadius:e,fill:n,stroke:c,strokeWidth:i}=t;const l=(0,common_1.fs)`<path fill=\"${n}\" stroke=\"${c}\" stroke-width=\"${i}\"></path>`;const h={type:\"pie\",values:[o,s,e,r,90,360]};(0,common_1.to)(l,h,3);return l}}exports.SVGPie=SVGPie;class SVGCrescent{constructor(t){const{x:o,y:s,r,arch:e,hollow:n,fill:c,stroke:i,strokeWidth:l}=t;const h=(0,common_1.fs)`<path fill=\"${c}\" stroke=\"${i}\" stroke-width=\"${l}\"></path>`;const p={type:\"crescent\",values:[o,s,r,e||300,n||.7]};(0,common_1.to)(h,p,3);return h}}exports.SVGCrescent=SVGCrescent;class SVGTriangle{constructor(t){const{x:o,y:s,width:r,height:e,fill:n,stroke:c,strokeWidth:i,shift:l,cornerRadius:h}=t;const p=(0,common_1.fs)`<path fill=\"${n}\" stroke=\"${c}\" stroke-width=\"${i}\"></path>`;const $={type:\"triangle\",values:[o-r/2,s-e/2,r,e,l||.5,h||0]};(0,common_1.to)(p,$,3);return p}}exports.SVGTriangle=SVGTriangle;class SVGNGon{constructor(t){const{x:o,y:s,rx:r,ry:e,arms:n,fill:c,stroke:i,strokeWidth:l,cornerRadius:h}=t;const p=(0,common_1.fs)`<path fill=\"${c}\" stroke=\"${i}\" stroke-width=\"${l}\"></path>`;const $={type:\"n-gon\",values:[o,s,r,e,n||5,h||0]};(0,common_1.to)(p,$,3);return p}}exports.SVGNGon=SVGNGon;class SVGStar{constructor(t){const{x:o,y:s,rx:r,ry:e,arms:n,depth:c,fill:i,stroke:l,strokeWidth:h}=t;const p=(0,common_1.fs)`<path fill=\"${i}\" stroke=\"${l}\" stroke-width=\"${h}\"></path>`;const $={type:\"star\",values:[o,s,r,e,c||.4,n||5]};(0,common_1.to)(p,$,3);return p}}exports.SVGStar=SVGStar;class SVGCog{constructor(t){const{x:o,y:s,fill:r,stroke:e,strokeWidth:n}=t;const c=(0,common_1.fs)`<path fill=\"${r}\" stroke=\"${e}\" stroke-width=\"${n}\"></path>`;const i={type:\"cog\",values:[o,s,1/3*50,2/3*50,50,.375,8]};(0,common_1.to)(c,i,3);return c}}exports.SVGCog=SVGCog;class SVGCross{constructor(t){const{x:o,y:s,width:r,height:e,fill:n,shift:c,stroke:i,strokeWidth:l}=t;const h=(0,common_1.fs)`<path fill=\"${n}\" stroke=\"${i}\" stroke-width=\"${l}\"></path>`;const p={type:\"cross\",values:[o-r/2,s-e/2,r,e,20,20,c||.5]};(0,common_1.to)(h,p,3);return h}}exports.SVGCross=SVGCross;class SVGSpiral{constructor(t){const{x:o,y:s,r,fill:e,stroke:n,strokeWidth:c}=t;const i=(0,common_1.fs)`<path fill=\"${e}\" stroke=\"${n||\"#000000\"}\" stroke-width=\"${c||1}\"></path>`;const l={type:\"spiral\",values:[o,s,0,r,0,1080]};(0,common_1.to)(i,l,3);return i}}exports.SVGSpiral=SVGSpiral;class SVGLine{constructor(t){const{x:o,y:s,width:r,height:e,fill:n,stroke:c,strokeWidth:i}=t;return(0,common_1.fs)`<line\n      fill=\"${n}\" \n      stroke=\"${c||\"#000000\"}\"\n      stroke-width=\"${i||1}\"\n      x1=\"${o-r/2}\"\n      y1=\"${s-e/2}\"\n      x2=\"${o+r/2}\"\n      y2=\"${s+e/2}\">\n    </line>`}}exports.SVGLine=SVGLine;class SVGPolyline{constructor(t){const{x:o,y:s,width:r,height:e,fill:n,stroke:c,strokeWidth:i}=t;return(0,common_1.fs)`<polyline \n    fill=\"${n}\"\n    stroke=\"${c||\"#000000\"}\" \n    stroke-width=\"${i||1}\"\n    points=\"\n    ${o-r/2} \n    ${s-e/2} \n    ${o+r/2} \n    ${s+e/2}\">\n    </polyline>`}}exports.SVGPolyline=SVGPolyline;class SVGPolygon{constructor(t){const{x:o,y:s,width:r,height:e,fill:n,stroke:c,strokeWidth:i}=t;return(0,common_1.fs)`<polygon \n    fill=\"${n}\"\n    stroke=\"${c||\"#000000\"}\" \n    stroke-width=\"${i||1}\"\n    points=\"\n    ${o-r/2} \n    ${s-e/2} \n    ${o+r/2} \n    ${s+e/2}\">\n    </polygon>`}}exports.SVGPolygon=SVGPolygon;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/graphManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/gridManager.js":
/*!****************************************************!*\
  !*** ./node_modules/foxyjs/support/gridManager.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,i,r){if(i===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return i===\"m\"?r:i===\"a\"?r.call(e):r?r.value:t.get(e)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,i,r,a){if(r===\"m\")throw new TypeError(\"Private method is not writable\");if(r===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return r===\"a\"?a.call(e,i):a?a.value=i:t.set(e,i),i};var _gridManager_stage,_gridManager_gridHud,_gridManager_verticalLines,_gridManager_horizontalLines,_gridManager_cellRect,_gridManager_originGrippie,_gridManager_resizeGrippie,_gridManager_foxyGrid,_gridManager_maybeCreateGridForCurrentWorkspace;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class gridManager{get enabled(){return __classPrivateFieldGet(this,_gridManager_gridHud,\"f\").hasAttribute(\"enabled\")}set enabled(e){e?__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").setAttribute(\"enabled\",\"\"):__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").removeAttribute(\"enabled\")}set selected(e){e?__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").setAttribute(\"selected\",\"\"):__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").removeAttribute(\"selected\");__classPrivateFieldGet(this,_gridManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"selectedchange\"))}constructor(e){_gridManager_stage.set(this,void 0);_gridManager_gridHud.set(this,document.querySelector(\"#grid-hud\"));_gridManager_verticalLines.set(this,void 0);_gridManager_horizontalLines.set(this,void 0);_gridManager_cellRect.set(this,void 0);_gridManager_originGrippie.set(this,void 0);_gridManager_resizeGrippie.set(this,void 0);_gridManager_foxyGrid.set(this,void 0);this.enabledCallback=()=>{var e;this.enabled=true;__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").tabIndex=0;this.di();__classPrivateFieldGet(this,_gridManager_stage,\"f\").board.addEventListener(\"workspacemutation\",this.T=t=>{if(this.ci||this.pi)this.Lt();else{for(let e of t.detail){\"foxy-grid\"===e.target.localName&&this.hi()}}});__classPrivateFieldGet(this,_gridManager_stage,\"f\").board.addEventListener(\"artworkchange\",this.ui=()=>{this.di()});__classPrivateFieldGet(this,_gridManager_stage,\"f\").board.addEventListener(\"zoomchange\",this.D=()=>{this.hi();this.xi()});__classPrivateFieldGet(this,_gridManager_stage,\"f\").workspaces.addEventListener(\"pointerdown\",this.qe=()=>{this.Xe()});(e=__classPrivateFieldGet(this,_gridManager_stage,\"f\").board.querySelector(\"#huds\"))===null||e===void 0?void 0:e.addEventListener(\"pointerdown\",this[\"Dt\"]=e=>{this[\"Ke\"](e)})};this.disabledCallback=()=>{var e;this.enabled=false;__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").tabIndex=-1;__classPrivateFieldGet(this,_gridManager_stage,\"f\").board.removeEventListener(\"workspacemutation\",this.T);__classPrivateFieldGet(this,_gridManager_stage,\"f\").board.removeEventListener(\"artworkchange\",this.ui);__classPrivateFieldGet(this,_gridManager_stage,\"f\").board.removeEventListener(\"zoomchange\",this.D);__classPrivateFieldGet(this,_gridManager_stage,\"f\").workspaces.removeEventListener(\"pointerdown\",this.qe);(e=__classPrivateFieldGet(this,_gridManager_stage,\"f\").board.querySelector(\"#huds\"))===null||e===void 0?void 0:e.removeEventListener(\"pointerdown\",this[\"Dt\"]);__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").style.display=\"none\"};this.Xe=()=>{this.selected=false};this.Ke=e=>{const t=e.target;t!==__classPrivateFieldGet(this,_gridManager_gridHud,\"f\")&&!1===__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").contains(t)&&(this.selected=false)};this.L=t=>{let i;let r;let a=t[\"target\"];let e=new DOMPoint(t[\"clientX\"],t[\"clientY\"]);let s=e;this.selected=true;__classPrivateFieldGet(this,_gridManager_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_gridManager_stage,\"f\").selectedTextRange=void 0;__classPrivateFieldGet(this,_gridManager_stage,\"f\").currentContainer=void 0;a.addEventListener(\"pointermove\",i=e=>{a.removeEventListener(\"pointermove\",i);a.removeEventListener(\"pointerup\",r);if(a===__classPrivateFieldGet(this,_gridManager_originGrippie,\"f\")||a===__classPrivateFieldGet(this,_gridManager_cellRect,\"f\")){this.mi(t)}else{a===__classPrivateFieldGet(this,_gridManager_resizeGrippie,\"f\")&&this.gi(t)}});a.addEventListener(\"pointerup\",r=()=>{a.removeEventListener(\"pointermove\",i);a.removeEventListener(\"pointerup\",r)})};this.mi=e=>{__classPrivateFieldGet(this,_gridManager_stage,\"f\").undoManager.checkpoint([\"#transform\",\"#move\"],\"#transform-tool\");let t;let i;let a=__classPrivateFieldSet(this,_gridManager_foxyGrid,__classPrivateFieldGet(this,_gridManager_maybeCreateGridForCurrentWorkspace,\"f\").call(this),\"f\");let s=(0,common_1.ut)(__classPrivateFieldGet(this,_gridManager_stage,\"f\").canvas)[\"inverse\"]();let n=new DOMPoint(e[\"clientX\"],e[\"clientY\"])[\"matrixTransform\"](s);let d=Number(a.getAttribute(\"x\"));let l=Number(a.getAttribute(\"y\"));this.ci=!0;window.addEventListener(\"pointermove\",t=e=>{let t=new DOMPoint(e[\"clientX\"],e[\"clientY\"])[\"matrixTransform\"](s);let i=d+(t[\"x\"]-n[\"x\"]);let r=l+(t[\"y\"]-n[\"y\"]);a.setAttribute(\"x\",i.toString());a.setAttribute(\"y\",r.toString())});window.addEventListener(\"pointerup\",i=()=>{window.removeEventListener(\"pointermove\",t);window.removeEventListener(\"pointerup\",i);this.ci=!1})};this.gi=e=>{__classPrivateFieldGet(this,_gridManager_stage,\"f\").undoManager.checkpoint([\"transform\",\"resize\"],\"#transform-tool\");let t;let i;let a=__classPrivateFieldSet(this,_gridManager_foxyGrid,__classPrivateFieldGet(this,_gridManager_maybeCreateGridForCurrentWorkspace,\"f\").call(this),\"f\");let s=(0,common_1.ut)(__classPrivateFieldGet(this,_gridManager_stage,\"f\").canvas)[\"inverse\"]();let n=new DOMPoint(e[\"clientX\"],e[\"clientY\"])[\"matrixTransform\"](s);let d=a?Number(a.getAttribute(\"width\")):100;let l=a?Number(a.getAttribute(\"height\")):100;const r=__classPrivateFieldGet(this,_gridManager_stage,\"f\").scale;let _=8/r;this.pi=!0;window.addEventListener(\"pointermove\",t=e=>{let t=new DOMPoint(e[\"clientX\"],e[\"clientY\"])[\"matrixTransform\"](s);let i=d+(t[\"x\"]-n[\"x\"]);let r=l+(t[\"y\"]-n[\"y\"]);i<_&&(i=_);r<_&&(r=_);e.shiftKey&&(r=i);a.setAttribute(\"width\",i.toString());a.setAttribute(\"height\",r.toString())});window.addEventListener(\"pointerup\",i=()=>{window.removeEventListener(\"pointermove\",t);window.removeEventListener(\"pointerup\",i);this.pi=!1})};this.Lt=()=>{let e=__classPrivateFieldGet(this,_gridManager_foxyGrid,\"f\");let t=(0,common_1.ut)(__classPrivateFieldGet(this,_gridManager_stage,\"f\").canvas)[\"inverse\"]();let i=(0,common_1.di)(__classPrivateFieldGet(this,_gridManager_stage,\"f\").board.getBoundingClientRect(),t);let r=e?Number(e.getAttribute(\"x\")):0;let a=e?Number(e.getAttribute(\"y\")):0;let s=e?Number(e.getAttribute(\"width\")):100;let n=e?Number(e.getAttribute(\"height\")):100;let d=i[\"x\"]-i[\"width\"]/2;let l=i[\"x\"]+i[\"width\"]+i[\"width\"]/2;let _=i[\"y\"]-i[\"height\"]/2;let g=i[\"y\"]+i[\"height\"]+i[\"height\"]/2;let o=\"\";for(let e=r;e<=l;e+=s)e>=d&&(o+='<line class=\"line\" x1=\"'+e+'\" y1=\"-99999\" x2=\"'+e+'\" y2=\"99999\"></line>');for(let e=r-s;e>=d;e-=s)e<=l&&(o+='<line class=\"line\" x1=\"'+e+'\" y1=\"-99999\" x2=\"'+e+'\" y2=\"99999\"></line>');__classPrivateFieldGet(this,_gridManager_verticalLines,\"f\")[\"innerHTML\"]=o;let c=\"\";for(let e=a;e<=g;e+=n)e>=_&&(c+='<line class=\"line\" y1=\"'+e+'\" x1=\"-99999\" y2=\"'+e+'\" x2=\"99999\"></line>');for(let e=a-n;e>=_;e-=n)e<=g&&(c+='<line class=\"line\" y1=\"'+e+'\" x1=\"-99999\" y2=\"'+e+'\" x2=\"99999\"></line>');__classPrivateFieldGet(this,_gridManager_horizontalLines,\"f\")[\"innerHTML\"]=c;__classPrivateFieldGet(this,_gridManager_cellRect,\"f\").setAttribute(\"x\",r.toString());__classPrivateFieldGet(this,_gridManager_cellRect,\"f\").setAttribute(\"y\",a.toString());__classPrivateFieldGet(this,_gridManager_cellRect,\"f\").setAttribute(\"width\",s.toString());__classPrivateFieldGet(this,_gridManager_cellRect,\"f\").setAttribute(\"height\",n.toString());this.xi()};this.xi=()=>{const e=__classPrivateFieldGet(this,_gridManager_foxyGrid,\"f\");const t=e?Number(e.getAttribute(\"x\")):0;const i=e?Number(e.getAttribute(\"y\")):0;const r=e?Number(e.getAttribute(\"width\")):100;const a=e?Number(e.getAttribute(\"height\")):100;const s=__classPrivateFieldGet(this,_gridManager_stage,\"f\").scale;__classPrivateFieldGet(this,_gridManager_originGrippie,\"f\").setAttribute(\"cx\",t.toString());__classPrivateFieldGet(this,_gridManager_originGrippie,\"f\").setAttribute(\"cy\",i.toString());__classPrivateFieldGet(this,_gridManager_originGrippie,\"f\").setAttribute(\"r\",(4/s).toString());__classPrivateFieldGet(this,_gridManager_resizeGrippie,\"f\").setAttribute(\"width\",(8/s).toString());__classPrivateFieldGet(this,_gridManager_resizeGrippie,\"f\").setAttribute(\"height\",(8/s).toString());__classPrivateFieldGet(this,_gridManager_resizeGrippie,\"f\").setAttribute(\"x\",(t+r-5/s).toString());__classPrivateFieldGet(this,_gridManager_resizeGrippie,\"f\").setAttribute(\"y\",(i+a-5/s).toString())};this.requestImmidiateUpdate=()=>{this.Lt()};_gridManager_maybeCreateGridForCurrentWorkspace.set(this,()=>{let e=__classPrivateFieldGet(this,_gridManager_stage,\"f\").workspaces.querySelector(\"defs\");if(!e){e=(0,common_1.fs)`<defs></defs>`;__classPrivateFieldGet(this,_gridManager_stage,\"f\").workspaces.append(e)}let t=e.querySelector(\"foxy-grid\");if(!t){t=(0,common_1.fs)`<foxy-grid x=\"0\" y=\"0\" width=\"100\" height=\"100\"></foxy-grid>`;e.append(t)}return t});__classPrivateFieldSet(this,_gridManager_stage,e,\"f\");__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").tabIndex=-1;this.hi=this.Lt;this.di=this.Lt;this.ci=!1;this.pi=!1;const{color:t}=__classPrivateFieldGet(this,_gridManager_stage,\"f\").config.grid;__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").innerHTML=`<style>\n        #grid-hud .line {\n            fill: none;\n            stroke: ${t};\n            stroke-width: 1px;\n            stroke-opacity: 0.2;\n            vector-effect: non-scaling-stroke;\n            pointer-events: none;\n        }\n    \n        #grid-hud .grippie {\n            stroke: ${t};\n            stroke-width: 1px;\n            fill: white;\n            pointer-events: all;\n            vector-effect: non-scaling-stroke;\n        }\n\n        #grid-hud[selected] .grippie {\n            fill: ${t};\n        }\n    \n        #grid-hud [uid=\"cell-rect\"] {\n            display: none;\n            fill: ${t};\n            fill-opacity: 0.05;\n            stroke: ${t};\n            stroke-width: 1px;\n            stroke-opacity: 1;\n            vector-effect: non-scaling-stroke;\n        }\n\n        #grid-hud[selected] [uid=\"cell-rect\"] {\n            display: initial;\n        }\n\n        </style>\n      \n        <g uid=\"main\">\n          <g uid=\"lines\">\n            <g uid=\"horizontal-lines\" class=\"lines\"></g>\n            <g uid=\"vertical-lines\" class=\"lines\"></g>\n          </g>\n      \n          <rect uid=\"cell-rect\"></rect>\n      \n          <g uid=\"grippies\">\n            <circle uid=\"origin-grippie\" class=\"grippie\" r=\"10\" cx=\"0\" cy=\"0\"></circle>\n            <rect uid=\"resize-grippie\" class=\"grippie\" width=\"10\" height=\"10\" x=\"0\" y=\"0\"></rect>\n          </g>\n        </g>\n      `;__classPrivateFieldSet(this,_gridManager_verticalLines,__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").querySelector('[uid=\"vertical-lines\"]'),\"f\");__classPrivateFieldSet(this,_gridManager_horizontalLines,__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").querySelector('[uid=\"horizontal-lines\"]'),\"f\");__classPrivateFieldSet(this,_gridManager_cellRect,__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").querySelector('[uid=\"cell-rect\"]'),\"f\");__classPrivateFieldSet(this,_gridManager_originGrippie,__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").querySelector('[uid=\"origin-grippie\"]'),\"f\");__classPrivateFieldSet(this,_gridManager_resizeGrippie,__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").querySelector('[uid=\"resize-grippie\"]'),\"f\");__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").addEventListener(\"pointerdown\",e=>this.L(e));__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").addEventListener(\"focus\",()=>this.Lt());__classPrivateFieldGet(this,_gridManager_gridHud,\"f\").addEventListener(\"blur\",()=>this.Lt())}}_gridManager_stage=new WeakMap,_gridManager_gridHud=new WeakMap,_gridManager_verticalLines=new WeakMap,_gridManager_horizontalLines=new WeakMap,_gridManager_cellRect=new WeakMap,_gridManager_originGrippie=new WeakMap,_gridManager_resizeGrippie=new WeakMap,_gridManager_foxyGrid=new WeakMap,_gridManager_maybeCreateGridForCurrentWorkspace=new WeakMap;exports[\"default\"]=gridManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/gridManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/groupManager.js":
/*!*****************************************************!*\
  !*** ./node_modules/foxyjs/support/groupManager.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,r,a,s){if(a===\"m\")throw new TypeError(\"Private method is not writable\");if(a===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return a===\"a\"?s.call(e,r):s?s.value=r:t.set(e,r),r};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,r,a){if(r===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return r===\"m\"?a:r===\"a\"?a.call(e):a?a.value:t.get(e)};var _GroupManager_stage;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class GroupManager{constructor(e){_GroupManager_stage.set(this,void 0);this.group=()=>{__classPrivateFieldGet(this,_GroupManager_stage,\"f\").undoManager.checkpoint(\"#group--verb\",null);let r=document.createDocumentFragment();let e=[...Array.from(__classPrivateFieldGet(this,_GroupManager_stage,\"f\").selectedElements.keys())];let a=(0,common_1.Zi)(\"svg:g\");e[0].after(a);e=(0,common_1.os)(e);for(let t of e){let e=(0,common_1.pt)(t,a);t.setAttribute(\"transform\",e.toString());r.append(t)}a.append(r);__classPrivateFieldGet(this,_GroupManager_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_GroupManager_stage,\"f\").selectedElements.set(a)};this.unGroup=()=>{__classPrivateFieldGet(this,_GroupManager_stage,\"f\").undoManager.checkpoint(\"#ungroup\",null);let e=[...Array.from(__classPrivateFieldGet(this,_GroupManager_stage,\"f\").selectedObjectElements.keys())];let s=[];for(let t of e)if(\"g\"===t.localName){let a=t;let e=document.createDocumentFragment();for(let r of[...a.children])if(\"bx-title\"!==r.localName&&\"desc\"!==r.localName){if(__classPrivateFieldGet(this,_GroupManager_stage,\"f\").isSelectableElement(r)){let e=(0,common_1.pt)(r,a.parentElement);r.setAttribute(\"transform\",e.toString());s.push(r)}for(let t of a.style){let e=a.style.getPropertyValue(t);\"\"===r.style.getPropertyValue(t)&&r.style.setProperty(t,e)}e.append(r)}a.before(e);a.remove()}else s.push(t);__classPrivateFieldGet(this,_GroupManager_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_GroupManager_stage,\"f\").selectedElements.sets(s)};__classPrivateFieldSet(this,_GroupManager_stage,e,\"f\")}}_GroupManager_stage=new WeakMap;exports[\"default\"]=GroupManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/groupManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/hoverManager.js":
/*!*****************************************************!*\
  !*** ./node_modules/foxyjs/support/hoverManager.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,r,a){if(r===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return r===\"m\"?a:r===\"a\"?a.call(e):a?a.value:t.get(e)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,r,a,s){if(a===\"m\")throw new TypeError(\"Private method is not writable\");if(a===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return a===\"a\"?s.call(e,r):s?s.value=r:t.set(e,r),r};var _HoverManager_stage,_HoverManager_outlineHud,_HoverManager_outline;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class HoverManager{get enabled(){return __classPrivateFieldGet(this,_HoverManager_outlineHud,\"f\").hasAttribute(\"enabled\")}set enabled(e){e?__classPrivateFieldGet(this,_HoverManager_outlineHud,\"f\").setAttribute(\"enabled\",\"\"):__classPrivateFieldGet(this,_HoverManager_outlineHud,\"f\").removeAttribute(\"enabled\")}constructor(e){_HoverManager_stage.set(this,void 0);_HoverManager_outlineHud.set(this,document.querySelector(\"#outline-hud\"));_HoverManager_outline.set(this,void 0);this.enabledCallback=()=>{this.enabled=true;__classPrivateFieldGet(this,_HoverManager_stage,\"f\").board.addEventListener(\"modkeyschange\",this.Nt=()=>{this.bs()});__classPrivateFieldGet(this,_HoverManager_stage,\"f\").board.addEventListener(\"workspacemutation\",this.T=()=>{this.bs()});__classPrivateFieldGet(this,_HoverManager_stage,\"f\").board.addEventListener(\"currentcontainerchange\",this.vs=()=>{this.bs()});__classPrivateFieldGet(this,_HoverManager_stage,\"f\").board.addEventListener(\"selectedelementschange\",this.C=()=>{this.S()});__classPrivateFieldGet(this,_HoverManager_stage,\"f\").currentWorkspace.addEventListener(\"pointerover\",this.ys=e=>{this.ks(e)});__classPrivateFieldGet(this,_HoverManager_stage,\"f\").currentWorkspace.addEventListener(\"pointerout\",this.Cs=()=>{this.Ss()});this.Lt()};this.disabledCallback=()=>{this.enabled=false;__classPrivateFieldGet(this,_HoverManager_outline,\"f\").removeAttribute(\"d\");__classPrivateFieldGet(this,_HoverManager_stage,\"f\").board.removeEventListener(\"modkeyschange\",this.Nt);__classPrivateFieldGet(this,_HoverManager_stage,\"f\").board.removeEventListener(\"workspacemutation\",this.T);__classPrivateFieldGet(this,_HoverManager_stage,\"f\").board.removeEventListener(\"currentcontainerchange\",this.vs);__classPrivateFieldGet(this,_HoverManager_stage,\"f\").board.removeEventListener(\"selectedelementschange\",this.C);__classPrivateFieldGet(this,_HoverManager_stage,\"f\").currentWorkspace.removeEventListener(\"pointerover\",this.ys);__classPrivateFieldGet(this,_HoverManager_stage,\"f\").currentWorkspace.removeEventListener(\"pointerout\",this.Cs)};this.S=()=>{this.Lt()};this.ks=e=>{this.fs=e.target;this.bs()};this.Ss=()=>{this.fs=null;this.Tt()};this.Lt=r=>{if(!r)r=this.Ms();if(r){const a=r.localName;let t=null;let e=null;if(\"path\"===a){t=r.getAttribute(\"d\")}else{if(\"rect\"!==a&&\"circle\"!==a&&\"line\"!==a&&\"polyline\"!==a&&\"polygon\"!==a&&\"text\"!==a&&\"image\"!==a&&\"g\"!==a){t=(0,common_1.Ne)(r.getPathData())}}if(null===t){let e=(0,common_1.Wi)(r);t=\" M\"+e[\"x\"]+\" \"+e[\"y\"]+\" L\"+(e[\"x\"]+e[\"width\"])+\" \"+e[\"y\"]+\" L\"+(e[\"x\"]+e[\"width\"])+\" \"+(e[\"y\"]+e[\"height\"])+\" L\"+e[\"x\"]+\" \"+(e[\"y\"]+e[\"height\"])+\" L\"+e[\"x\"]+\" \"+e[\"y\"]+\" \"}null===e&&(e=(0,common_1.pt)(r,__classPrivateFieldGet(this,_HoverManager_outlineHud,\"f\")).toString());t?__classPrivateFieldGet(this,_HoverManager_outline,\"f\").setAttribute(\"d\",t):__classPrivateFieldGet(this,_HoverManager_outline,\"f\").removeAttribute(\"d\");e?__classPrivateFieldGet(this,_HoverManager_outline,\"f\").setAttribute(\"transform\",e):__classPrivateFieldGet(this,_HoverManager_outline,\"f\").removeAttribute(\"transform\")}else __classPrivateFieldGet(this,_HoverManager_outline,\"f\").removeAttribute(\"d\")};this.Ms=()=>{const e=__classPrivateFieldGet(this,_HoverManager_stage,\"f\").ctrlKey;const t=__classPrivateFieldGet(this,_HoverManager_stage,\"f\").shiftKey;const a=__classPrivateFieldGet(this,_HoverManager_stage,\"f\").currentContainer;const s=this.fs;let r=null;let i=null;let n=\"transform\";\"transform\"===n?e||t?!e&&t?r=\"normal-multi\":e&&!t?r=\"direct\":e&&t&&(r=\"direct-multi\"):r=\"normal\":\"edit\"===n?r=\"direct\":\"edit-text\"===n&&(r=\"direct-text\");if(s&&window.getComputedStyle(s).pointerEvents!==\"none\"){const o=this.Ps(s);const l=__classPrivateFieldGet(this,_HoverManager_stage,\"f\").selectedElements.has(s);let t=l;for(let e of o)__classPrivateFieldGet(this,_HoverManager_stage,\"f\").selectedElements.has(e)&&(t=!0);if(\"normal\"===r){if(!1===t){if(0===o.length)i=s;else{let t=a;let r=s;if(t===null||t===void 0?void 0:t.contains(r)){for(;r.parentNode!==t;)r=r.parentNode}else{let e=this.Ds(r,t);for(;r.parentNode!==e&&r.parentNode!==__classPrivateFieldGet(this,_HoverManager_stage,\"f\").currentWorkspace;)r=r.parentNode}i=r}}}else{if(\"normal-multi\"===r){if(0===o.length)i=s;else{let t=s;if(a===null||a===void 0?void 0:a.contains(t)){for(;t.parentNode!==a;)t=t.parentNode}else{let e=this.Ds(t,a);for(;t.parentNode!==e&&t.parentNode!==__classPrivateFieldGet(this,_HoverManager_stage,\"f\").currentWorkspace;)t=t.parentNode}i=t}}else\"direct\"===r?!1===l&&(i=s):\"direct-multi\"===r?i=s:\"direct-text\"===r&&!1===l&&s.closest(\"text\")&&(i=s.closest(\"text\"))}}return i};this.Ps=e=>{let t=[];if(e!==__classPrivateFieldGet(this,_HoverManager_stage,\"f\").currentWorkspace){for(;e.parentElement&&e.parentElement!==__classPrivateFieldGet(this,_HoverManager_stage,\"f\").currentWorkspace;)e=e.parentElement;[\"g\",\"a\"].includes(e.localName)&&t.unshift(e)}return t};this.Ds=(e,t)=>{let r=(0,common_1.ns)(e,t);if(r){for(;!1===[\"g\",\"a\"].includes(r.localName);)r=r.parentNode}return r};__classPrivateFieldSet(this,_HoverManager_stage,e,\"f\");this.bs=this.Lt;this.Tt=this.Lt;__classPrivateFieldGet(this,_HoverManager_outlineHud,\"f\").innerHTML=`<style>\n      #outline-hud [uid=\"outline\"] {\n        fill: none;\n        stroke: rgb(245, 92, 54);\n        stroke-width: 2;\n        pointer-events: none;\n        vector-effect: non-scaling-stroke;\n      }\n    </style>\n    <path uid=\"outline\"></path>`;__classPrivateFieldSet(this,_HoverManager_outline,__classPrivateFieldGet(this,_HoverManager_outlineHud,\"f\").querySelector(\"[uid='outline']\"),\"f\")}}_HoverManager_stage=new WeakMap,_HoverManager_outlineHud=new WeakMap,_HoverManager_outline=new WeakMap;exports[\"default\"]=HoverManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/hoverManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/layout.js":
/*!***********************************************!*\
  !*** ./node_modules/foxyjs/support/layout.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("Object.defineProperty(exports, \"__esModule\", ({value:true}));const layout=e=>{const{a:d,d:i,e:t,f:g}=e;return`<g uid=\"canvas\" transform=\"matrix(${d},0,0,${i},${t},${g})\">\n    <style>\n    \n    #background-outlines rect{\n        fill: white;\n        stroke: rgb(0 0 0 / 20%);\n        vector-effect: non-scaling-stroke;\n    }\n\n    #workspaces > #whitespace{\n        opacity: 0;\n    }\n    \n    [uid=\"foxy-workspace\"] > [disabled]{\n        opacity:0.24 !important;\n    }\n\n    #huds > *{\n        display: none;\n    }\n\n    #huds > [enabled], #huds > [drawing] {\n        display: initial;\n    }\n\n    </style>\n    <g id=\"background-outlines\">\n        <rect style=\"pointer-events: none;\" x=\"0\" y=\"0\" width=\"500\" height=\"500\" />\n    </g>\n    <g id=\"workspaces\">\n        <rect id=\"whitespace\" x=\"-1000000\" y=\"-1000000\" width=\"2000000\" height=\"2000000\"></rect>  \n        <g uid=\"foxy-workspace\" xmlns=\"http://www.w3.org/2000/svg\"  viewBox=\"0 0 500 500\">\n            <defs></defs>\n        </g>\n    </g>\n\n    <g id=\"huds\">\n        <g id=\"outline-hud\"></g>\n        <g id=\"manual-guides-hud\"></g>\n        <g id=\"smart-guides-hud\"></g>\n        <g id=\"grid-hud\"></g>\n        <g id=\"spline-hud\"></g>\n        <g id=\"cubic-bezier-seg-hud\"></g>\n        <g id=\"text-hud\"></g>\n        <g id=\"freehand-hud\"></g>\n        <g id=\"view-hud\"></g>\n        <g id=\"rubber-band-hud\"></g>\n        <g id=\"transform-hud\"></g>\n    </g>\n</g>`};exports[\"default\"]=layout;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/layout.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/manualManager.js":
/*!******************************************************!*\
  !*** ./node_modules/foxyjs/support/manualManager.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,a,r){if(a===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return a===\"m\"?r:a===\"a\"?r.call(e):r?r.value:t.get(e)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,a,r,i){if(r===\"m\")throw new TypeError(\"Private method is not writable\");if(r===\"a\"&&!i)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!i:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return r===\"a\"?i.call(e,a):i?i.value=a:t.set(e,a),a};var _ManualManager_stage,_ManualManager_manualGuidesHud,_ManualManager_reprs;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");const Zh=Symbol();const Kh=4;const Qh=!1;class ManualManager{get enabled(){return __classPrivateFieldGet(this,_ManualManager_manualGuidesHud,\"f\").hasAttribute(\"enabled\")}set enabled(e){e?__classPrivateFieldGet(this,_ManualManager_manualGuidesHud,\"f\").setAttribute(\"enabled\",\"\"):__classPrivateFieldGet(this,_ManualManager_manualGuidesHud,\"f\").removeAttribute(\"enabled\")}constructor(e){_ManualManager_stage.set(this,void 0);_ManualManager_manualGuidesHud.set(this,document.querySelector(\"#manual-guides-hud\"));_ManualManager_reprs.set(this,void 0);this.fi=[];this.enabledCallback=()=>{this.enabled=true;__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board.addEventListener(\"workspacemutation\",this.T=()=>{this.hi()});__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board.addEventListener(\"artworkchange\",this.ui=()=>{this.hi()});__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board.addEventListener(\"zoomchange\",this.D=()=>{this.B()});__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board.addEventListener(\"selectedelementschange\",this.C=()=>{this.yi()});__classPrivateFieldGet(this,_ManualManager_stage,\"f\").rulerManager.rulers.addEventListener(\"pointerdown\",this.ki=e=>{this.Ci(e)});__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board.addEventListener(\"snapperschange\",this.Si=()=>{this.wi()});this.Lt()};this.disabledCallback=()=>{this.enabled=false;__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board.removeEventListener(\"workspacemutation\",this.T);__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board.removeEventListener(\"artworkchange\",this.ui);__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board.removeEventListener(\"zoomchange\",this.D);__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board.removeEventListener(\"selectedelementschange\",this.C);__classPrivateFieldGet(this,_ManualManager_stage,\"f\").rulerManager.rulers.removeEventListener(\"pointerdown\",this.ki);__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board.removeEventListener(\"snapperschange\",this.Si)};this.requestImmidiateUpdate=()=>{this.Lt()};this.L=n=>{const{buttons:e}=n;const t=n.target;if(e>1)return;let l;let o;let _=t[\"closest\"](\"g.repr\");let u=_[Zh];let d=(0,common_1.ut)(__classPrivateFieldGet(this,_ManualManager_stage,\"f\").canvas)[\"inverse\"]();let c=new DOMPoint(n[\"clientX\"],n[\"clientY\"]);let g=c[\"matrixTransform\"](d);let h=c;let M=__classPrivateFieldGet(this,_ManualManager_stage,\"f\").ctrlKey&&Qh?\"rotate\":\"translate\";let v=3;this[\"bi\"]=!0;_[\"setAttribute\"](\"data-dragging\",\"\");if(t[\"closest\"](\".grippie\")){__classPrivateFieldGet(this,_ManualManager_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_ManualManager_stage,\"f\").selectedElements.set(u);__classPrivateFieldGet(this,_ManualManager_stage,\"f\").selectedTextRange=void 0;__classPrivateFieldGet(this,_ManualManager_stage,\"f\").currentContainer=void 0}let m=parseFloat(u[\"getAttribute\"](\"x\"));let f=parseFloat(u[\"getAttribute\"](\"y\"));let p=parseFloat(u[\"getAttribute\"](\"angle\"));let b=m;let P=f;let F=p;window.addEventListener(\"pointermove\",l=e=>{let t=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);let a=t[\"matrixTransform\"](d);let r=e[\"timeStamp\"]-n[\"timeStamp\"];let i=(0,common_1.Kt)(c,t)>3||r>80;let s=!1===(0,common_1.qt)(h,t,null);if(h=t,!0===i&&!0===s){if(\"translate\"===M){let e=a[\"x\"]-g[\"x\"];let t=a[\"y\"]-g[\"y\"];b=m+e;P=f+t;_[\"setAttribute\"](\"transform\",\"translate(\"+b+\" \"+P+\") rotate(\"+p+\")\")}else{if(\"rotate\"===M){let e=new DOMPoint(m,f);let t=(0,common_1.ni)(e,g,a);F=p+t;__classPrivateFieldGet(this,_ManualManager_stage,\"f\").shiftKey&&(F=(0,common_1.ai)(F,15));_[\"setAttribute\"](\"transform\",\"translate(\"+m+\" \"+f+\") rotate(\"+F+\")\")}}}});window.addEventListener(\"pointerup\",o=e=>{window.removeEventListener(\"pointermove\",l);window.removeEventListener(\"pointerup\",o);this[\"bi\"]=!1;_[\"removeAttribute\"](\"data-dragging\");let t=_[\"querySelector\"](\".inner-line\");let a=(0,common_1.ut)(t);let r=new DOMPoint(t[\"x1\"][\"baseVal\"][\"value\"],t[\"y1\"][\"baseVal\"][\"value\"]);r=r[\"matrixTransform\"](a);let i=new DOMPoint(t[\"x2\"][\"baseVal\"][\"value\"],t[\"y2\"][\"baseVal\"][\"value\"]);i=i[\"matrixTransform\"](a);let s=__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board.getBoundingClientRect();let n=(0,common_1.fi)(r,i,s);r=(0,common_1.Xt)(r,8);i=(0,common_1.Xt)(i,8);if(n&&this.isPointOverBoard(e[\"clientX\"],e[\"clientY\"])){b=(0,common_1.te)(b,v);P=(0,common_1.te)(P,v);F=(0,common_1.te)(F,v);b===m&&P===f&&F===p||__classPrivateFieldGet(this,_ManualManager_stage,\"f\").undoManager.checkpoint([\"#transform\",\"#move\"],\"#transform-tool\");u[\"setAttribute\"](\"x\",b);u[\"setAttribute\"](\"y\",P);u[\"setAttribute\"](\"angle\",F)}else{__classPrivateFieldGet(this,_ManualManager_stage,\"f\").commands.delete()}})};this.Ci=e=>{var t;if(e[\"buttons\"]>1)return;let u;let d;const c=__classPrivateFieldGet(this,_ManualManager_stage,\"f\").board;const a=__classPrivateFieldGet(this,_ManualManager_stage,\"f\").rulerManager.getRulerTypeFromPoint(e[\"x\"],e[\"y\"]);const g=(0,common_1.ut)(__classPrivateFieldGet(this,_ManualManager_stage,\"f\").canvas)[\"inverse\"]();let h=0;let r=99999;let M=-r;let v=-r;\"vertical\"===a?h=0:\"horizontal\"===a?h=90:\"corner\"===a&&(h=45);let m=(0,common_1.fs)`\n          <g class=\"repr\" transform=\"translate(${M}, ${v}) rotate(${h})\" data-selected>\n            <line class=\"outer-line\" x1=\"0\" y1=\"${-r}\" x2=\"0\" y2=\"${r}\"></line>\n            <line class=\"inner-line\" x1=\"0\" y1=\"${-r}\" x2=\"0\" y2=\"${r}\"></line>\n            <circle class=\"grippie\" cx=\"0\" cy=\"0\" r=\"${Kh/((t=__classPrivateFieldGet(this,_ManualManager_stage,\"f\").canvas)===null||t===void 0?void 0:t.getMatrix().a)}\"></rect>\n          </g>\n        `;__classPrivateFieldGet(this,_ManualManager_reprs,\"f\").append(m);window.addEventListener(\"pointermove\",u=e=>{let t=new DOMPoint(e[\"clientX\"],e[\"clientY\"])[\"matrixTransform\"](g);M=t[\"x\"];v=t[\"y\"];m[\"setAttribute\"](\"transform\",\"translate(\"+M+\" \"+v+\") rotate(\"+h+\")\")});window.addEventListener(\"pointerup\",d=e=>{var t;window.removeEventListener(\"pointermove\",u);window.removeEventListener(\"pointerup\",d);let a=m[\"querySelector\"](\".inner-line\");let r=(0,common_1.ut)(a);let i=new DOMPoint(a[\"x1\"][\"baseVal\"][\"value\"],a[\"y1\"][\"baseVal\"][\"value\"]);i=i[\"matrixTransform\"](r);i=(0,common_1.Xt)(i,8);let s=new DOMPoint(a[\"x2\"][\"baseVal\"][\"value\"],a[\"y2\"][\"baseVal\"][\"value\"]);s=s[\"matrixTransform\"](r);s=(0,common_1.Xt)(s,8);let n=c.getBoundingClientRect();let l=(0,common_1.fi)(i,s,n);m.remove();let o=new DOMPoint(e[\"clientX\"],e[\"clientY\"])[\"matrixTransform\"](g);let _=(0,common_1.fs)`<foxy-guide x=\"${M}\" y=\"${v}\" angle=\"${h}\"></foxy-guide>`;__classPrivateFieldGet(this,_ManualManager_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_ManualManager_stage,\"f\").selectedElements.set(_);__classPrivateFieldGet(this,_ManualManager_stage,\"f\").selectedTextRange=void 0;__classPrivateFieldGet(this,_ManualManager_stage,\"f\").currentContainer=void 0;__classPrivateFieldGet(this,_ManualManager_stage,\"f\").undoManager.checkpoint(\"#guide\",\"#object-guide\");(t=__classPrivateFieldGet(this,_ManualManager_stage,\"f\").workspaces.querySelector(\"defs\"))===null||t===void 0?void 0:t.append(_)})};this.Lt=()=>{if(this[\"bi\"])return;let n=__classPrivateFieldGet(this,_ManualManager_stage,\"f\").workspaces.querySelectorAll(\"foxy-guide\");let l=!1;if(n[\"length\"]!==__classPrivateFieldGet(this,_ManualManager_reprs,\"f\").childElementCount)l=!0;else for(let s=0;s<n[\"length\"];s+=1){let e=n[s];let t=__classPrivateFieldGet(this,_ManualManager_reprs,\"f\").children[s];let a=t[\"transform\"][\"baseVal\"][0][\"matrix\"][\"e\"];let r=t[\"transform\"][\"baseVal\"][0][\"matrix\"][\"f\"];let i=t[\"transform\"][\"baseVal\"][1][\"angle\"];if(parseFloat(e[\"getAttribute\"](\"x\"))!==a||parseFloat(e[\"getAttribute\"](\"y\"))!==r||parseFloat(e[\"getAttribute\"](\"angle\"))!==i){l=!0;break}}if(l){let a=\"\";for(let t of n){let e=99999;a+=' <g class=\"repr\" transform=\"translate('+parseFloat(t[\"getAttribute\"](\"x\"))+\", \"+parseFloat(t[\"getAttribute\"](\"y\"))+\") rotate(\"+parseFloat(t[\"getAttribute\"](\"angle\"))+')\" data-snapping=\"'+__classPrivateFieldGet(this,_ManualManager_stage,\"f\").snapManager[\"isGuideSnapping\"](t)+'\"> <line class=\"outer-line\" x1=\"0\" y1=\"'+-e+'\" x2=\"0\" y2=\"'+e+'\"></line> <line class=\"inner-line\" x1=\"0\" y1=\"'+-e+'\" x2=\"0\" y2=\"'+e+'\"></line>\\n            <circle class=\"grippie\" cx=\"0\" cy=\"0\"></rect>\\n          </g>\\n        '}__classPrivateFieldGet(this,_ManualManager_reprs,\"f\").innerHTML=a;const t=__classPrivateFieldGet(this,_ManualManager_reprs,\"f\").children;for(let e=0;e<n.length;e+=1){t[e][Zh]=n[e]}}this.B();this.yi()};this.B=()=>{for(let e of __classPrivateFieldGet(this,_ManualManager_reprs,\"f\").querySelectorAll(\".grippie\"))e.setAttribute(\"r\",(Kh/__classPrivateFieldGet(this,_ManualManager_stage,\"f\").scale).toString())};this.yi=()=>{for(let e of __classPrivateFieldGet(this,_ManualManager_reprs,\"f\").children){const t=e;__classPrivateFieldGet(this,_ManualManager_stage,\"f\").selectedElements.has(t[Zh])?e[\"setAttribute\"](\"data-selected\",\"\"):e[\"removeAttribute\"](\"data-selected\")}};this.vi=()=>{for(let t of __classPrivateFieldGet(this,_ManualManager_reprs,\"f\")[\"children\"]){const a=t;let e=__classPrivateFieldGet(this,_ManualManager_stage,\"f\").snapManager.isGuideSnapping(a[Zh]);t[\"setAttribute\"](\"data-snapping\",e)}};this.isPointOverBoard=(e,t)=>{const a=document.querySelector(\"#horizontal-ruler\");const r=a===null||a===void 0?void 0:a.getBoundingClientRect();const i=document.querySelector(\"#vertical-ruler\");const s=i===null||i===void 0?void 0:i.getBoundingClientRect();if(e>=r.x&&e<=r.right&&t>=r.y&&t<=r.bottom){return false}if(e>=s.x&&e<=s.right&&t>=s.y&&t<=s.bottom){return false}return true};__classPrivateFieldSet(this,_ManualManager_stage,e,\"f\");this.fi=[];this.bi=!1;this.hi=this.Lt;this.wi=this.vi;const{color:t,active:a}=__classPrivateFieldGet(this,_ManualManager_stage,\"f\").config.manualGuides;__classPrivateFieldGet(this,_ManualManager_manualGuidesHud,\"f\").innerHTML=`<style>\n        #manual-guides-hud .repr {\n          color: ${t};\n          pointer-events: none;\n        }\n        #manual-guides-hud .repr[data-snapping=\"true\"] {\n          color: ${a};\n        }\n    \n        #manual-guides-hud .repr .outer-line {\n          fill: none;\n          stroke: currentColor;\n          stroke-width: 10;\n          vector-effect: non-scaling-stroke;\n          opacity: 0;\n        }\n        #manual-guides-hud .repr[data-selected] .outer-line {\n          opacity: 0.1;\n          pointer-events: all;\n        }\n    \n        #manual-guides-hud .repr .inner-line {\n          fill: none;\n          stroke: currentColor;\n          stroke-width: 1;\n          vector-effect: non-scaling-stroke;\n        }\n    \n        #manual-guides-hud .repr .grippie {\n          stroke: currentColor;\n          stroke-width: 1px;\n          fill: white;\n          pointer-events: all;\n          vector-effect: non-scaling-stroke;\n        }\n        #manual-guides-hud .repr[data-selected] .grippie {\n          fill: currentColor;\n        }\n      </style>\n    \n      <g uid=\"reprs\"></g>`;__classPrivateFieldSet(this,_ManualManager_reprs,__classPrivateFieldGet(this,_ManualManager_manualGuidesHud,\"f\").querySelector('[uid=\"reprs\"]'),\"f\");__classPrivateFieldGet(this,_ManualManager_manualGuidesHud,\"f\").addEventListener(\"pointerdown\",e=>this.L(e))}}_ManualManager_stage=new WeakMap,_ManualManager_manualGuidesHud=new WeakMap,_ManualManager_reprs=new WeakMap;exports[\"default\"]=ManualManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/manualManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/orderManager.js":
/*!*****************************************************!*\
  !*** ./node_modules/foxyjs/support/orderManager.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,r,t,a,n){if(a===\"m\")throw new TypeError(\"Private method is not writable\");if(a===\"a\"&&!n)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof r===\"function\"?e!==r||!n:!r.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return a===\"a\"?n.call(e,t):n?n.value=t:r.set(e,t),t};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,r,t,a){if(t===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof r===\"function\"?e!==r||!a:!r.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return t===\"m\"?a:t===\"a\"?a.call(e):a?a.value:r.get(e)};var _OrderManager_stage,_OrderManager_Kv,_OrderManager_Qv,_OrderManager_Zv,_OrderManager_ey,_OrderManager_ty,_OrderManager_Jv;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class OrderManager{constructor(e){_OrderManager_stage.set(this,void 0);this.raise=()=>{__classPrivateFieldGet(this,_OrderManager_Kv,\"f\").call(this)};_OrderManager_Kv.set(this,()=>{__classPrivateFieldGet(this,_OrderManager_stage,\"f\").undoManager.checkpoint(\"#order.raise\",null);for(let e of(0,common_1.as)(Array.from(__classPrivateFieldGet(this,_OrderManager_stage,\"f\").selectedObjectElements.keys())))for(let t of(0,common_1.cs)(e)){let r=[...t[0].parentElement.children].filter(r=>{if(t.includes(r))return!1;if(!1===[...common_1.g,\"svg\",\"g\",\"a\",\"use\"].includes(r.localName))return!1;for(let e of t)if((0,common_1.ds)(r,e))return!0;return!1}).find(e=>Number((0,common_1.Qi)(e))>Number((0,common_1.Qi)(t[t.length-1])));if(r){for(let e of t.reverse())r.after(e)}}});this.raiseToFront=()=>{__classPrivateFieldGet(this,_OrderManager_Qv,\"f\").call(this)};_OrderManager_Qv.set(this,()=>{__classPrivateFieldGet(this,_OrderManager_stage,\"f\").undoManager.checkpoint(\"#order.raise-to-front\",null);for(let e of(0,common_1.as)(Array.from(__classPrivateFieldGet(this,_OrderManager_stage,\"f\").selectedObjectElements.keys())))for(let t of(0,common_1.cs)(e)){let e=[...t[0].parentElement.children].filter(r=>{if(t.includes(r))return!1;if(!1===[...common_1.g,\"svg\",\"g\",\"a\",\"use\"].includes(r.localName))return!1;for(let e of t)if((0,common_1.ds)(r,e))return!0;return!1});let r=e[e.length-1];if(r){for(let e of t.reverse())r.after(e)}}});this.raiseEnabled=()=>{return __classPrivateFieldGet(this,_OrderManager_Zv,\"f\").call(this)};_OrderManager_Zv.set(this,()=>{let e=(0,common_1.as)(Array.from(__classPrivateFieldGet(this,_OrderManager_stage,\"f\").selectedObjectElements.keys()));let a=Symbol();for(let r of e){let e=(0,common_1.cs)(r);for(let t of e){if([...t[0].parentElement.children].filter(r=>{if(r.transform){if(t.includes(r))return!1;if(!1===[...common_1.g,\"svg\",\"g\",\"a\",\"use\"].includes(r.localName))return!1;for(let e of t)if(e.transform&&(e[a]||(e[a]=(0,common_1.Yi)(e)),r[a]||(r[a]=(0,common_1.Yi)(r)),(0,common_1.xi)(e[a],r[a])))return!0;return!1}return!1}).find(e=>Number((0,common_1.Qi)(e))>Number((0,common_1.Qi)(t[t.length-1]))))return!0}}return!1});this.lower=()=>{__classPrivateFieldGet(this,_OrderManager_ey,\"f\").call(this)};_OrderManager_ey.set(this,()=>{__classPrivateFieldGet(this,_OrderManager_stage,\"f\").undoManager.checkpoint(\"#order.lower\",null);for(let e of(0,common_1.as)(Array.from(__classPrivateFieldGet(this,_OrderManager_stage,\"f\").selectedObjectElements.keys())))for(let t of(0,common_1.cs)(e)){let r=[...t[0].parentElement.children].filter(r=>{if(t.includes(r))return!1;if(!1===[...common_1.g,\"svg\",\"g\",\"a\",\"use\"].includes(r.localName))return!1;for(let e of t)if((0,common_1.ds)(r,e))return!0;return!1}).reverse().find(e=>Number((0,common_1.Qi)(e))<Number((0,common_1.Qi)(t[0])));if(r){for(let e of t)r.before(e)}}});this.lowerToBack=()=>{__classPrivateFieldGet(this,_OrderManager_ty,\"f\").call(this)};_OrderManager_ty.set(this,()=>{__classPrivateFieldGet(this,_OrderManager_stage,\"f\").undoManager.checkpoint(\"#order.lower-to-back\",null);for(let e of(0,common_1.as)(Array.from(__classPrivateFieldGet(this,_OrderManager_stage,\"f\").selectedObjectElements.keys())))for(let t of(0,common_1.cs)(e)){let r=[...t[0].parentElement.children].filter(r=>{if(t.includes(r))return!1;if(!1===[...common_1.g,\"svg\",\"g\",\"a\",\"use\"].includes(r.localName))return!1;for(let e of t)if((0,common_1.ds)(r,e))return!0;return!1})[0];if(r){for(let e of t)r.before(e)}}});this.lowerEnabled=()=>{return __classPrivateFieldGet(this,_OrderManager_Jv,\"f\").call(this)};_OrderManager_Jv.set(this,()=>{let e=(0,common_1.as)(Array.from(__classPrivateFieldGet(this,_OrderManager_stage,\"f\").selectedElements.keys()));let a=Symbol();for(let r of e){let e=(0,common_1.cs)(r);for(let t of e){if([...t[0].parentElement.children].filter(r=>{if(r.transform){if(t.includes(r))return!1;if(!1===[...common_1.g,\"svg\",\"g\",\"a\",\"use\"].includes(r.localName))return!1;for(let e of t)if(e.transform&&(e[a]||(e[a]=(0,common_1.Yi)(e)),r[a]||(r[a]=(0,common_1.Yi)(r)),(0,common_1.xi)(e[a],r[a])))return!0;return!1}return!1}).find(e=>Number((0,common_1.Qi)(e))<Number((0,common_1.Qi)(t[0]))))return!0}}return!1});__classPrivateFieldSet(this,_OrderManager_stage,e,\"f\")}}_OrderManager_stage=new WeakMap,_OrderManager_Kv=new WeakMap,_OrderManager_Qv=new WeakMap,_OrderManager_Zv=new WeakMap,_OrderManager_ey=new WeakMap,_OrderManager_ty=new WeakMap,_OrderManager_Jv=new WeakMap;exports[\"default\"]=OrderManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/orderManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/rulerManager.js":
/*!*****************************************************!*\
  !*** ./node_modules/foxyjs/support/rulerManager.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,r,a,t){if(a===\"a\"&&!t)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof r===\"function\"?e!==r||!t:!r.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return a===\"m\"?t:a===\"a\"?t.call(e):t?t.value:r.get(e)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,r,a,t,l){if(t===\"m\")throw new TypeError(\"Private method is not writable\");if(t===\"a\"&&!l)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof r===\"function\"?e!==r||!l:!r.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return t===\"a\"?l.call(e,a):l?l.value=a:r.set(e,a),a};var _RulerManager_v,_RulerManager_y,_RulerManager_stage,_RulerManager_K,_RulerManager_Q,_RulerManager_C,_RulerManager_J,_RulerManager_ee,_RulerManager_te,_RulerManager_ie,_RulerManager_se,_RulerManager_ne,_RulerManager_re,_RulerManager_de,_RulerManager_rulers,_RulerManager_horizontalRuler,_RulerManager_verticalRuler,_RulerManager_Z;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class RulerManager{set enabled(e){e?this.rulers.style.setProperty(\"display\",\"block\"):this.rulers.style.setProperty(\"display\",\"none\")}get rulers(){return __classPrivateFieldGet(this,_RulerManager_rulers,\"f\")}constructor(e){_RulerManager_v.set(this,`<div id=\"main\"> <div id=\"horizontal-ruler\" class=\"ruler\" part=\"ruler horizontal-ruler\" data-type=\"horizontal\"></div> <div id=\"vertical-ruler\" class=\"ruler\" part=\"ruler vertical-ruler\" data-type=\"vertical\"></div> <div id=\"corner-ruler\" class=\"ruler\" part=\"ruler corner-ruler\" data-type=\"corner\"></div> </div>`);_RulerManager_y.set(this,`<style>\n    #rulers{\n      display: none;\n      position: absolute;\n      top: 0px;\n      left: 0px;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n      contain: strict;\n      font-size: 14px;\n      user-select: none;\n    }\n\n    #main {\n      position: relative;\n      width: 100%;\n      height: 100%;\n    }\n\n    #corner-ruler {\n      pointer-events: all;\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 14px;\n      height: 14px;\n      box-sizing: border-box;\n      border-width: 0 1px 1px 0;\n      border-style: none solid solid none;\n    }\n\n    #horizontal-ruler,\n    #vertical-ruler {\n      pointer-events: all;\n      position: relative;\n      box-sizing: border-box;\n      touch-action: pinch-zoom;\n    }\n\n    #horizontal-ruler {\n      position: absolute;\n      top: 0;\n      width: 100%;\n      height: 14px;\n      border-width: 0 0 1px 0;\n      border-style: none none solid none;\n      background:white;\n      border-color:#dcdcdc;\n    }\n\n    #vertical-ruler {\n      position: absolute;\n      top: 0;\n      width: 14px;\n      height: 100%;\n      border-width: 0 1px 0 0;\n      border-style: none solid none none;\n      writing-mode: vertical-lr;\n      background:white;\n      border-color:#dcdcdc;\n    }\n\n    #horizontal-ruler > div,\n    #vertical-ruler > div {\n      position: absolute;\n      font-size: 9px;\n      box-sizing: border-box;\n      pointer-events: none;\n      user-select: none;\n      white-space: pre;\n    }\n    #horizontal-ruler > div {\n      width: 0px;\n      height: 100%;\n      top: 0;\n      left: 0;\n      padding: 0 0 0 3px;\n      border-width: 0 0 0 1px;\n      border-style: none none none solid;\n    }\n    #vertical-ruler > div {\n      width: 100%;\n      height: 0px;\n      top: 0;\n      left: 0;\n      padding: 3px 0 0 0;\n      border-width: 1px 0 0 0;\n      border-style: solid none none none;\n    }\n\n    #rulers [part=\"tick\"] {\n      color: rgba(0,0,0,0.8);\n      border-color: rgba(0, 0, 0, 0.4);\n    }\n    </style>`);_RulerManager_stage.set(this,void 0);_RulerManager_K.set(this,void 0);_RulerManager_Q.set(this,void 0);_RulerManager_C.set(this,void 0);_RulerManager_J.set(this,void 0);_RulerManager_ee.set(this,void 0);_RulerManager_te.set(this,void 0);_RulerManager_ie.set(this,void 0);_RulerManager_se.set(this,\"canvas\");_RulerManager_ne.set(this,[1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4]);_RulerManager_re.set(this,void 0);_RulerManager_de.set(this,void 0);_RulerManager_rulers.set(this,void 0);_RulerManager_horizontalRuler.set(this,void 0);_RulerManager_verticalRuler.set(this,void 0);this.getRulerTypeFromPoint=(e,r)=>{let a=document.elementFromPoint(e,r);let t=a?a.closest(\".ruler\"):null;return t?t.getAttribute(\"data-type\"):null};this.enabledCallback=()=>{this.enabled=true;__classPrivateFieldGet(this,_RulerManager_re,\"f\").call(this);window.addEventListener(\"resize\",__classPrivateFieldSet(this,_RulerManager_J,()=>{__classPrivateFieldGet(this,_RulerManager_re,\"f\").call(this)},\"f\"));__classPrivateFieldGet(this,_RulerManager_stage,\"f\").board.addEventListener(\"zoomchange\",__classPrivateFieldSet(this,_RulerManager_te,()=>{__classPrivateFieldGet(this,_RulerManager_re,\"f\").call(this)},\"f\"));__classPrivateFieldGet(this,_RulerManager_stage,\"f\").board.addEventListener(\"workspacemutation\",__classPrivateFieldSet(this,_RulerManager_ie,()=>{__classPrivateFieldGet(this,_RulerManager_de,\"f\").call(this)},\"f\"));__classPrivateFieldGet(this,_RulerManager_Z,\"f\").call(this)};_RulerManager_Z.set(this,()=>{let r=__classPrivateFieldGet(this,_RulerManager_stage,\"f\").board;let _=__classPrivateFieldGet(this,_RulerManager_stage,\"f\").scale;let e=__classPrivateFieldGet(this,_RulerManager_se,\"f\");let o=0;let u=0;let a=(0,common_1.ut)(__classPrivateFieldGet(this,_RulerManager_stage,\"f\").canvas);if(0!==a[\"a\"]*a[\"d\"]-a[\"b\"]*a[\"c\"]){let e=(0,common_1.di)(r.getBoundingClientRect(),a.inverse());o=e[\"x\"];u=e[\"y\"]}if(\"canvas\"===e){let a=1;let t=50/_;if(_>0==!1)return;for(let r=0;r<__classPrivateFieldGet(this,_RulerManager_ne,\"f\").length;r+=1){let e=__classPrivateFieldGet(this,_RulerManager_ne,\"f\")[r];a=e;if(t<=e)break}let l=[];let i=__classPrivateFieldGet(this,_RulerManager_rulers,\"f\").clientWidth;for(let r=(0,common_1.te)(o,0);r<Infinity;r+=1)if(a>=1&&r%a==0){let e=(r-o)*_;if(e>i)break;l[\"push\"]([e,r])}for(;__classPrivateFieldGet(this,_RulerManager_horizontalRuler,\"f\").children.length<l.length;){let e=(0,common_1.Zi)(\"div\");e[\"part\"][\"add\"](\"tick\");__classPrivateFieldGet(this,_RulerManager_horizontalRuler,\"f\").append(e)}for(let t=0;t<l.length;t+=1){let[e,r]=l[t];let a=__classPrivateFieldGet(this,_RulerManager_horizontalRuler,\"f\").children[t];a.style.display=\"\";a.style.transform=\"translateX(\"+e+\"px)\";a.textContent=r}const d=__classPrivateFieldGet(this,_RulerManager_horizontalRuler,\"f\").children;const c=d.length;for(let e=l.length;e<c;e+=1){d[e].style.display=\"none\"}let s=[];let n=__classPrivateFieldGet(this,_RulerManager_rulers,\"f\").clientHeight;for(let r=(0,common_1.te)(u,0);r<Infinity;r+=1)if(r%a===0){let e=(r-u)*_;if(e>n)break;s.push([e,r])}for(;__classPrivateFieldGet(this,_RulerManager_verticalRuler,\"f\").children.length<s.length;){let e=(0,common_1.Zi)(\"div\");e[\"part\"][\"add\"](\"tick\");__classPrivateFieldGet(this,_RulerManager_verticalRuler,\"f\").append(e)}for(let t=0;t<s.length;t+=1){let[e,r]=s[t];let a=__classPrivateFieldGet(this,_RulerManager_verticalRuler,\"f\").children[t];a.style.display=\"\";a.style.transform=\"translateY(\"+e+\"px)\";a.textContent=r}const h=__classPrivateFieldGet(this,_RulerManager_verticalRuler,\"f\").children;const g=h.length;for(let e=s.length;e<g;e+=1){h[e].style.display=\"none\"}}});__classPrivateFieldSet(this,_RulerManager_stage,e,\"f\");__classPrivateFieldSet(this,_RulerManager_rulers,document.createElement(\"div\"),\"f\");__classPrivateFieldGet(this,_RulerManager_rulers,\"f\").id=\"rulers\";__classPrivateFieldGet(this,_RulerManager_stage,\"f\").svg.after(__classPrivateFieldGet(this,_RulerManager_rulers,\"f\"));__classPrivateFieldGet(this,_RulerManager_rulers,\"f\").append((0,common_1.fs)`${__classPrivateFieldGet(this,_RulerManager_y,\"f\")}`);__classPrivateFieldGet(this,_RulerManager_rulers,\"f\").append((0,common_1.fs)`${__classPrivateFieldGet(this,_RulerManager_v,\"f\")}`);__classPrivateFieldSet(this,_RulerManager_horizontalRuler,__classPrivateFieldGet(this,_RulerManager_rulers,\"f\").querySelector(\"#horizontal-ruler\"),\"f\");__classPrivateFieldSet(this,_RulerManager_verticalRuler,__classPrivateFieldGet(this,_RulerManager_rulers,\"f\").querySelector(\"#vertical-ruler\"),\"f\");__classPrivateFieldSet(this,_RulerManager_re,__classPrivateFieldGet(this,_RulerManager_Z,\"f\"),\"f\");__classPrivateFieldSet(this,_RulerManager_de,__classPrivateFieldGet(this,_RulerManager_Z,\"f\"),\"f\")}disabledCallback(){this.enabled=false;window.removeEventListener(\"resize\",__classPrivateFieldGet(this,_RulerManager_J,\"f\"));__classPrivateFieldGet(this,_RulerManager_stage,\"f\").board.removeEventListener(\"zoomchange\",__classPrivateFieldGet(this,_RulerManager_te,\"f\"));__classPrivateFieldGet(this,_RulerManager_stage,\"f\").board.removeEventListener(\"workspacemutation\",__classPrivateFieldGet(this,_RulerManager_ie,\"f\"))}}_RulerManager_v=new WeakMap,_RulerManager_y=new WeakMap,_RulerManager_stage=new WeakMap,_RulerManager_K=new WeakMap,_RulerManager_Q=new WeakMap,_RulerManager_C=new WeakMap,_RulerManager_J=new WeakMap,_RulerManager_ee=new WeakMap,_RulerManager_te=new WeakMap,_RulerManager_ie=new WeakMap,_RulerManager_se=new WeakMap,_RulerManager_ne=new WeakMap,_RulerManager_re=new WeakMap,_RulerManager_de=new WeakMap,_RulerManager_rulers=new WeakMap,_RulerManager_horizontalRuler=new WeakMap,_RulerManager_verticalRuler=new WeakMap,_RulerManager_Z=new WeakMap;exports[\"default\"]=RulerManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/rulerManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/smartManager.js":
/*!*****************************************************!*\
  !*** ./node_modules/foxyjs/support/smartManager.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,a,r){if(a===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return a===\"m\"?r:a===\"a\"?r.call(e):r?r.value:t.get(e)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,a,r,s){if(r===\"m\")throw new TypeError(\"Private method is not writable\");if(r===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return r===\"a\"?s.call(e,a):s?s.value=a:t.set(e,a),a};var _SmartManager_stage,_SmartManager_smartGuidesHud,_SmartManager_reprs;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class SmartManager{get enabled(){return __classPrivateFieldGet(this,_SmartManager_smartGuidesHud,\"f\").hasAttribute(\"enabled\")}set enabled(e){e?__classPrivateFieldGet(this,_SmartManager_smartGuidesHud,\"f\").setAttribute(\"enabled\",\"\"):__classPrivateFieldGet(this,_SmartManager_smartGuidesHud,\"f\").removeAttribute(\"enabled\")}constructor(e){_SmartManager_stage.set(this,void 0);_SmartManager_smartGuidesHud.set(this,document.querySelector(\"#smart-guides-hud\"));_SmartManager_reprs.set(this,void 0);this.enabledCallback=()=>{this.enabled=true;__classPrivateFieldGet(this,_SmartManager_stage,\"f\").board.addEventListener(\"snapperschange\",this.Si=()=>{this.hi()})};this.disabledCallback=()=>{this.enabled=false;__classPrivateFieldGet(this,_SmartManager_stage,\"f\").board.removeEventListener(\"snapperschange\",this.Si)};this.Lt=()=>{const e=__classPrivateFieldGet(this,_SmartManager_stage,\"f\").snapManager.snappers().filter(e=>\"smart\"===e.type&&e.snapping);const r=(0,common_1.ut)(__classPrivateFieldGet(this,_SmartManager_stage,\"f\").currentWorkspace).inverse();__classPrivateFieldGet(this,_SmartManager_reprs,\"f\").innerHTML=\"\";for(let a of e){let e;let t;if(\"vertical\"===a.orientation){if(a.snappedBBox){e=new DOMPoint(a.x,Math.min(a.snappingBBox.y,a.snappedBBox.y));t=new DOMPoint(a.x,Math.max(a.snappingBBox.bottom,a.snappedBBox.bottom))}else{if(a.snappedPoint){e=new DOMPoint(a.x,Math.min(a.snappingBBox.y,a.snappedPoint.y));t=new DOMPoint(a.x,Math.max(a.snappingBBox.bottom,a.snappedPoint.y))}}}if(\"horizontal\"===a.orientation){if(a.snappedBBox){e=new DOMPoint(Math.min(a.snappingBBox.x,a.snappedBBox.x),a.y);t=new DOMPoint(Math.max(a.snappingBBox.right,a.snappedBBox.right),a.y)}else{if(a.snappedPoint){e=new DOMPoint(Math.min(a.snappingBBox.x,a.snappedPoint.x),a.y);t=new DOMPoint(Math.max(a.snappingBBox.right,a.snappedPoint.x),a.y)}}}const{x:s,y:i}=e.matrixTransform(r);const{x:n,y:o}=t.matrixTransform(r);const d=(0,common_1.fs)`<line class=\"repr\" x1=\"${s}\" y1=\"${i}\" x2=\"${n}\" y2=\"${o}\"></line>`;__classPrivateFieldGet(this,_SmartManager_reprs,\"f\").append(d)}};__classPrivateFieldSet(this,_SmartManager_stage,e,\"f\");this.hi=this.Lt;const{color:t}=__classPrivateFieldGet(this,_SmartManager_stage,\"f\").config.smartGuides;__classPrivateFieldGet(this,_SmartManager_smartGuidesHud,\"f\").innerHTML=`<style>\n         #smart-guides-hud .repr {\n           fill: none;\n           stroke: ${t};\n           stroke-width: 1;\n           vector-effect: non-scaling-stroke;\n           opacity: 0.6;\n           pointer-events: none;\n         }\n         </style>\n         <g uid=\"reprs\"></g>`;__classPrivateFieldSet(this,_SmartManager_reprs,__classPrivateFieldGet(this,_SmartManager_smartGuidesHud,\"f\").querySelector('[uid=\"reprs\"]'),\"f\")}}_SmartManager_stage=new WeakMap,_SmartManager_smartGuidesHud=new WeakMap,_SmartManager_reprs=new WeakMap;exports[\"default\"]=SmartManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/smartManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/snapManager.js":
/*!****************************************************!*\
  !*** ./node_modules/foxyjs/support/snapManager.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,a,n,i){if(n===\"m\")throw new TypeError(\"Private method is not writable\");if(n===\"a\"&&!i)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!i:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return n===\"a\"?i.call(e,a):i?i.value=a:t.set(e,a),a};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,a,n){if(a===\"a\"&&!n)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!n:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return a===\"m\"?n:a===\"a\"?n.call(e):n?n.value:t.get(e)};var _SnapManager_stage,_SnapManager_groups;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class SnapManager{constructor(e){_SnapManager_stage.set(this,void 0);_SnapManager_groups.set(this,[]);this.snappers=()=>{return[...__classPrivateFieldGet(this,_SnapManager_groups,\"f\")]};this.snapStart=(s=!0)=>{var h,t;let f=__classPrivateFieldGet(this,_SnapManager_stage,\"f\").board;__classPrivateFieldSet(this,_SnapManager_groups,[],\"f\");const{manualGuides:e,smartGuides:a,grid:n}=__classPrivateFieldGet(this,_SnapManager_stage,\"f\").config;if(!n.disabled){let e=(0,common_1.ut)(__classPrivateFieldGet(this,_SnapManager_stage,\"f\").canvas);let t=(h=__classPrivateFieldGet(this,_SnapManager_stage,\"f\").workspaces)===null||h===void 0?void 0:h.querySelector(\"foxy-grid\");let a=0;let n=0;let i=100;let s=100;if(t){a=Number(t.getAttribute(\"x\"));n=Number(t.getAttribute(\"y\"));i=Number(t.getAttribute(\"width\"));s=Number(t.getAttribute(\"height\"))}let r=f===null||f===void 0?void 0:f[\"getBoundingClientRect\"]();let l=(0,common_1.di)(new DOMRect(a,n,i,s),e);a=l[\"x\"];n=l[\"y\"];i=l[\"width\"];s=l[\"height\"];let o=r[\"x\"];let p=r[\"x\"]+r[\"width\"];let _=r[\"y\"];let g=r[\"y\"]+r[\"height\"];let u=[];let d=[];for(let e=a;e<=p;e+=i)e>=o&&u[\"push\"](e);for(let e=a-i;e>=o;e-=i)e<=p&&u[\"push\"](e);for(let e=n;e<=g;e+=s)e>=_&&d[\"push\"](e);for(let e=n-s;e>=_;e-=s)e<=g&&d[\"push\"](e);for(let e of u)__classPrivateFieldGet(this,_SnapManager_groups,\"f\")[\"push\"]({type:\"grid\",orientation:\"vertical\",snapping:!1,x:e,grid:t});for(let e of d)__classPrivateFieldGet(this,_SnapManager_groups,\"f\")[\"push\"]({type:\"grid\",orientation:\"horizontal\",snapping:!1,y:e,grid:t})}if(!e.disabled){let s=(0,common_1.ut)(__classPrivateFieldGet(this,_SnapManager_stage,\"f\").canvas);let e=(t=__classPrivateFieldGet(this,_SnapManager_stage,\"f\").workspaces)===null||t===void 0?void 0:t[\"querySelectorAll\"](\"foxy-guide\");for(let i of e){let e=parseFloat(i[\"getAttribute\"](\"angle\"));let t=parseFloat(i[\"getAttribute\"](\"x\"));let a=parseFloat(i[\"getAttribute\"](\"y\"));let n=new DOMPoint(t,a)[\"matrixTransform\"](s);0===e?__classPrivateFieldGet(this,_SnapManager_groups,\"f\").push({type:\"manual\",orientation:\"vertical\",snapping:!1,x:n.x,guide:i}):90===e?__classPrivateFieldGet(this,_SnapManager_groups,\"f\").push({type:\"manual\",orientation:\"horizontal\",snapping:!1,y:n.y,guide:i}):__classPrivateFieldGet(this,_SnapManager_groups,\"f\").push({type:\"manual\",orientation:\"angular\",snapping:!1,x:n.x,y:n.y,guide:i})}}if(!a.disabled){let t=Array.from(__classPrivateFieldGet(this,_SnapManager_stage,\"f\").selectedElements.keys());let a=[];if(t.length>0){for(let e of t[0].parentElement.children)__classPrivateFieldGet(this,_SnapManager_stage,\"f\").isSelectableElement(e)&&(!1!==s&&!1!==t.includes(e)||a.push(e))}else{for(let e of __classPrivateFieldGet(this,_SnapManager_stage,\"f\").currentWorkspace.children)__classPrivateFieldGet(this,_SnapManager_stage,\"f\").isSelectableElement(e)&&a.push(e)}let n=a.map(e=>(0,common_1.Yi)(e));let i=__classPrivateFieldGet(this,_SnapManager_stage,\"f\").currentWorkspace.getBoundingClientRect();n=n.filter(e=>(0,common_1.xi)(i,e));const r=document.querySelector(\"#background-outlines\");n.push(r.getBoundingClientRect());for(let e of n){__classPrivateFieldGet(this,_SnapManager_groups,\"f\").push({type:\"smart\",orientation:\"vertical\",snapping:!1,x:e.x,snappingBBox:e,snappedBBox:null,side:\"left\"});__classPrivateFieldGet(this,_SnapManager_groups,\"f\").push({type:\"smart\",orientation:\"vertical\",snapping:!1,x:e.x+e.width,snappingBBox:e,side:\"right\"});__classPrivateFieldGet(this,_SnapManager_groups,\"f\").push({type:\"smart\",orientation:\"horizontal\",snapping:!1,y:e.y,snappingBBox:e,snappedBBox:null,side:\"top\"});__classPrivateFieldGet(this,_SnapManager_groups,\"f\").push({type:\"smart\",orientation:\"horizontal\",snapping:!1,y:e.y+e.height,snappingBBox:e,snappedBBox:null,side:\"bottom\"})}}__classPrivateFieldGet(this,_SnapManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"snapperschange\"))};this.snapEnd=()=>{if(__classPrivateFieldGet(this,_SnapManager_groups,\"f\").length>0){__classPrivateFieldSet(this,_SnapManager_groups,[],\"f\");__classPrivateFieldGet(this,_SnapManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"snapperschange\"))}};this.snapBBox=t=>{let a=new DOMRect(t.x,t.y,t.width,t.height);if(__classPrivateFieldGet(this,_SnapManager_groups,\"f\").length>0){let n=Infinity;let i=Infinity;let s=null;let r=null;let l=null;let o=null;let e=[new DOMPoint(t.x,t.y),new DOMPoint(t.x+t.width,t.y),new DOMPoint(t.x+t.width,t.y+t.height),new DOMPoint(t.x,t.y+t.height)];for(let a of e)for(let t of __classPrivateFieldGet(this,_SnapManager_groups,\"f\"))if(\"vertical\"===t.orientation){let e=Math.abs(a.x-t.x);if(e<n){n=e;s=t;l=t.x-a.x}}else{if(\"horizontal\"===t.orientation){let e=Math.abs(a.y-t.y);if(e<i){i=e;r=t;o=t.y-a.y}}}for(let e of __classPrivateFieldGet(this,_SnapManager_groups,\"f\")){e.snapping=!1;e.snappedBBox=null;e.snappedPoint=null}if(n<10){a.x+=Number(l);s.snapping=!0;s.snappedBBox=a}if(i<10){a.y+=Number(o);r.snapping=!0;r.snappedBBox=a}__classPrivateFieldGet(this,_SnapManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"snapperschange\"))}return a};this.snapPoint=o=>{let e=new DOMPoint(o.x,o.y);if(__classPrivateFieldGet(this,_SnapManager_groups,\"f\").length>0){let a=Infinity;let n=Infinity;let i=null;let s=null;let r=null;let l=null;for(let t of __classPrivateFieldGet(this,_SnapManager_groups,\"f\"))if(\"vertical\"===t.orientation){let e=Math.abs(o.x-t.x);if(e<a){a=e;i=t;r=t.x-o.x}}else{if(\"horizontal\"===t.orientation){let e=Math.abs(o.y-t.y);if(e<n){n=e;s=t;l=t.y-o.y}}}for(let e of __classPrivateFieldGet(this,_SnapManager_groups,\"f\")){e.snapping=!1;e.snappedBBox=null;e.snappedPoint=null}if(a<10){e.x+=Number(r);i.snapping=!0;i.snappedPoint=e}if(n<10){e.y+=Number(l);s.snapping=!0;s.snappedPoint=e}__classPrivateFieldGet(this,_SnapManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"snapperschange\"))}return e};this.snapPointToAngleMultiple=(l,e,t=22.5)=>{let[o]=(0,common_1.ii)(l,e,t);if(__classPrivateFieldGet(this,_SnapManager_groups,\"f\").length>0){let i=null;let s=null;let r=Infinity;for(let n of __classPrivateFieldGet(this,_SnapManager_groups,\"f\")){let e,t;if(\"vertical\"===n.orientation){e=new DOMPoint(n.x,0);t=new DOMPoint(n.x,100)}else{e=new DOMPoint(0,n.y);t=new DOMPoint(100,n.y)}let a=(0,common_1.vi)(l,o,e,t);if(a){let e=(0,common_1.Kt)(o,a);if(e<r){i=n;s=a;r=e}}}if(r<5){o=s;for(let e of __classPrivateFieldGet(this,_SnapManager_groups,\"f\")){e.snapping=e===i;e.snappedBBox=null;e.snappedPoint=e===i?o:null}}else{for(let e of __classPrivateFieldGet(this,_SnapManager_groups,\"f\")){e.snapping=!1;e.snappedBBox=null;e.snappedPoint=null}}__classPrivateFieldGet(this,_SnapManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"snapperschange\"))}return o};this.isGuideSnapping=t=>{for(let e of __classPrivateFieldGet(this,_SnapManager_groups,\"f\"))if(e.guide===t)return e.snapping;return!1};this.isGridSnapping=e=>{};__classPrivateFieldSet(this,_SnapManager_stage,e,\"f\")}}_SnapManager_stage=new WeakMap,_SnapManager_groups=new WeakMap;exports[\"default\"]=SnapManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/snapManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/transformManager.js":
/*!*********************************************************!*\
  !*** ./node_modules/foxyjs/support/transformManager.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,a,r,s){if(r===\"m\")throw new TypeError(\"Private method is not writable\");if(r===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return r===\"a\"?s.call(e,a):s?s.value=a:t.set(e,a),a};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,a,r){if(a===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return a===\"m\"?r:a===\"a\"?r.call(e):r?r.value:t.get(e)};var _TransformManager_instances,_TransformManager_stage,_TransformManager_Jw,_TransformManager_sy;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class TransformManager{constructor(e){_TransformManager_instances.add(this);_TransformManager_stage.set(this,void 0);this.rotateClockwise=e=>{__classPrivateFieldGet(this,_TransformManager_Jw,\"f\").call(this,90||0)};this.rotateCounterclockwise=e=>{__classPrivateFieldGet(this,_TransformManager_Jw,\"f\").call(this,-90||0)};_TransformManager_Jw.set(this,(t=90,e=null)=>{__classPrivateFieldGet(this,_TransformManager_stage,\"f\").undoManager.checkpoint(t>0?\"#rotate-clockwise\":\"#rotate-counterclockwise\",e);const a=[...Array.from(__classPrivateFieldGet(this,_TransformManager_stage,\"f\").selectedObjectElements.keys())];const r=(0,common_1.kt)(a);for(let e of a){const s=(0,common_1.ct)(e);const n=(0,common_1.ut)(e);const o=n.inverse();const i=DOMMatrix.fromMatrix(s);i.multiplySelf(o);i.translateSelf(r.x,r.y);i.rotateSelf(t);i.translateSelf(-r.x,-r.y);i.multiplySelf(n);e.setAttribute(\"transform\",i.toString())}});this.flipX=()=>{__classPrivateFieldGet(this,_TransformManager_instances,\"m\",_TransformManager_sy).call(this,\"x\")};this.flipY=()=>{__classPrivateFieldGet(this,_TransformManager_instances,\"m\",_TransformManager_sy).call(this,\"y\")};__classPrivateFieldSet(this,_TransformManager_stage,e,\"f\")}}_TransformManager_stage=new WeakMap,_TransformManager_Jw=new WeakMap,_TransformManager_instances=new WeakSet,_TransformManager_sy=function e(n=\"x\"){__classPrivateFieldGet(this,_TransformManager_stage,\"f\").undoManager.checkpoint(\"#flip-\"+n,null);const t=[...Array.from(__classPrivateFieldGet(this,_TransformManager_stage,\"f\").selectedObjectElements.keys())];const a=t.map(e=>(0,common_1.Yi)(e));const o=(0,common_1.ci)(a);for(let s of t){let t,e=(0,common_1.ct)(s),a=(0,common_1.ut)(s),r=a.inverse();if(\"x\"===n){let e=2*(o.x+o.width/2);t=new DOMMatrix([-1,0,0,1,e,0])}else{if(\"y\"===n){let e=2*(o.y+o.height/2);t=new DOMMatrix([1,0,0,-1,0,e])}}const i=DOMMatrix.fromMatrix(e);i.multiplySelf(r);i.multiplySelf(t);i.multiplySelf(a);s.setAttribute(\"transform\",i.toString())}};exports[\"default\"]=TransformManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/transformManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/undoManager.js":
/*!****************************************************!*\
  !*** ./node_modules/foxyjs/support/undoManager.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,a,i,s){if(i===\"m\")throw new TypeError(\"Private method is not writable\");if(i===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return i===\"a\"?s.call(e,a):s?s.value=a:t.set(e,a),a};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,a,i){if(a===\"a\"&&!i)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!i:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return a===\"m\"?i:a===\"a\"?i.call(e):i?i.value:t.get(e)};var _UndoManager_instances,_UndoManager_stage,_UndoManager_Observer,_UndoManager_groups,_UndoManager_position,_UndoManager_disabled,_UndoManager_ii,_UndoManager_ti,_UndoManager_ni,_UndoManager_si;Object.defineProperty(exports, \"__esModule\", ({value:true}));const ac={childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0};class UndoManager{constructor(e){_UndoManager_instances.add(this);_UndoManager_stage.set(this,void 0);_UndoManager_Observer.set(this,void 0);_UndoManager_groups.set(this,[]);_UndoManager_position.set(this,0);_UndoManager_disabled.set(this,!1);this.clear=()=>{__classPrivateFieldSet(this,_UndoManager_groups,[],\"f\");__classPrivateFieldSet(this,_UndoManager_position,0,\"f\");__classPrivateFieldGet(this,_UndoManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"undoChange\",{detail:\"clear\"}))};this.checkpoint=(e,t)=>{__classPrivateFieldGet(this,_UndoManager_Observer,\"f\").takeRecords();__classPrivateFieldGet(this,_UndoManager_position,\"f\")<__classPrivateFieldGet(this,_UndoManager_groups,\"f\").length&&__classPrivateFieldSet(this,_UndoManager_groups,__classPrivateFieldGet(this,_UndoManager_groups,\"f\").slice(0,__classPrivateFieldGet(this,_UndoManager_position,\"f\")),\"f\");let a={label:e,origin:t||null,transactions:[]};__classPrivateFieldGet(this,_UndoManager_groups,\"f\").push(a);__classPrivateFieldSet(this,_UndoManager_position,__classPrivateFieldGet(this,_UndoManager_position,\"f\")+1,\"f\")};this.undo=()=>{if(this.canUndo()){__classPrivateFieldGet(this,_UndoManager_si,\"f\").call(this);this.disabled=!0;__classPrivateFieldSet(this,_UndoManager_position,__classPrivateFieldGet(this,_UndoManager_position,\"f\")-1,\"f\");let e=__classPrivateFieldGet(this,_UndoManager_groups,\"f\")[__classPrivateFieldGet(this,_UndoManager_position,\"f\")];let t=[...e.transactions].reverse();let a=e.label||\"\";let i=new Set;let s=new Set;let r=new Set;for(let a of t)if(\"childList\"===a.type){let t=document.createDocumentFragment();for(let e of a.addedNodes){a.target.removeChild(e);s.add(e);i.delete(e)}for(let e of a.removedNodes){t.append(e);i.add(e);s.delete(e)}a.nextSibling?a.target.insertBefore(t,a.nextSibling):a.previousSibling?a.target.insertBefore(t,a.previousSibling.nextSibling):a.target.append(t)}else{if(\"attributes\"===a.type){if(null===a.oldValue){a.target.removeAttribute(a.attributeName)}else{a.target.setAttribute(a.attributeName,a.oldValue);r.add(a.target)}}else{if(\"characterData\"===a.type){a.target.data=a.oldValue;r.add(a.target)}}}this.disabled=!1;__classPrivateFieldGet(this,_UndoManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"undo\",{detail:{label:a,addedNodes:i,removedNodes:s,modifiedNodes:r}}));__classPrivateFieldGet(this,_UndoManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"redo\",{detail:{label:a,addedNodes:i,removedNodes:s,modifiedNodes:r}}));__classPrivateFieldGet(this,_UndoManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"undoChange\",{detail:\"decrement\"}))}else console.info(\"Can't undo\")};this.redo=()=>{if(this.canRedo()){let e=__classPrivateFieldGet(this,_UndoManager_groups,\"f\")[__classPrivateFieldGet(this,_UndoManager_position,\"f\")];let t=e.transactions;this.disabled=!0;__classPrivateFieldSet(this,_UndoManager_position,__classPrivateFieldGet(this,_UndoManager_position,\"f\")+1,\"f\");let a=e.label||\"\";let i=new Set;let s=new Set;let r=new Set;for(let a of t)if(\"childList\"===a.type){let t=document.createDocumentFragment();for(let e of a.removedNodes){a.target.removeChild(e);s.add(e);i.delete(e)}for(let e of a.addedNodes){t.append(e);i.add(e);s.delete(e)}a.nextSibling?a.target.insertBefore(t,a.nextSibling):a.previousSibling?a.target.insertBefore(t,a.previousSibling.nextSibling):a.target.append(t)}else{if(\"attributes\"===a.type){if(null===a.newValue){a.target.removeAttribute(a.attributeName)}else{a.target.setAttribute(a.attributeName,a.newValue);r.add(a.target)}}else{if(\"characterData\"===a.type){a.target.data=a.newValue;r.add(a.target)}}}this.disabled=!1;__classPrivateFieldGet(this,_UndoManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"redo\",{detail:{label:a,addedNodes:i,removedNodes:s,modifiedNodes:r}}));__classPrivateFieldGet(this,_UndoManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"redo\",{detail:{label:a,addedNodes:i,removedNodes:s,modifiedNodes:r}}));__classPrivateFieldGet(this,_UndoManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"undoChange\",{detail:\"increment\"}))}else console.info(\"Can't redo\")};this.canUndo=()=>{return 0!==__classPrivateFieldGet(this,_UndoManager_position,\"f\")&&!this.disabled&&(1!==__classPrivateFieldGet(this,_UndoManager_position,\"f\")||!__classPrivateFieldGet(this,_UndoManager_ni,\"f\").call(this))};this.canRedo=()=>{return __classPrivateFieldGet(this,_UndoManager_position,\"f\")!==__classPrivateFieldGet(this,_UndoManager_groups,\"f\").length&&!this.disabled};_UndoManager_ni.set(this,()=>{return 0===__classPrivateFieldGet(this,_UndoManager_groups,\"f\")[__classPrivateFieldGet(this,_UndoManager_position,\"f\")-1].transactions.length});_UndoManager_si.set(this,()=>{if(__classPrivateFieldGet(this,_UndoManager_position,\"f\")>0&&0===__classPrivateFieldGet(this,_UndoManager_groups,\"f\")[__classPrivateFieldGet(this,_UndoManager_position,\"f\")-1].transactions.length){__classPrivateFieldSet(this,_UndoManager_groups,__classPrivateFieldGet(this,_UndoManager_groups,\"f\").filter(e=>e!==__classPrivateFieldGet(this,_UndoManager_groups,\"f\")[__classPrivateFieldGet(this,_UndoManager_position,\"f\")]),\"f\");__classPrivateFieldSet(this,_UndoManager_position,__classPrivateFieldGet(this,_UndoManager_position,\"f\")-1,\"f\")}});__classPrivateFieldSet(this,_UndoManager_stage,e,\"f\");__classPrivateFieldSet(this,_UndoManager_Observer,new MutationObserver(t=>{for(let e of t)__classPrivateFieldGet(this,_UndoManager_instances,\"m\",_UndoManager_ti).call(this,e)}),\"f\");__classPrivateFieldGet(this,_UndoManager_instances,\"m\",_UndoManager_ii).call(this)}get groups(){return __classPrivateFieldGet(this,_UndoManager_groups,\"f\")}get position(){return __classPrivateFieldGet(this,_UndoManager_position,\"f\")}get disabled(){return __classPrivateFieldGet(this,_UndoManager_disabled,\"f\")}set disabled(e){var t;if((t=e)===!!t&&e!==__classPrivateFieldGet(this,_UndoManager_disabled,\"f\")){__classPrivateFieldSet(this,_UndoManager_disabled,e,\"f\");__classPrivateFieldGet(this,_UndoManager_instances,\"m\",_UndoManager_ii).call(this)}}getLabel(e){let i=[];for(let a of Array.isArray(e.label)?e.label:[e.label]){let t;if(a.href){let e=\"\";if(a.args&&a.args.length>0){e='args=\"'+Object[\"keys\"](a.args)[\"map\"](e=>e+\": \"+a.args[e])[\"join\"](\", \")+'\"';t='<x-message href=\"'+a.href+'\" '+e+'\" autocapitalize></x-message>'}}else t=a.startsWith(\"#\")?'<x-message href=\"'+a+'\" autocapitalize></x-message>':a;i.push(t)}return i[\"join\"](\" ‣ \")}}_UndoManager_stage=new WeakMap,_UndoManager_Observer=new WeakMap,_UndoManager_groups=new WeakMap,_UndoManager_position=new WeakMap,_UndoManager_disabled=new WeakMap,_UndoManager_ni=new WeakMap,_UndoManager_si=new WeakMap,_UndoManager_instances=new WeakSet,_UndoManager_ii=function e(){if(!0===this.disabled){__classPrivateFieldGet(this,_UndoManager_Observer,\"f\").takeRecords();__classPrivateFieldGet(this,_UndoManager_Observer,\"f\").disconnect()}else{!1===this.disabled&&__classPrivateFieldGet(this,_UndoManager_Observer,\"f\").observe(__classPrivateFieldGet(this,_UndoManager_stage,\"f\").workspaces,ac)}},_UndoManager_ti=function e(a){if(0===__classPrivateFieldGet(this,_UndoManager_groups,\"f\").length)return;let i=__classPrivateFieldGet(this,_UndoManager_groups,\"f\")[__classPrivateFieldGet(this,_UndoManager_groups,\"f\").length-1].transactions;let t=i.length;if(\"attributes\"===a.type){let t=a.attributeName;let e=i.find(e=>\"attributes\"===e.type&&e.attributeName===t&&e.target===a.target);if(e){e.newValue=e.target.getAttribute(t)}else{e={type:\"attributes\",target:a.target,attributeName:t,oldValue:a.oldValue,newValue:a.target.getAttribute(t)};i.push(e)}}else{if(\"characterData\"===a.type){let e=i.find(e=>\"characterData\"===e.type&&e.target===a.target);if(e)e.newValue=e.target.data;else{let e={type:\"characterData\",target:a.target,oldValue:a.oldValue,newValue:a.target.data};i.push(e)}}else{if(\"childList\"===a.type){let e={type:\"childList\",target:a.target,addedNodes:[...a.addedNodes],removedNodes:[...a.removedNodes],nextSibling:a.nextSibling,previousSibling:a.previousSibling};i.push(e)}}}if(0===t&&i.length>0){__classPrivateFieldGet(this,_UndoManager_stage,\"f\").board.dispatchEvent(new CustomEvent(\"undoChange\",{detail:\"increment\"}))}};exports[\"default\"]=UndoManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/undoManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/support/zoomManager.js":
/*!****************************************************!*\
  !*** ./node_modules/foxyjs/support/zoomManager.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,a,t,o,s){if(o===\"m\")throw new TypeError(\"Private method is not writable\");if(o===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof a===\"function\"?e!==a||!s:!a.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return o===\"a\"?s.call(e,t):s?s.value=t:a.set(e,t),t};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,a,t,o){if(t===\"a\"&&!o)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof a===\"function\"?e!==a||!o:!a.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return t===\"m\"?o:t===\"a\"?o.call(e):o?o.value:a.get(e)};var _ZoomManager_instances,_ZoomManager_stage,_ZoomManager_isDisabeld,_ZoomManager_wheel,_ZoomManager_Wi;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class ZoomManager{constructor(e){_ZoomManager_instances.add(this);_ZoomManager_stage.set(this,void 0);_ZoomManager_isDisabeld.set(this,false);this.enabledCallback=()=>{__classPrivateFieldGet(this,_ZoomManager_stage,\"f\").board.addEventListener(\"wheel\",__classPrivateFieldGet(this,_ZoomManager_wheel,\"f\"),{passive:false})};_ZoomManager_wheel.set(this,a=>{a.preventDefault();let e=(0,common_1.ie)(a.wheelDeltaX,-20,20,1);let t=(0,common_1.ie)(a.wheelDeltaY,-20,20,1);if(!a.metaKey&&!a.ctrlKey||a.altKey||a.shiftKey){__classPrivateFieldGet(this,_ZoomManager_stage,\"f\").scrollBy(e/1.8,t/1.8)}else{let e=new DOMPoint(a[\"clientX\"],a[\"clientY\"]);const o=250;__classPrivateFieldGet(this,_ZoomManager_instances,\"m\",_ZoomManager_Wi).call(this,t/o,e)}});this.zoomToFitAllViews=(e=\"top-left\",a=20,t=!0)=>{};this.zoomToArea=(e,a=\"top-left\",t=20,o=!0)=>{};if(!e)throw new Error(\"stage not found!\");__classPrivateFieldSet(this,_ZoomManager_stage,e,\"f\");this.enabledCallback()}}_ZoomManager_stage=new WeakMap,_ZoomManager_isDisabeld=new WeakMap,_ZoomManager_wheel=new WeakMap,_ZoomManager_instances=new WeakSet,_ZoomManager_Wi=function e(a=.3,t=null){const o=.1;const s=3e5;if(null===t){const l=__classPrivateFieldGet(this,_ZoomManager_stage,\"f\").board.getBoundingClientRect();t=new DOMPoint(l[\"x\"]+l.width/2,l[\"y\"]+l.height/2)}const i=(0,common_1.ct)(__classPrivateFieldGet(this,_ZoomManager_stage,\"f\").canvas);const r=(0,common_1.ut)(__classPrivateFieldGet(this,_ZoomManager_stage,\"f\").svg).inverse();const n=t.matrixTransform(r);if(i[\"a\"]>0){100*(i[\"a\"]+a*i[\"a\"])<o?a=(o-100*i[\"a\"])/(100*i[\"a\"]):100*(i[\"a\"]+a*i[\"a\"])>s&&(a=(s-100*i[\"a\"])/(100*i[\"a\"]));let e=new DOMMatrix;e.scaleSelf(1+a,1+a,1,n[\"x\"],n[\"y\"]);e.multiplySelf(i);__classPrivateFieldGet(this,_ZoomManager_stage,\"f\").canvas.setAttribute(\"transform\",e.toString())}};exports[\"default\"]=ZoomManager;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/support/zoomManager.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/cubicBezierSegHud.js":
/*!********************************************************!*\
  !*** ./node_modules/foxyjs/tools/cubicBezierSegHud.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if(s===\"m\")throw new TypeError(\"Private method is not writable\");if(s===\"a\"&&!n)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof e===\"function\"?t!==e||!n:!e.has(t))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return s===\"a\"?n.call(t,i):n?n.value=i:e.set(t,i),i};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(t,e,i,s){if(i===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof e===\"function\"?t!==e||!s:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return i===\"m\"?s:i===\"a\"?s.call(t):s?s.value:e.get(t)};var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};var _CubicBezierSegHud_stage;Object.defineProperty(exports, \"__esModule\", ({value:true}));const ee_1=__importDefault(__webpack_require__(/*! ../utils/ee */ \"./node_modules/foxyjs/utils/ee.js\"));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class CubicBezierSegHud{get x1(){return this[\"jt\"]}get y1(){return this[\"Vt\"]}get x2(){return this[\"Ht\"]}get y2(){return this[\"Wt\"]}get cx1(){return this[\"Qt\"]}get cy1(){return this[\"Jt\"]}get cx2(){return this[\"ei\"]}get cy2(){return this[\"ti\"]}get curved(){return this[\"Qt\"]!==this[\"jt\"]||this[\"Jt\"]!==this[\"Vt\"]||this[\"ei\"]!==this[\"Ht\"]||this[\"ti\"]!==this[\"Wt\"]}constructor(t){_CubicBezierSegHud_stage.set(this,void 0);this.hud=document.querySelector(\"#cubic-bezier-seg-hud\");this.show=(t,e,n=\"end\",i=null)=>{this.hud.hasAttribute(\"drawing\")&&this.hide();this.hud.setAttribute(\"drawing\",\"\");__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").snapManager.snapStart(!0);let r;let l;let s;let a=\"none\";let o=()=>{r=(0,common_1.ut)(t,!0);s=(0,common_1.pt)(t,__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").canvas,!0);l=r.inverse()};o();let h=\"mouse\";let u=!1;let c=null;let d=null;let p=null;let _=e.matrixTransform(l);null===i&&(i=[{type:\"M\",values:[_.x,_.y]}]);let g=i[0];let v=g;let f=null;let b=!1;let y=null;let w=null;let P=!1;if(\"end\"===n){v=i[i.length-1];f=\"C\"===v.type?new DOMPoint(v.values[2],v.values[3]):\"M\"===v.type||\"L\"===v.type?new DOMPoint(v.values[0],v.values[1]):null;b=\"C\"===v.type&&(v.values[2]!==v.values[4]||v.values[3]!==v.values[5])}else{if(\"start\"===n){g=i[0];y=i[1];w=\"C\"===y.type?new DOMPoint(y.values[0],y.values[1]):\"M\"===y.type||\"L\"===y.type?new DOMPoint(g.values[0],g.values[1]):null;P=\"C\"===y.type&&(y.values[0]!==g.values[0]&&y.values[1]!==g.values[1])}}const m=()=>{let t=__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").ctrlKey;let e=__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").shiftKey;a=t&&e?\"paraxialPolygon\":!t&&e?\"polygon\":\"none\";\"end\"===n?b||\"none\"!==a||(a=\"polygon\"):\"start\"===n&&(P||\"none\"!==a||(a=\"polygon\"))};const H=()=>{if(!1===u){if(\"end\"===n){if(\"L\"===v.type||\"M\"===v.type){this[\"jt\"]=v.values[0];this[\"Vt\"]=v.values[1]}else{if(\"C\"===v.type){this[\"jt\"]=v.values[4];this[\"Vt\"]=v.values[5]}}let t=__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").snapManager.snapPoint(__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").pointerClientPoint).matrixTransform(l);this[\"Ht\"]=t[\"x\"];this[\"Wt\"]=t[\"y\"]}else{if(\"start\"===n){let t=__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").snapManager.snapPoint(__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").pointerClientPoint).matrixTransform(l);this[\"jt\"]=t[\"x\"];this[\"Vt\"]=t[\"y\"];this[\"Ht\"]=g.values[0];this[\"Wt\"]=g.values[1]}}if(\"none\"===a){let t;new ee_1.default(new DOMPoint(this[\"jt\"],this[\"Vt\"]),new DOMPoint(this[\"Ht\"],this[\"Wt\"]));if(\"end\"===n){t=new ee_1.default(new DOMPoint(this[\"jt\"],this[\"Vt\"]),f)}else{if(\"start\"===n){t=new ee_1.default(new DOMPoint(this[\"Ht\"],this[\"Wt\"]),w)}}t=t[\"negate\"]();if(\"end\"===n){this[\"Qt\"]=this[\"jt\"]+t[\"x\"];this[\"Jt\"]=this[\"Vt\"]+t[\"y\"];this[\"ei\"]=this[\"Ht\"];this[\"ti\"]=this[\"Wt\"]}else{if(\"start\"===n){this[\"ei\"]=this[\"Ht\"]+t[\"x\"];this[\"ti\"]=this[\"Wt\"]+t[\"y\"];this[\"Qt\"]=this[\"jt\"];this[\"Jt\"]=this[\"Vt\"]}}}else{if(\"polygon\"===a){this[\"Qt\"]=this[\"jt\"];this[\"Jt\"]=this[\"Vt\"];this[\"ei\"]=this[\"Ht\"];this[\"ti\"]=this[\"Wt\"]}else{if(\"paraxialPolygon\"===a){let e=new DOMPoint(this[\"jt\"],this[\"Vt\"]).matrixTransform(r);let i=new DOMPoint(this[\"Ht\"],this[\"Wt\"]).matrixTransform(r);let s=__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").snapManager;if(\"end\"===n){let t=s.snapPointToAngleMultiple(e,i,15).matrixTransform(l);this[\"Ht\"]=t[\"x\"];this[\"Wt\"]=t[\"y\"]}else{if(\"start\"===n){let t=s.snapPointToAngleMultiple(i,e,15).matrixTransform(l);this[\"jt\"]=t[\"x\"];this[\"Vt\"]=t[\"y\"]}}this[\"Qt\"]=this[\"jt\"];this[\"Jt\"]=this[\"Vt\"];this[\"ei\"]=this[\"Ht\"];this[\"ti\"]=this[\"Wt\"]}}}}else{if(!0===u){let t=__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").pointerClientPoint.matrixTransform(l);let e=new ee_1.default(c,t).negate();if(\"end\"===n){this[\"ei\"]=p[\"x\"]+e[\"x\"];this[\"ti\"]=p[\"y\"]+e[\"y\"]}else{if(\"start\"===n){this[\"Qt\"]=d[\"x\"]+e[\"x\"];this[\"Jt\"]=d[\"y\"]+e[\"y\"]}}}}};const C=()=>{if(\"touch\"===h&&!1===u&&i[\"length\"]>1){this[\"#container\"].style.visibility=\"hidden\"}else{this[\"#container\"].style.visibility=\"visible\";this[\"#container\"].setAttribute(\"transform\",s.toString());this[\"#outline\"].setPathData([{type:\"M\",values:[this[\"jt\"],this[\"Vt\"]]},{type:\"C\",values:[this[\"Qt\"],this[\"Jt\"],this[\"ei\"],this[\"ti\"],this[\"Ht\"],this[\"Wt\"]]}]);this[\"#control-point-1-grippie\"][\"cx\"].baseVal.value=this.Qt;this[\"#control-point-1-grippie\"][\"cy\"].baseVal.value=this.Jt;this[\"#control-point-1-grippie\"][\"r\"].baseVal.value=3/__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").scale;this[\"#control-point-2-grippie\"][\"cx\"].baseVal.value=this.ei;this[\"#control-point-2-grippie\"][\"cy\"].baseVal.value=this.ti;this[\"#control-point-2-grippie\"][\"r\"].baseVal.value=3/__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").scale;this[\"#control-line-1\"][\"x1\"].baseVal.value=this.jt;this[\"#control-line-1\"][\"y1\"].baseVal.value=this.Vt;this[\"#control-line-1\"][\"x2\"].baseVal.value=this.Qt;this[\"#control-line-1\"][\"y2\"].baseVal.value=this.Jt;this[\"#control-line-2\"][\"x1\"].baseVal.value=this.Ht;this[\"#control-line-2\"][\"y1\"].baseVal.value=this.Wt;this[\"#control-line-2\"][\"x2\"].baseVal.value=this.ei;this[\"#control-line-2\"][\"y2\"].baseVal.value=this.ti}};__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").workspaces.addEventListener(\"pointerdown\",this.Xt=t=>{H();C();h=t.pointerType;u=!0;c=new DOMPoint(t.clientX,t.clientY).matrixTransform(l);d=new DOMPoint(this[\"Qt\"],this[\"Jt\"]);p=new DOMPoint(this[\"ei\"],this[\"ti\"])});__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").splineTool.splineHud.addEventListener(\"pointerdown\",this.Zt=t=>{u=!0;h=t.pointerType;c=new DOMPoint(t.clientX,t.clientY).matrixTransform(l);d=new DOMPoint(this[\"Qt\"],this[\"Jt\"]);p=new DOMPoint(this[\"ei\"],this[\"ti\"])});window.addEventListener(\"pointermove\",this.Ft=t=>{h=t.pointerType;H();C()});window.addEventListener(\"pointerup\",this.Gt=t=>{u=!1;h=t.pointerType;H();C()});__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").board.addEventListener(\"zoomchange\",this.D=()=>{o();H();C()});__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").board.addEventListener(\"contextmenu\",this.Kt=t=>{t.preventDefault()});o();m();H();C()};this.hide=()=>{if(this.hud.hasAttribute(\"drawing\")){this.hud.removeAttribute(\"drawing\");__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").snapManager.snapEnd();__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").workspaces.removeEventListener(\"pointerdown\",this.Xt);__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").splineTool.splineHud.removeEventListener(\"pointerdown\",this.Zt);window.removeEventListener(\"pointermove\",this.Ft);window.removeEventListener(\"pointerup\",this.Gt);__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").board.removeEventListener(\"zoomchange\",this.D);__classPrivateFieldGet(this,_CubicBezierSegHud_stage,\"f\").board.removeEventListener(\"contextmenu\",this.Kt)}};__classPrivateFieldSet(this,_CubicBezierSegHud_stage,t,\"f\");this.jt=0;this.Vt=0;this.Ht=0;this.Wt=0;this.Qt=0;this.Jt=0;this.ei=0;this.ti=0;this.hud.innerHTML=`<style>\n        #cubic-bezier-seg-hud [uid=\"control-line-1\"],\n        #cubic-bezier-seg-hud [uid=\"control-line-2\"] {\n          fill: none;\n          stroke: red;\n          stroke-width: 1;\n          vector-effect: non-scaling-stroke;\n          pointer-events: none;\n          opacity: 0.4;\n        }\n    \n        #cubic-bezier-seg-hud [uid=\"control-point-1-grippie\"],\n        #cubic-bezier-seg-hud [uid=\"control-point-2-grippie\"] {\n          fill: red;\n          stroke: none;\n          pointer-events: none;\n          opacity: 1;\n        }\n    \n        #cubic-bezier-seg-hud [uid=\"outline\"] {\n          fill: none;\n          stroke: red;\n          stroke-width: 2.5;\n          vector-effect: non-scaling-stroke;\n          pointer-events: none;\n        }\n      </style>\n    \n      <g uid=\"container\">\n        <path uid=\"outline\" d=\"M 0 0 C 0 0 0 0 0 0\"></path>\n    \n        <line uid=\"control-line-1\"></line>\n        <line uid=\"control-line-2\"></line>\n    \n        <circle uid=\"control-point-1-grippie\"></circle>\n        <circle uid=\"control-point-2-grippie\"></circle>\n      </g>`;this[\"#container\"]=this.hud.querySelector('[uid=\"container\"]');this[\"#outline\"]=this.hud.querySelector('[uid=\"outline\"]');this[\"#control-point-1-grippie\"]=this.hud.querySelector('[uid=\"control-point-1-grippie\"]');this[\"#control-point-2-grippie\"]=this.hud.querySelector('[uid=\"control-point-2-grippie\"]');this[\"#control-line-1\"]=this.hud.querySelector('[uid=\"control-line-1\"]');this[\"#control-line-2\"]=this.hud.querySelector('[uid=\"control-line-2\"]')}}_CubicBezierSegHud_stage=new WeakMap;exports[\"default\"]=CubicBezierSegHud;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/cubicBezierSegHud.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/ellipseTool.js":
/*!**************************************************!*\
  !*** ./node_modules/foxyjs/tools/ellipseTool.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,s,l,i){if(l===\"m\")throw new TypeError(\"Private method is not writable\");if(l===\"a\"&&!i)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!i:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return l===\"a\"?i.call(e,s):i?i.value=s:t.set(e,s),s};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,s,l){if(s===\"a\"&&!l)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!l:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return s===\"m\"?l:s===\"a\"?l.call(e):l?l.value:t.get(e)};var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var _EllipseTool_instances,_EllipseTool_Ke,_EllipseTool_pointerdown,_EllipseTool_stage,_EllipseTool_Pt,_EllipseTool_Dt;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");const ee_1=__importDefault(__webpack_require__(/*! ../utils/ee */ \"./node_modules/foxyjs/utils/ee.js\"));const{abs:xr,min:mr}=Math;class EllipseTool{constructor(e){_EllipseTool_instances.add(this);_EllipseTool_Ke.set(this,!1);_EllipseTool_pointerdown.set(this,void 0);_EllipseTool_stage.set(this,void 0);this.enabledCallback=()=>{const e=__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").board;e.style.cursor=\"crosshair\";__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").workspaces.addEventListener(\"pointerdown\",__classPrivateFieldSet(this,_EllipseTool_pointerdown,e=>{__classPrivateFieldGet(this,_EllipseTool_instances,\"m\",_EllipseTool_Pt).call(this,e)},\"f\"))};this.disabledCallback=()=>{__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").workspaces.removeEventListener(\"pointerdown\",__classPrivateFieldGet(this,_EllipseTool_pointerdown,\"f\"))};__classPrivateFieldSet(this,_EllipseTool_stage,e,\"f\")}}_EllipseTool_Ke=new WeakMap,_EllipseTool_pointerdown=new WeakMap,_EllipseTool_stage=new WeakMap,_EllipseTool_instances=new WeakSet,_EllipseTool_Pt=function e(i){if(i.buttons>1||!0===__classPrivateFieldGet(this,_EllipseTool_Ke,\"f\"))return;let o;let n;const a=__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").board;const r=new DOMPoint(i[\"clientX\"],i[\"clientY\"]);a.addEventListener(\"pointermove\",o=e=>{const{clientX:t,clientY:s}=e;const l=new DOMPoint(t,s);if((0,common_1.Kt)(r,l)>=3){a.removeEventListener(\"pointermove\",o);a.removeEventListener(\"pointerup\",n);__classPrivateFieldGet(this,_EllipseTool_instances,\"m\",_EllipseTool_Dt).call(this,i)}});a.addEventListener(\"pointerup\",n=()=>{a.removeEventListener(\"pointermove\",o);a.removeEventListener(\"pointerup\",n)})},_EllipseTool_Dt=function e(d){const{clientX:t,clientY:s}=d;const l=__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").board;const i=__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").currentWorkspace;let v=\"planar\";let o=\"ellipse\";const n=__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").config.draw;__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").undoManager.checkpoint(\"#ellipseangle\",\"#ellipse-tool\");__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").snapManager.snapStart(!1);let E=new DOMPoint(t,s);E=__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").snapManager.snapPoint(E);if(\"ellipse\"===o){const f=(0,common_1.Zi)(\"svg:ellipse\");i.append(f);(0,common_1.ja)(f,n);__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").selectedElements.set(f);if(\"polar\"===v||\"planar\"===v){let e;let t=(0,common_1.ut)(f)[\"inverse\"]();let s=(0,common_1.ct)(f)[\"multiply\"](t);f.setAttribute(\"transform\",s[\"toString\"]());__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").ctrlKey&&(\"polar\"===v?v=\"planar\":\"planar\"===v&&(v=\"polar\"));window.addEventListener(\"pointermove\",e=e=>{const{clientX:t,clientY:s}=e;let l=new DOMPoint(t,s);if(\"planar\"===v){l=__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").snapManager.snapPoint(l);const i=l[\"x\"]-E[\"x\"]||1;const o=l[\"y\"]-E[\"y\"]||1;let e=xr(i);let t=xr(o);if(__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").shiftKey){const r=mr(e,t);e=r;t=r}const n=i<0?E[\"x\"]-e:E[\"x\"];const a=o<0?E[\"y\"]-t:E[\"y\"];f.setAttribute(\"cx\",n+e/2);f.setAttribute(\"cy\",a+t/2);f.setAttribute(\"rx\",e/2);f.setAttribute(\"ry\",t/2)}else{if(\"polar\"===v){const _=new DOMPoint(d[\"clientX\"],d[\"clientY\"]);const c=new DOMPoint(l[\"x\"],l[\"y\"]);const p=new ee_1.default(_,c);f.setAttribute(\"cx\",_[\"x\"]);f.setAttribute(\"cy\",_[\"y\"]);f.setAttribute(\"rx\",p.length);f.setAttribute(\"ry\",p.length)}}});const a=()=>{window.removeEventListener(\"pointermove\",e);window.removeEventListener(\"pointerup\",a);__classPrivateFieldGet(this,_EllipseTool_stage,\"f\").snapManager.snapEnd()};window.addEventListener(\"pointerup\",a)}}};exports[\"default\"]=EllipseTool;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/ellipseTool.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/freehandHud.js":
/*!**************************************************!*\
  !*** ./node_modules/foxyjs/tools/freehandHud.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,i,n,s){if(n===\"m\")throw new TypeError(\"Private method is not writable\");if(n===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return n===\"a\"?s.call(e,i):s?s.value=i:t.set(e,i),i};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,i,n){if(i===\"a\"&&!n)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!n:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return i===\"m\"?n:i===\"a\"?n.call(e):n?n.value:t.get(e)};var _freehandHud_stage;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class freehandHud{get points(){return[...this[\"#outline\"].points].map(e=>DOMPoint.fromPoint(e))}constructor(e){_freehandHud_stage.set(this,void 0);this.hud=document.querySelector(\"#freehand-hud\");this.show=(e,n)=>{this.hud.hasAttribute(\"drawing\")&&this.hide();this.hud.setAttribute(\"drawing\",\"\");__classPrivateFieldGet(this,_freehandHud_stage,\"f\").snapManager.snapStart(!0);let s=(0,common_1.ut)(e,!0).inverse();let t=(0,common_1.pt)(e,__classPrivateFieldGet(this,_freehandHud_stage,\"f\").canvas,!0);let r=n.matrixTransform(s);let a=!1;this[\"#outline\"].setAttribute(\"points\",r[\"x\"]+\" \"+r[\"y\"]);this[\"#outline\"].setAttribute(\"transform\",t.toString());window.addEventListener(\"pointermove\",this.Ft=t=>{for(let e of t.getCoalescedEvents()){let i=new DOMPoint(e.clientX,e.clientY);__classPrivateFieldGet(this,_freehandHud_stage,\"f\").shiftKey&&(a=!0);if(!1===a){let e=i.matrixTransform(s);this[\"#outline\"].points.appendItem((0,common_1.ti)(e))}else{if(__classPrivateFieldGet(this,_freehandHud_stage,\"f\").ctrlKey){let e=__classPrivateFieldGet(this,_freehandHud_stage,\"f\").snapManager.snapPointToAngleMultiple(n,i,15);e=__classPrivateFieldGet(this,_freehandHud_stage,\"f\").snapManager.snapPoint(e);let t=e.matrixTransform(s);this[\"#outline\"].setAttribute(\"points\",\"\");this[\"#outline\"].points.appendItem((0,common_1.ti)(r));this[\"#outline\"].points.appendItem((0,common_1.ti)(t))}else{let e=__classPrivateFieldGet(this,_freehandHud_stage,\"f\").snapManager.snapPoint(i).matrixTransform(s);this[\"#outline\"].setAttribute(\"points\",\"\");this[\"#outline\"].points.appendItem((0,common_1.ti)(r));this[\"#outline\"].points.appendItem((0,common_1.ti)(e))}}}})};this.hide=()=>{if(this.hud.hasAttribute(\"drawing\")){this.hud.removeAttribute(\"drawing\");this[\"#outline\"].setAttribute(\"points\",\"\");window.removeEventListener(\"pointermove\",this.Ft);__classPrivateFieldGet(this,_freehandHud_stage,\"f\").snapManager.snapEnd()}};this.clear=()=>{this[\"#outline\"].setAttribute(\"points\",\"\")};__classPrivateFieldSet(this,_freehandHud_stage,e,\"f\");this.hud.innerHTML='\\n  <style>\\n    #freehand-hud [uid=\"outline\"] {\\n      fill: none;\\n      stroke: red;\\n      stroke-width: 2.5;\\n      vector-effect: non-scaling-stroke;\\n      pointer-events: none;\\n    }\\n  </style>\\n\\n  <polyline uid=\"outline\"></polyline>\\n';this[\"#outline\"]=this.hud.querySelector('[uid=\"outline\"]')}}_freehandHud_stage=new WeakMap;exports[\"default\"]=freehandHud;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/freehandHud.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/freehandTool.js":
/*!***************************************************!*\
  !*** ./node_modules/foxyjs/tools/freehandTool.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,a,s){if(a===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return a===\"m\"?s:a===\"a\"?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,a,s,l){if(s===\"m\")throw new TypeError(\"Private method is not writable\");if(s===\"a\"&&!l)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!l:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return s===\"a\"?l.call(e,a):l?l.value=a:t.set(e,a),a};var _FreehandTool_instances,_FreehandTool_stage,_FreehandTool_K,_FreehandTool_ue,_FreehandTool_Q,_FreehandTool_ee,_FreehandTool_Xe,_FreehandTool_tt,_FreehandTool_it,_FreehandTool_he,_FreehandTool_be,_FreehandTool_st,_FreehandTool_Je;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class FreehandTool{get enabled(){return __classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.hud.hasAttribute(\"enabled\")}set enabled(e){e?__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.hud.setAttribute(\"enabled\",\"\"):__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.hud.removeAttribute(\"enabled\")}constructor(e){_FreehandTool_instances.add(this);_FreehandTool_stage.set(this,void 0);_FreehandTool_K.set(this,void 0);_FreehandTool_ue.set(this,void 0);_FreehandTool_Q.set(this,void 0);_FreehandTool_ee.set(this,void 0);_FreehandTool_Xe.set(this,void 0);_FreehandTool_tt.set(this,void 0);_FreehandTool_it.set(this,.5);this.enabledCallback=()=>{this.enabled=true;__classPrivateFieldSet(this,_FreehandTool_it,.5,\"f\");__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").splineTool.mode=\"draw-freehand\";__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").board.style.cursor=\"crosshair\";__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").workspaces.addEventListener(\"pointerdown\",__classPrivateFieldSet(this,_FreehandTool_Xe,e=>{__classPrivateFieldGet(this,_FreehandTool_instances,\"m\",_FreehandTool_be).call(this,e)},\"f\"));__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").splineTool.splineHud.addEventListener(\"nodepointerdown\",__classPrivateFieldSet(this,_FreehandTool_tt,e=>{__classPrivateFieldGet(this,_FreehandTool_instances,\"m\",_FreehandTool_st).call(this,e)},\"f\"))};this.disabledCallback=()=>{this.enabled=false;__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").splineTool.mode=\"edit\";__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").workspaces.removeEventListener(\"pointerdown\",__classPrivateFieldGet(this,_FreehandTool_Xe,\"f\"));__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").splineTool.splineHud.removeEventListener(\"nodepointerdown\",__classPrivateFieldGet(this,_FreehandTool_tt,\"f\"));__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.hide()};__classPrivateFieldSet(this,_FreehandTool_stage,e,\"f\")}}_FreehandTool_stage=new WeakMap,_FreehandTool_K=new WeakMap,_FreehandTool_ue=new WeakMap,_FreehandTool_Q=new WeakMap,_FreehandTool_ee=new WeakMap,_FreehandTool_Xe=new WeakMap,_FreehandTool_tt=new WeakMap,_FreehandTool_it=new WeakMap,_FreehandTool_instances=new WeakSet,_FreehandTool_he=function e({key:t,value:a}){\"smoothing\"===t?null!==a&&__classPrivateFieldSet(this,_FreehandTool_it,a,\"f\"):\"viewPathNodes\"===t&&(__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").splineTool.enabled=a)},_FreehandTool_be=function e(t){if(t.buttons>1)return;let a;let s;const l=new DOMPoint(t.clientX,t.clientY);__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").workspaces.addEventListener(\"pointermove\",a=e=>{const t=new DOMPoint(e.clientX,e.clientY);if((0,common_1.Kt)(l,t)>=3){__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").workspaces.removeEventListener(\"pointermove\",a);__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").workspaces.removeEventListener(\"pointerup\",s);__classPrivateFieldGet(this,_FreehandTool_instances,\"m\",_FreehandTool_Je).call(this,l)}});__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").workspaces.addEventListener(\"pointerup\",s=()=>{__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").workspaces.removeEventListener(\"pointermove\",a);__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").workspaces.removeEventListener(\"pointerup\",s)})},_FreehandTool_st=function e(t){__classPrivateFieldGet(this,_FreehandTool_instances,\"m\",_FreehandTool_Je).call(this,t.detail)},_FreehandTool_Je=function e(a){let t;let s;let c=__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").currentWorkspace;let v=__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").config.draw;let F=null;let f=[];let m=-1;let u=[];let p=!1;let l=new DOMPoint;if(a instanceof DOMPoint){__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.show(c,a)}else{const d=a;F=d.spline;const h=(0,common_1.Te)(F,!1);f=(0,common_1.$e)(h);m=d.subpathIndex;\"start\"===d.position&&(p=!0);const T=new DOMPoint(f[m].at(\"start\"===d.position?0:-1).values.at(-2),f[m].at(\"start\"===d.position?0:-1).values.at(-1)).matrixTransform((0,common_1.ut)(F,!0));__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.show(F,T)}__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").splineTool.splineHud.addEventListener(\"nodepointerup\",s=e=>{let t=e.detail;t.spline===F?t.subpathIndex===m?((\"start\"===t.position&&!1===p||\"end\"===t.position&&!0===p)&&_(),r()):(i(t),r()):(n(t),r())});__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").board.addEventListener(\"pointerup\",t=e=>{let t=new DOMPoint(e.clientX,e.clientY);if(null===F&&a instanceof DOMPoint){(0,common_1.Kt)(a,t)>=4&&o();r()}else{(0,common_1.Kt)(l,t)<4||o();r()}l=t});const o=()=>{var e;__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").undoManager.checkpoint(\"#freehand\",\"#freehand-tool\");let a=__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.points;if(null===F){f=[[{type:\"M\",values:[a[0][\"x\"],a[0][\"y\"]]}]];m=0;F=(0,common_1.Zi)(\"svg:path\");c.append(F);(0,common_1.ja)(F,v)}[\"R\",\"U\"].includes((e=f[m][1])===null||e===void 0?void 0:e.type)&&(f[m]=(0,common_1.Re)(f[m],!1));if(!1===p){if(1===a.length||2===a.length)f[m].push({type:\"L\",values:[a[a.length-1][\"x\"],a[a.length-1][\"y\"]]});else{if(a.length>=3){let t=(0,common_1.il)(a,6*__classPrivateFieldGet(this,_FreehandTool_it,\"f\")/__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").scale);for(let e of t)f[m].push({type:\"C\",values:[e[1][\"x\"],e[1][\"y\"],e[2][\"x\"],e[2][\"y\"],e[3][\"x\"],e[3][\"y\"]]})}}}else{if(!0===p){a=[...a.reverse()];if(1===a.length||2===a.length)f[m]=[{type:\"M\",values:[a[0][\"x\"],a[0][\"y\"]]},{type:\"L\",values:[f[m][0].values[0],f[m][0].values[1]]},...f[m].slice(1)];else{if(a.length>=3){let e=(0,common_1.il)(a,6*__classPrivateFieldGet(this,_FreehandTool_it,\"f\")/__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").scale);f[m]=[{type:\"M\",values:[a[0][\"x\"],a[0][\"y\"]]},...e[\"map\"](e=>({type:\"C\",values:[e[1][\"x\"],e[1][\"y\"],e[2][\"x\"],e[2][\"y\"],e[3][\"x\"],e[3][\"y\"]]})),...f[m].slice(1)]}}}}let s=[].concat(...f);if(\"line\"===F.localName||\"polyline\"===F.localName){let t=(0,common_1.Zi)(\"svg:path\");for(let e of F.attributes)!1===[\"x1\",\"y1\",\"x2\",\"y2\",\"points\"].includes(e.name)&&t.setAttribute(e.name,e.value);(0,common_1.Ae)(t,s,__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").geometryPrecision);F.replaceWith(t);u.push(F);F=t}else\"path\"===F.localName&&(0,common_1.Ae)(F,s,__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").geometryPrecision);const t=[...Array.from(__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.keys())].filter(e=>!1===u.includes(e));null===F.closest(\"defs\")&&void 0===Array.from(__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.keys()).find(e=>e===F||e.contains(F))&&t.push(F);if(!1===(0,common_1.me)(Array.from(__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.keys()),t)){__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.set(F)}};const i=e=>{var s;__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").undoManager.checkpoint(\"#freehand\",\"#freehand-tool\");let l=__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.points;{let t=f[m];let a=f[e.subpathIndex];f=f.filter(e=>e!==a);m=f.indexOf(t);[\"R\",\"U\"].includes((s=f[m][1])===null||s===void 0?void 0:s.type)&&(f[m]=(0,common_1.Re)(f[m],!1));(!0===p&&\"start\"===e.position||!1===p&&\"end\"===e.position)&&(a=(0,common_1.Ie)(a));if(!1===p){if(l[0]=new DOMPoint(t.at(-1).values.at(-2),t.at(-1).values.at(-1)),l[l.length-1]=new DOMPoint(a.at(0).values.at(-2),a.at(0).values.at(-1)),1===l.length||2===l.length)f[m]=[...t,{type:\"L\",values:[a[0].values.at(-2),a[0].values.at(-1)]},...a.slice(1)];else{if(l.length>=3){let e=(0,common_1.il)(l,6*__classPrivateFieldGet(this,_FreehandTool_it,\"f\")/__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").scale);f[m]=[...t,...e.map(e=>({type:\"C\",values:[e[1][\"x\"],e[1][\"y\"],e[2][\"x\"],e[2][\"y\"],e[3][\"x\"],e[3][\"y\"]]})),...a.slice(1)]}}}else{if(!0===p){l=[...l.reverse()];l[0]=new DOMPoint(a.at(-1).values.at(-2),a.at(-1).values.at(-1));l[l.length-1]=new DOMPoint(t.at(0).values.at(-2),t.at(0).values.at(-1));if(1===l.length||2===l.length)f[m]=[...a,{type:\"L\",values:[t[0].values.at(-2),t[0].values.at(-1)]},...t.slice(1)];else{if(l.length>=3){let e=(0,common_1.il)(l,6*__classPrivateFieldGet(this,_FreehandTool_it,\"f\")/__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").scale);f[m]=[...a,...e.map(e=>({type:\"C\",values:[e[1][\"x\"],e[1][\"y\"],e[2][\"x\"],e[2][\"y\"],e[3][\"x\"],e[3][\"y\"]]})),...t.slice(1)]}}}}}let t=[].concat(...f);\"path\"===F.localName?(0,common_1.Ae)(F,t,__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").geometryPrecision):F.setAttribute(\"points\",t.map(e=>e[\"values\"]).flat().join(\" \"));__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").splineTool.selectedNodes=[]};const n=e=>{var t;__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").undoManager.checkpoint(\"#freehand\",\"#freehand-tool\");let a=__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.points;let s=F?F.ownerSVGElement.querySelector('textPath[href=\"#'+CSS.escape(F.id)+'\"]'):null;let l=e.spline;let o=__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").workspaces.querySelector('textPath[href=\"#'+CSS.escape(l.id)+'\"]');let i=(0,common_1.$e)((0,common_1.Te)(l));let n=(0,common_1.pt)(l,F||c,!0);if(null===F){f=[[{type:\"M\",values:[a[0][\"x\"],a[0][\"y\"]]}]];m=0;F=(0,common_1.Zi)(\"svg:path\");c.append(F);(0,common_1.ja)(F,v)}let _=i[e.subpathIndex];i=i.filter(e=>e!==_);[\"R\",\"U\"].includes((t=_[1])===null||t===void 0?void 0:t.type)&&(_=(0,common_1.Re)(_,!1));\"end\"===e.position&&(_=(0,common_1.Ie)(_));_=(0,common_1.Mt)(_,n);p&&(f[m]=(0,common_1.Ie)(f[m]));let r=f[m];a[0]=new DOMPoint(r.at(-1).values.at(-2),r.at(-1).values.at(-1));a[a.length-1]=new DOMPoint(_.at(0).values.at(-2),_.at(0).values.at(-1));if(1===a.length||2===a.length)f[m]=[...r,{type:\"L\",values:[_[0].values.at(-2),_[0].values.at(-1)]},..._.slice(1)];else{if(a.length>=3){let e=(0,common_1.il)(a,6*__classPrivateFieldGet(this,_FreehandTool_it,\"f\")/__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").scale);f[m]=[...r,...e.map(e=>({type:\"C\",values:[e[1][\"x\"],e[1][\"y\"],e[2][\"x\"],e[2][\"y\"],e[3][\"x\"],e[3][\"y\"]]})),..._.slice(1)]}}o&&\"end\"===e.position&&(f[m]=(0,common_1.Ie)(f[m]));f[m]=(0,common_1.Re)(f[m]);for(let e of f[m])e.values=e.values.map(e=>(0,common_1.te)(e,__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").geometryPrecision));let d=[].concat(...f);if(\"line\"===F.localName||\"polyline\"===F.localName){let t=(0,common_1.Zi)(\"svg:path\");for(let e of F.attributes)!1===[\"x1\",\"y1\",\"x2\",\"y2\",\"points\"].includes(e.name)&&t.setAttribute(e.name,e.value);(0,common_1.Ae)(t,d,__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").geometryPrecision);F.replaceWith(t);u.push(F);F=t}else\"path\"===F.localName&&(0,common_1.Ae)(F,d,__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").geometryPrecision);if(0===i.length)l.remove();else{let e=[].concat(...i);(0,common_1.Ae)(l,e,__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").geometryPrecision)}if(!s&&o&&!1===l.isConnected){let e=__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").generateUniqueID(F.localName+\"-\");F.setAttribute(\"id\",e);o.setAttribute(\"href\",\"#\"+e);o.closest(\"text\").removeAttribute(\"transform\")}let h=[...Array.from(__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.keys())].filter(e=>!1===u.includes(e));null===F.closest(\"defs\")&&void 0===h.find(e=>e===F||e.contains(F))&&h.push(F);!1===l.isConnected&&(h=h.filter(e=>e!==l));if(!1===(0,common_1.me)(Array.from(__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.keys()),h)){__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.sets(h)}__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").splineTool.selectedNodes=[]};const _=()=>{__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").undoManager.checkpoint(\"#freehand\",\"#freehand-tool\");const t=__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.points;let a=f[m];if(!1===p){t[0]=new DOMPoint(a.at(-1).values.at(-2),a.at(-1).values.at(-1));t[t.length-1]=new DOMPoint(a.at(0).values.at(-2),a.at(0).values.at(-1));if(1===t.length||2===t.length)a.push({type:\"L\",values:[a[0].values.at(-2),a[0].values.at(-1)]},{type:\"Z\",values:[]});else{if(t.length>=3){let e=(0,common_1.il)(t,6*__classPrivateFieldGet(this,_FreehandTool_it,\"f\")/__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").scale);a.push(...e.map(e=>({type:\"C\",values:[e[1][\"x\"],e[1][\"y\"],e[2][\"x\"],e[2][\"y\"],e[3][\"x\"],e[3][\"y\"]]})),{type:\"Z\",values:[]})}}}else{if(1===t.length||2===t.length)a.push({type:\"L\",values:[a[0].values.at(-2),a[0].values.at(-1)]},{type:\"Z\",values:[]});else{if(t.length>=3){let e=(0,common_1.il)(t,6*__classPrivateFieldGet(this,_FreehandTool_it,\"f\")/__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").scale);a.push(...(0,common_1.Ie)((0,common_1.Re)([{type:\"M\",values:[a[0].values.at(-2),a[0].values.at(-1)]},...e[\"map\"](e=>({type:\"C\",values:[e[1][\"x\"],e[1][\"y\"],e[2][\"x\"],e[2][\"y\"],e[3][\"x\"],e[3][\"y\"]]}))]))[\"slice\"](1),{type:\"Z\",values:[]})}}}f[m]=(0,common_1.Re)(f[m]);for(let e of f[m])e.values=e.values.map(e=>(0,common_1.te)(e,__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").geometryPrecision));let e=[].concat(...f);if(\"line\"===F.localName){let t=(0,common_1.Zi)(\"svg:path\");for(let e of F.attributes)!1===[\"x1\",\"y1\",\"x2\",\"y2\"].includes(e.name)&&t.setAttribute(e.name,e.value);(0,common_1.Ae)(t,e,__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").geometryPrecision);F.replaceWith(t);const s=structuredClone(Array.from(__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.keys()));__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.clear();s.forEach(e=>{__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.set(e===F?t:e)});F=t}else{if(\"polyline\"===F.localName){let t=(0,common_1.Zi)(\"svg:path\");for(let e of F.attributes)!1===[\"points\"].includes(e.name)&&t.setAttribute(e.name,e.value);(0,common_1.Ae)(t,e,__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").geometryPrecision);F.replaceWith(t);const s=structuredClone(Array.from(__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.keys()));__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.clear();s.forEach(e=>{__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").selectedElements.set(e===F?t:e)});F=t}else\"path\"===F.localName&&(0,common_1.Ae)(F,e,__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").geometryPrecision)}__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").splineTool.selectedNodes=[]};const r=()=>{__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").board.removeEventListener(\"pointerup\",t);__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").splineTool.splineHud.removeEventListener(\"nodepointerdown\",undefined);__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").splineTool.splineHud.removeEventListener(\"nodepointerup\",s);__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").board.removeEventListener(\"redo\",undefined);__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.clear();__classPrivateFieldGet(this,_FreehandTool_stage,\"f\").freehandHud.hide()}};exports[\"default\"]=FreehandTool;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/freehandTool.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/otherShapeTool.js":
/*!*****************************************************!*\
  !*** ./node_modules/foxyjs/tools/otherShapeTool.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,a,l,r){if(l===\"m\")throw new TypeError(\"Private method is not writable\");if(l===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return l===\"a\"?r.call(e,a):r?r.value=a:t.set(e,a),a};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,a,l){if(a===\"a\"&&!l)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!l:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return a===\"m\"?l:a===\"a\"?l.call(e):l?l.value:t.get(e)};var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var _OtherShapeTool_instances,_OtherShapeTool_stage,_OtherShapeTool_me,_OtherShapeTool_zt,_OtherShapeTool_types,_OtherShapeTool_type,_OtherShapeTool_Pt,_OtherShapeTool_Ot,_OtherShapeTool_Et,_OtherShapeTool_Tt,_OtherShapeTool_At,_OtherShapeTool_$t,_OtherShapeTool_Lt,_OtherShapeTool_Rt,_OtherShapeTool_It,_OtherShapeTool_Bt,_OtherShapeTool_Ut,_OtherShapeTool__t;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");const ee_1=__importDefault(__webpack_require__(/*! ../utils/ee */ \"./node_modules/foxyjs/utils/ee.js\"));const Ba_1=__importDefault(__webpack_require__(/*! ../utils/Ba */ \"./node_modules/foxyjs/utils/Ba.js\"));let{abs:fr,min:br}=Math;class OtherShapeTool{constructor(e){_OtherShapeTool_instances.add(this);_OtherShapeTool_stage.set(this,void 0);_OtherShapeTool_me.set(this,void 0);_OtherShapeTool_zt.set(this,!1);_OtherShapeTool_types.set(this,[\"frame\",\"ring\",\"pie\",\"crescent\",\"triangle\",\"n-gon\",\"star\",\"cog\",\"arrow\",\"cross\",\"spiral\"]);_OtherShapeTool_type.set(this,\"triangle\");this.useType=(e=\"triangle\")=>{if(!__classPrivateFieldGet(this,_OtherShapeTool_types,\"f\").includes(e))throw new Error(\"The type is not supported\");__classPrivateFieldSet(this,_OtherShapeTool_type,e,\"f\")};this.connectedCallback=()=>{};this.attributeChangedCallback=(e,t,a)=>{};__classPrivateFieldSet(this,_OtherShapeTool_stage,e,\"f\")}enabledCallback(){let e=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;e[\"style\"][\"cursor\"]=\"crosshair\";e.addEventListener(\"pointerdown\",__classPrivateFieldSet(this,_OtherShapeTool_me,e=>{__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool_Pt).call(this,e)},\"f\"))}disabledCallback(){__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board.removeEventListener(\"pointerdown\",__classPrivateFieldGet(this,_OtherShapeTool_me,\"f\"))}}_OtherShapeTool_stage=new WeakMap,_OtherShapeTool_me=new WeakMap,_OtherShapeTool_zt=new WeakMap,_OtherShapeTool_types=new WeakMap,_OtherShapeTool_type=new WeakMap,_OtherShapeTool_instances=new WeakSet,_OtherShapeTool_Pt=function e(l){if(l[\"buttons\"]>1||!0===__classPrivateFieldGet(this,_OtherShapeTool_zt,\"f\"))return;let r;let o;let i=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let s=new DOMPoint(l[\"clientX\"],l[\"clientY\"]);i.addEventListener(\"pointermove\",r=e=>{let t=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);if((0,common_1.Kt)(s,t)<3)return;i.removeEventListener(\"pointermove\",r);i.removeEventListener(\"pointerup\",o);let a=__classPrivateFieldGet(this,_OtherShapeTool_type,\"f\");\"frame\"===a?__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool_Ot).call(this,l):\"ring\"===a?__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool_Et).call(this,l):\"pie\"===a?__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool_Tt).call(this,l):\"crescent\"===a?__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool_At).call(this,l):\"triangle\"===a?__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool_$t).call(this,l):\"n-gon\"===a?__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool_Lt).call(this,l):\"star\"===a?__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool_Rt).call(this,l):\"cog\"===a?__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool_It).call(this,l):\"arrow\"===a?__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool_Bt).call(this,l):\"cross\"===a?__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool_Ut).call(this,l):\"spiral\"===a&&__classPrivateFieldGet(this,_OtherShapeTool_instances,\"m\",_OtherShapeTool__t).call(this,l)});i.addEventListener(\"pointerup\",o=()=>{i.removeEventListener(\"pointermove\",r);i.removeEventListener(\"pointerup\",o)})},_OtherShapeTool_Ot=function e(t){let a;let l=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let r=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace;let{geometryPrecision:o,transformPrecision:i}=l;let s=\"planar\";const n=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").config.draw;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").undoManager.checkpoint(\"#frame\",\"#other-shape-tool.frame\");__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapStart(!1);let c=new DOMPoint(t[\"clientX\"],t[\"clientY\"]);let p=1;let m=1;let f=\"planar\"===s?c[\"x\"]:c[\"x\"]-m/2;let v=\"planar\"===s?c[\"y\"]:c[\"y\"]-p/2;let _=10;let d=0;let S=(0,common_1.Zi)(\"svg:path\");(0,common_1.to)(S,{type:\"frame\",values:[f,v,m,p,_,_,d,d,d,d]},o);r[\"append\"](S);(0,common_1.ja)(S,n);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.set(S);let h=(0,common_1.ut)(S)[\"inverse\"]();let g=(0,common_1.ct)(S)[\"multiply\"](h);S[\"setAttribute\"](\"transform\",g[\"toString\"]());__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").ctrlKey&&(\"polar\"===s?s=\"planar\":\"planar\"===s&&(s=\"polar\"));l.addEventListener(\"pointermove\",a=e=>{let h=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);h=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapPoint(h);if(\"planar\"===s){let e=h[\"x\"]-c[\"x\"]||1;let t=h[\"y\"]-c[\"y\"]||1;if(m=fr(e),p=fr(t),__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey){let e=br(m,p);m=e;p=e}f=e<0?c[\"x\"]-m:c[\"x\"];v=t<0?c[\"y\"]-p:c[\"y\"]}else{if(\"polar\"===s){let e=new DOMPoint(c[\"x\"],c[\"y\"]);let t=new DOMPoint(h[\"x\"],h[\"y\"]);let a=(0,common_1.Kt)(e,t);let l=new DOMPoint(e[\"x\"],e[\"y\"]-a);let r=l[\"matrixTransform\"]((new DOMMatrix)[\"translate\"](e[\"x\"],e[\"y\"])[\"rotate\"](-45)[\"translate\"](-e[\"x\"],-e[\"y\"]));let o=l[\"matrixTransform\"]((new DOMMatrix)[\"translate\"](e[\"x\"],e[\"y\"])[\"rotate\"](45)[\"translate\"](-e[\"x\"],-e[\"y\"]));let i=l[\"matrixTransform\"]((new DOMMatrix)[\"translate\"](e[\"x\"],e[\"y\"])[\"rotate\"](135)[\"translate\"](-e[\"x\"],-e[\"y\"]));let s=(0,common_1.Kt)(r,o);f=c[\"x\"]-s/2;v=c[\"y\"]-s/2;m=s;p=s;let n=(0,common_1.ni)(e,i,t);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey&&(n=(0,common_1.ai)(n,45));let _=new DOMMatrix;_[\"translateSelf\"](e[\"x\"],e[\"y\"]);_[\"rotateSelf\"](n);_[\"translateSelf\"](-e[\"x\"],-e[\"y\"]);S[\"setAttribute\"](\"transform\",g[\"multiply\"](_)[\"toString\"]())}}(0,common_1.to)(S,{type:\"frame\",values:[f,v,m,p,_,_,d,d,d,d]},o)});let O=()=>{l.removeEventListener(\"pointermove\",a);l.removeEventListener(\"pointerup\",O);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapEnd()};l.addEventListener(\"pointerup\",O)},_OtherShapeTool_Et=function e(s){let t;let a=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let l=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace;let r=\"planar\";let o=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").config.draw;let n=.6;const{geometryPrecision:_,transformPrecision:i}=a;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").undoManager.checkpoint(\"#ring\",\"#other-shape-tool.ring\");let h=0;let c=0;let p=1;let m=1;let f=n*p;let v=n*m;let d=(0,common_1.Zi)(\"svg:path\");(0,common_1.to)(d,{type:\"ring\",values:[h,c,f,v,p,m]},_);l[\"append\"](d);(0,common_1.ja)(d,o);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.set(d);let S=(0,common_1.ut)(d)[\"inverse\"]();let g=(0,common_1.ct)(d)[\"multiplySelf\"](S);d[\"setAttribute\"](\"transform\",g[\"toString\"]());__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").ctrlKey&&(\"polar\"===r?r=\"planar\":\"planar\"===r&&(r=\"polar\"));a.addEventListener(\"pointermove\",t=i=>{if(\"planar\"===r){let e=i[\"clientX\"]-s[\"clientX\"]||1;let t=i[\"clientY\"]-s[\"clientY\"]||1;let a=fr(e);let l=fr(t);if(__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey){let e=br(a,l);a=e;l=e}let r=e<0?s[\"clientX\"]-a:s[\"clientX\"];let o=t<0?s[\"clientY\"]-l:s[\"clientY\"];h=r+a/2;c=o+l/2;p=a/2;m=l/2;f=n*p;v=n*m}else{if(\"polar\"===r){let e=new DOMPoint(s[\"clientX\"],s[\"clientY\"]);let t=new DOMPoint(e[\"x\"],e[\"y\"]-100);let a=new DOMPoint(i[\"clientX\"],i[\"clientY\"]);let l=new ee_1.default(e,a);let r=(0,common_1.ni)(e,t,a);h=e[\"x\"];c=e[\"y\"];p=l[\"length\"];m=l[\"length\"];f=n*p;v=n*m;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey&&(r=(0,common_1.ai)(r,45));let o=new DOMMatrix;o[\"translateSelf\"](e[\"x\"],e[\"y\"]);o[\"rotateSelf\"](r);o[\"translateSelf\"](-e[\"x\"],-e[\"y\"]);d[\"setAttribute\"](\"transform\",g[\"multiply\"](o)[\"toString\"]())}}(0,common_1.to)(d,{type:\"ring\",values:[h,c,f,v,p,m]},_)});let O=()=>{a.removeEventListener(\"pointermove\",t);a.removeEventListener(\"pointerup\",O)};a.addEventListener(\"pointerup\",O)},_OtherShapeTool_Tt=function e(s){let t;let a=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let l=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace;let o=\"planar\";let r=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").config.draw;let{geometryPrecision:i,transformPrecision:n}=a;let _=0;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").undoManager.checkpoint(\"#pie\",\"#other-shape-tool.pie\");let h=0;let c=0;let p=200;let m=_*p;let f=90;let v=(0,common_1.Zi)(\"svg:path\");l[\"append\"](v);(0,common_1.ja)(v,r);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.set(v);let d=(0,common_1.ut)(v)[\"inverse\"]();let S=(0,common_1.ct)(v)[\"multiplySelf\"](d);v[\"setAttribute\"](\"transform\",S[\"toString\"]());__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").ctrlKey&&(\"polar\"===o?o=\"planar\":\"planar\"===o&&(o=\"polar\"));a.addEventListener(\"pointermove\",t=r=>{if(\"planar\"===o){let e=r[\"clientX\"]-s[\"clientX\"]||1;let t=r[\"clientY\"]-s[\"clientY\"]||1;let o=fr(e);let i=fr(t);if(__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey){let e=br(o,i);o=e;i=e}let a=e<0?s[\"clientX\"]-o:s[\"clientX\"];let l=t<0?s[\"clientY\"]-i:s[\"clientY\"];if(p=o/2,m=_*p,h=a+o/2,c=l+i/2,o===i)v[\"setAttribute\"](\"transform\",S[\"toString\"]());else{let e=1;let t=i/o;let a=-h*(e-1);let l=-c*(t-1);let r=DOMMatrix[\"fromMatrix\"](S);r[\"translateSelf\"](a,l);r[\"scaleSelf\"](e,t);v[\"setAttribute\"](\"transform\",r[\"toString\"]())}}else{if(\"polar\"===o){let e=new DOMPoint(s[\"clientX\"],s[\"clientY\"]);let t=new DOMPoint(e[\"x\"],e[\"y\"]-100);let a=new DOMPoint(r[\"clientX\"],r[\"clientY\"]);let l=new ee_1.default(e,a);h=e[\"x\"];c=e[\"y\"];p=l[\"length\"];m=_*p;f=(0,common_1.ni)(e,t,a);f<=0&&(f=360+f)}}(0,common_1.to)(v,{type:\"pie\",values:[h,c,m,p,f,360]},i)});let g=()=>{a.removeEventListener(\"pointermove\",t);a.removeEventListener(\"pointerup\",g)};a.addEventListener(\"pointerup\",g)},_OtherShapeTool_At=function e(n){let t;let a=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let l=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace;let r=\"planar\";let o=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").config.draw;let i=300;let _=.7;let{geometryPrecision:h,transformPrecision:s}=a;let c=0,p=0,m=200;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").undoManager.checkpoint(\"#crescent\",\"#other-shape-tool.crescent\");a[\"setPointerCapture\"](n[\"pointerId\"]);let f=(0,common_1.Zi)(\"svg:path\");l[\"append\"](f);(0,common_1.ja)(f,o);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.set(f);let v=(0,common_1.ut)(f)[\"inverse\"]();let d=(0,common_1.ct)(f)[\"multiplySelf\"](v);f[\"setAttribute\"](\"transform\",d[\"toString\"]());__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").ctrlKey&&(\"polar\"===r?r=\"planar\":\"planar\"===r&&(r=\"polar\"));a.addEventListener(\"pointermove\",t=s=>{if(\"planar\"===r){let e=s[\"clientX\"]-n[\"clientX\"]||1;let t=s[\"clientY\"]-n[\"clientY\"]||1;let o=fr(e);let i=fr(t);if(__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey){let e=br(o,i);o=e;i=e}let a=e<0?n[\"clientX\"]-o:n[\"clientX\"];let l=t<0?n[\"clientY\"]-i:n[\"clientY\"];if(m=o/2,c=a+o/2,p=l+i/2,o===i)f[\"setAttribute\"](\"transform\",d[\"toString\"]());else{let e=1;let t=i/o;let a=-c*(e-1);let l=-p*(t-1);let r=new DOMMatrix;r[\"translateSelf\"](a,l);r[\"scaleSelf\"](e,t);f[\"setAttribute\"](\"transform\",d[\"multiply\"](r)[\"toString\"]())}}else{if(\"polar\"===r){let e=new DOMPoint(n[\"clientX\"],n[\"clientY\"]);let t=new DOMPoint(e[\"x\"],e[\"y\"]-100);let a=new DOMPoint(s[\"clientX\"],s[\"clientY\"]);let l=new ee_1.default(e,a);c=e[\"x\"];p=e[\"y\"];m=l[\"length\"];let r=(0,common_1.ni)(e,t,a);r-=180;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey&&(r=(0,common_1.ai)(r,45));let o=new DOMMatrix;o[\"translateSelf\"](e[\"x\"],e[\"y\"]);o[\"rotateSelf\"](r);o[\"translateSelf\"](-e[\"x\"],-e[\"y\"]);f[\"setAttribute\"](\"transform\",d[\"multiply\"](o)[\"toString\"]())}}(0,common_1.to)(f,{type:\"crescent\",values:[c,p,m,i,_]},h)});let S=()=>{a.removeEventListener(\"pointermove\",t);a.removeEventListener(\"pointerup\",S)};a.addEventListener(\"pointerup\",S)},_OtherShapeTool_$t=function e(t){let a;let l;let r=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let o=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").workspaces;let{geometryPrecision:i,transformPrecision:s}=r;let _=\"planar\";let n=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").config.draw;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").undoManager.checkpoint(\"#triangle\",\"#other-shape-tool.triangle\");__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapStart(!1);let h=new DOMPoint(t[\"clientX\"],t[\"clientY\"]);h=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapPoint(h);let c=1;let p=1;let m=\"planar\"===_?h[\"x\"]:h[\"x\"]-p/2;let f=\"planar\"===_?h[\"y\"]:h[\"y\"]-c/2;let v=.5;let d=0;let S=(0,common_1.Zi)(\"svg:path\");(0,common_1.to)(S,{type:\"triangle\",values:[m,f,p,c,v,d]},i);o[\"append\"](S);(0,common_1.ja)(S,n);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.set(S);let g=(0,common_1.ut)(S)[\"inverse\"]();let O=(0,common_1.ct)(S)[\"multiply\"](g);S[\"setAttribute\"](\"transform\",O[\"toString\"]());__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").ctrlKey&&(\"polar\"===_?_=\"planar\":\"planar\"===_&&(_=\"polar\"));window.addEventListener(\"keydown\",l=e=>{let t=Ba_1.default[\"fromEvent\"](e);if(t[\"matches\"](\"ArrowLeft\")){e[\"preventDefault\"]();e[\"stopPropagation\"]();if(d>0){d=(0,common_1.ie)(d-.04,0,.5,2);(0,common_1.to)(S,{type:\"triangle\",values:[m,f,p,c,v,d]},i)}}else{if(t[\"matches\"](\"ArrowRight\")){e[\"preventDefault\"]();e[\"stopPropagation\"]();if(d<.5){d=(0,common_1.ie)(d+.04,0,.5,2);(0,common_1.to)(S,{type:\"triangle\",values:[m,f,p,c,v,d]},i)}}}});r.addEventListener(\"pointermove\",a=e=>{let n=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);n=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapPoint(n);if(\"planar\"===_){let e=n[\"x\"]-h[\"x\"]||1;let t=n[\"y\"]-h[\"y\"]||1;p=fr(e);c=fr(t);if(__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey){let e=br(p,c);p=e;c=e}m=e<0?h[\"x\"]-p:h[\"x\"];f=t<0?h[\"y\"]-c:h[\"y\"]}else{if(\"polar\"===_){let e=new DOMPoint(h[\"x\"],h[\"y\"]);let t=new DOMPoint(n[\"x\"],n[\"y\"]);let a=(0,common_1.Kt)(e,t);let l=new DOMPoint(e[\"x\"],e[\"y\"]-a);let r=l[\"matrixTransform\"]((new DOMMatrix)[\"translate\"](e[\"x\"],e[\"y\"])[\"rotate\"](120)[\"translate\"](-e[\"x\"],-e[\"y\"]));let o=r[\"matrixTransform\"]((new DOMMatrix)[\"translate\"](e[\"x\"],e[\"y\"])[\"rotate\"](120)[\"translate\"](-e[\"x\"],-e[\"y\"]));let i=(0,common_1.ni)(e,r,t);p=r[\"x\"]-o[\"x\"]||1;c=r[\"y\"]-l[\"y\"]||1;m=o[\"x\"];f=l[\"y\"];__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey&&(i=(0,common_1.ai)(i,45));let s=new DOMMatrix;s[\"translateSelf\"](e[\"x\"],e[\"y\"]);s[\"rotateSelf\"](i);s[\"translateSelf\"](-e[\"x\"],-e[\"y\"]);S[\"setAttribute\"](\"transform\",O[\"multiply\"](s)[\"toString\"]())}}(0,common_1.to)(S,{type:\"triangle\",values:[m,f,p,c,v,d]},i)});let P=()=>{r.removeEventListener(\"pointermove\",a);r.removeEventListener(\"pointerup\",P);window.removeEventListener(\"keydown\",l);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapEnd()};r.addEventListener(\"pointerup\",P)},_OtherShapeTool_Lt=function e(s){let t;let a;let l=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let r=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace;let o=\"planar\";let i=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").config.draw;let{geometryPrecision:n,transformPrecision:_}=l;let h=0;let c=0;let p=0;let m=0;let f=5;let v=0;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").undoManager.checkpoint(\"#n-gon\",\"#other-shape-tool.n-gon\");let d=(0,common_1.Zi)(\"svg:path\");(0,common_1.to)(d,{type:\"n-gon\",values:[h,c,p,m,f,v]},n);r[\"append\"](d);(0,common_1.ja)(d,i);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.set(d);let S=(0,common_1.ut)(d)[\"inverse\"]();let g=(0,common_1.ct)(d)[\"multiply\"](S);d[\"setAttribute\"](\"transform\",g[\"toString\"]());__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").ctrlKey&&(\"polar\"===o?o=\"planar\":\"planar\"===o&&(o=\"polar\"));window.addEventListener(\"keydown\",a=e=>{let t=Ba_1.default[\"fromEvent\"](e);e[\"preventDefault\"]();e[\"stopPropagation\"]();if(t[\"matches\"](\"ArrowUp\")){f+=1;(0,common_1.to)(d,{type:\"n-gon\",values:[h,c,p,m,f,v]},n)}else{if(t[\"matches\"](\"ArrowDown\")){if(f>5){f-=1;(0,common_1.to)(d,{type:\"n-gon\",values:[h,c,p,m,f,v]},n)}}else{if(t[\"matches\"](\"ArrowLeft\")){if(v>0){v=(0,common_1.ie)(v-.04,0,.5,2);(0,common_1.to)(d,{type:\"n-gon\",values:[h,c,p,m,f,v]},n)}}else{if(t[\"matches\"](\"ArrowRight\")){if(v<.5){v=(0,common_1.ie)(v+.04,0,.5,2);(0,common_1.to)(d,{type:\"n-gon\",values:[h,c,p,m,f,v]},n)}}}}}});l.addEventListener(\"pointermove\",t=i=>{if(\"planar\"===o){let e=i[\"clientX\"]-s[\"clientX\"]||1;let t=i[\"clientY\"]-s[\"clientY\"]||1;let a=fr(e);let l=fr(t);if(__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey){let e=br(a,l);a=e;l=e}let r=e<0?s[\"clientX\"]-a:s[\"clientX\"];let o=t<0?s[\"clientY\"]-l:s[\"clientY\"];p=a/2;m=l/2;h=r+p;c=o+m}else{if(\"polar\"===o){let e=new DOMPoint(s[\"clientX\"],s[\"clientY\"]);let t=(0,common_1.fo)(2,h,c,p,m,f);let a=new DOMPoint(i[\"clientX\"],i[\"clientY\"]);let l=new ee_1.default(e,a);let r=(0,common_1.ni)(e,t,a);h=e[\"x\"];c=e[\"y\"];p=l[\"length\"];m=l[\"length\"];__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey&&(r=(0,common_1.ai)(r,180/f));let o=new DOMMatrix;o[\"translateSelf\"](e[\"x\"],e[\"y\"]);o[\"rotateSelf\"](r);o[\"translateSelf\"](-e[\"x\"],-e[\"y\"]);d[\"setAttribute\"](\"transform\",g[\"multiply\"](o)[\"toString\"]())}}(0,common_1.to)(d,{type:\"n-gon\",values:[h,c,p,m,f,v]},n)});let O=()=>{l.removeEventListener(\"pointermove\",t);l.removeEventListener(\"pointerup\",O);window.removeEventListener(\"keydown\",a)};l.addEventListener(\"pointerup\",O)},_OtherShapeTool_Rt=function e(s){let t;let a;let l=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let r=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace;let o=\"planar\";let i=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").config.draw;let{geometryPrecision:n,transformPrecision:_}=l;let h=0;let c=0;let p=0;let m=0;let f=.4;let v=5;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").undoManager.checkpoint(\"#star\",\"#other-shape-tool.star\");let d=(0,common_1.Zi)(\"svg:path\");(0,common_1.to)(d,{type:\"star\",values:[h,c,p,m,f,v]},n);r[\"append\"](d);(0,common_1.ja)(d,i);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.set(d);let S=(0,common_1.ut)(d)[\"inverse\"]();let g=(0,common_1.ct)(d)[\"multiply\"](S);d[\"setAttribute\"](\"transform\",g[\"toString\"]());__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").ctrlKey&&(\"polar\"===o?o=\"planar\":\"planar\"===o&&(o=\"polar\"));window.addEventListener(\"keydown\",a=e=>{let t=Ba_1.default[\"fromEvent\"](e);if(t.matches(\"ArrowUp\")){e[\"preventDefault\"]();e[\"stopPropagation\"]();v+=1;(0,common_1.to)(d,{type:\"star\",values:[h,c,p,m,f,v]},n)}else{if(t[\"matches\"](\"ArrowDown\")){e[\"preventDefault\"]();e[\"stopPropagation\"]();if(v>3){v-=1;(0,common_1.to)(d,{type:\"star\",values:[h,c,p,m,f,v]},n)}}}});l.addEventListener(\"pointermove\",t=i=>{if(\"planar\"===o){let e=i[\"clientX\"]-s[\"clientX\"]||1;let t=i[\"clientY\"]-s[\"clientY\"]||1;let a=fr(e);let l=fr(t);if(__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey){let e=br(a,l);a=e;l=e}let r=e<0?s[\"clientX\"]-a:s[\"clientX\"];let o=t<0?s[\"clientY\"]-l:s[\"clientY\"];p=a/2;m=l/2;h=r+p;c=o+m}else{if(\"polar\"===o){let e=new DOMPoint(s[\"clientX\"],s[\"clientY\"]);let t=new DOMPoint(e[\"x\"],e[\"y\"]-100);let a=new DOMPoint(i[\"clientX\"],i[\"clientY\"]);let l=new ee_1.default(e,a);let r=(0,common_1.ni)(e,t,a);h=e[\"x\"];c=e[\"y\"];p=l[\"length\"];m=l[\"length\"];__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey&&(r=(0,common_1.ai)(r,180/v/2));let o=new DOMMatrix;o[\"translateSelf\"](e[\"x\"],e[\"y\"]);o[\"rotateSelf\"](r);o[\"translateSelf\"](-e[\"x\"],-e[\"y\"]);d[\"setAttribute\"](\"transform\",g[\"multiply\"](o)[\"toString\"]())}}(0,common_1.to)(d,{type:\"star\",values:[h,c,p,m,f,v]},n)});const O=()=>{window.removeEventListener(\"keydown\",a);l.removeEventListener(\"pointermove\",t);l.removeEventListener(\"pointerup\",O)};l.addEventListener(\"pointerup\",O)},_OtherShapeTool_It=function e(n){let t;let a=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let l=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace;let r=\"planar\";let o=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").config.draw;let{geometryPrecision:i,transformPrecision:s}=a;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").undoManager.checkpoint(\"#cog\",\"#other-shape-tool.cog\");let _=.3;let h=.65;let c=1;let p=.38;let m=8;let f=0;let v=0;let d=0;let S=0;let g=0;let O=(0,common_1.Zi)(\"svg:path\");l[\"append\"](O);(0,common_1.ja)(O,o);a[\"selectedElements\"]=[O];let P=(0,common_1.ut)(O)[\"inverse\"]();let T=(0,common_1.ct)(O)[\"multiplySelf\"](P);O[\"setAttribute\"](\"transform\",T[\"toString\"]());__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").ctrlKey&&(\"polar\"===r?r=\"planar\":\"planar\"===r&&(r=\"polar\"));a.addEventListener(\"pointermove\",t=s=>{if(\"planar\"===r){let e=s[\"clientX\"]-n[\"clientX\"]||1;let t=s[\"clientY\"]-n[\"clientY\"]||1;let o=fr(e);let i=fr(t);if(__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey){let e=br(o,i);o=e;i=e}let a=e<0?n[\"clientX\"]-o:n[\"clientX\"];let l=t<0?n[\"clientY\"]-i:n[\"clientY\"];let r=o/2;if(f=a+o/2,v=l+i/2,d=r*_,S=r*h,g=r*c,o===i)O[\"setAttribute\"](\"transform\",T[\"toString\"]());else{let e=1;let t=i/o;let a=-f*(e-1);let l=-v*(t-1);let r=DOMMatrix[\"fromMatrix\"](T);r[\"translateSelf\"](a,l);r[\"scaleSelf\"](e,t);O[\"setAttribute\"](\"transform\",r[\"toString\"]())}}else{if(\"polar\"===r){let e=new DOMPoint(n[\"clientX\"],n[\"clientY\"]);let t=new DOMPoint(e[\"x\"],e[\"y\"]-100);let a=new DOMPoint(s[\"clientX\"],s[\"clientY\"]);let l=new ee_1.default(e,a);let r=(0,common_1.ni)(e,t,a);let o=l[\"length\"];f=e[\"x\"];v=e[\"y\"];d=o*_;S=o*h;g=o*c;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey&&(r=(0,common_1.ai)(r,45));let i=new DOMMatrix;i[\"translateSelf\"](e[\"x\"],e[\"y\"]);i[\"rotateSelf\"](r);i[\"translateSelf\"](-e[\"x\"],-e[\"y\"]);O[\"setAttribute\"](\"transform\",T[\"multiply\"](i)[\"toString\"]())}}(0,common_1.to)(O,{type:\"cog\",values:[f,v,d,S,g,p,m]},i)});let u=()=>{a.removeEventListener(\"pointermove\",t);a.removeEventListener(\"pointerup\",u)};a.addEventListener(\"pointerup\",u)},_OtherShapeTool_Bt=function e(t){let a;let l=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let r=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace;let{geometryPrecision:o,transformPrecision:i}=l;let s=(0,common_1.ut)(__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace)[\"inverse\"]();__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").undoManager.checkpoint(\"#arrow\",\"#other-shape-tool.arrow\");__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapStart(!1);let n=new DOMPoint(t[\"clientX\"],t[\"clientY\"]);n=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapPoint(n);n=n[\"matrixTransform\"](s);let _=new DOMPoint(n[\"x\"]+100,n[\"y\"]);let h=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").config.draw;let c=10;let p=40;let m=40;let f=0;let v=m;let d=p;let S=n[\"x\"];let g=n[\"y\"]-d/2;let O=(0,common_1.Zi)(\"svg:path\");let P={type:\"arrow\",values:[S,g,v,d,c,m,f]};(0,common_1.to)(O,P,o);r[\"append\"](O);(0,common_1.ja)(O,h);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.set(O);let T=(0,common_1.ct)(O)[\"multiply\"]((0,common_1.pt)(__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace,O));O[\"setAttribute\"](\"transform\",T[\"toString\"]());l.addEventListener(\"pointermove\",a=e=>{let t=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);t=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapPoint(t);t=t[\"matrixTransform\"](s);v=(0,common_1.Kt)(n,t);v<m&&(v=m);let a=(0,common_1.ni)(n,_,t);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey&&(a=(0,common_1.ai)(a,45));let l=new DOMMatrix;l[\"translateSelf\"](n[\"x\"],n[\"y\"]);l[\"rotateSelf\"](a);l[\"translateSelf\"](-n[\"x\"],-n[\"y\"]);O[\"setAttribute\"](\"transform\",T[\"multiply\"](l)[\"toString\"]());P={type:\"arrow\",values:[S,g,v,d,c,m,f]};(0,common_1.to)(O,P,o)});let u=()=>{l.removeEventListener(\"pointermove\",a);l.removeEventListener(\"pointerup\",u);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapEnd()};l.addEventListener(\"pointerup\",u)},_OtherShapeTool_Ut=function e(t){let a;let l=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let r=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace;let{geometryPrecision:o,transformPrecision:i}=l;let s=\"planar\";let n=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").config.draw;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").undoManager.checkpoint(\"#cross\",\"#other-shape-tool.cross\");__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapStart(!1);let c=new DOMPoint(t[\"clientX\"],t[\"clientY\"]);c=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapPoint(c);let p=c[\"x\"];let m=c[\"y\"];let f=0;let v=0;let _=0;let d=0;let S=.2;let g=.5;let O=(0,common_1.Zi)(\"svg:path\");(0,common_1.to)(O,{type:\"cross\",values:[p,m,f,v,_,d,g]},o);r.append(O);(0,common_1.ja)(O,n);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.set(O);let h=(0,common_1.ut)(O)[\"inverse\"]();let P=(0,common_1.ct)(O)[\"multiply\"](h);O[\"setAttribute\"](\"transform\",P[\"toString\"]());__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").ctrlKey&&(\"polar\"===s?s=\"planar\":\"planar\"===s&&(s=\"polar\"));l.addEventListener(\"pointermove\",a=e=>{let h=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);h=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapPoint(h);if(\"planar\"===s){let e=h[\"x\"]-c[\"x\"]||1;let t=h[\"y\"]-c[\"y\"]||1;if(f=fr(e),v=fr(t),__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey){let e=br(f,v);f=e;v=e}p=e<0?c[\"x\"]-f:c[\"x\"];m=t<0?c[\"y\"]-v:c[\"y\"]}else{if(\"polar\"===s){let e=new DOMPoint(c[\"x\"],c[\"y\"]);let t=new DOMPoint(h[\"x\"],h[\"y\"]);let a=(0,common_1.Kt)(e,t);let l=new DOMPoint(e[\"x\"],e[\"y\"]-a);let r=l[\"matrixTransform\"]((new DOMMatrix)[\"translate\"](e[\"x\"],e[\"y\"])[\"rotate\"](-45)[\"translate\"](-e[\"x\"],-e[\"y\"]));let o=l[\"matrixTransform\"]((new DOMMatrix)[\"translate\"](e[\"x\"],e[\"y\"])[\"rotate\"](45)[\"translate\"](-e[\"x\"],-e[\"y\"]));let i=l[\"matrixTransform\"]((new DOMMatrix)[\"translate\"](e[\"x\"],e[\"y\"])[\"rotate\"](135)[\"translate\"](-e[\"x\"],-e[\"y\"]));let s=(0,common_1.Kt)(r,o);p=c[\"x\"]-s/2;m=c[\"y\"]-s/2;f=s;v=s;let n=(0,common_1.ni)(e,i,t);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey&&(n=(0,common_1.ai)(n,45));let _=new DOMMatrix;_[\"translateSelf\"](e[\"x\"],e[\"y\"]);_[\"rotateSelf\"](n);_[\"translateSelf\"](-e[\"x\"],-e[\"y\"]);O[\"setAttribute\"](\"transform\",P[\"multiply\"](_)[\"toString\"]())}}_=v*S;d=f*S;(0,common_1.to)(O,{type:\"cross\",values:[p,m,f,v,_,d,g]},o)});let T=()=>{l.removeEventListener(\"pointermove\",a);l.removeEventListener(\"pointerup\",T);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapEnd()};l.addEventListener(\"pointerup\",T)},_OtherShapeTool__t=function e(n){let t;let a=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").board;let l=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").currentWorkspace;let{geometryPrecision:_,transformPrecision:r}=a;let o=\"planar\";let i=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").config.draw;__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").undoManager.checkpoint(\"#spiral\",\"#other-shape-tool.spiral\");__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapStart(!1);let h=new DOMPoint(n[\"clientX\"],n[\"clientY\"]);h=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapPoint(h);let c=0;let p=0;let m=1080;let f=new DOMPoint(h[\"x\"],h[\"y\"]-100)[\"matrixTransform\"]((new DOMMatrix)[\"translate\"](h[\"x\"],h[\"y\"])[\"rotate\"](m)[\"translate\"](-h[\"x\"],-h[\"y\"]));let v=h[\"x\"];let d=h[\"y\"];let S=1;let g=c*S;let O=(0,common_1.Zi)(\"svg:path\");(0,common_1.to)(O,{type:\"spiral\",values:[v,d,g,S,p,m]},_);l[\"append\"](O);(0,common_1.ja)(O,i);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").selectedElements.set(O);let s=(0,common_1.ut)(O)[\"inverse\"]();let P=(0,common_1.ct)(O)[\"multiply\"](s);O[\"setAttribute\"](\"transform\",P[\"toString\"]());__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").ctrlKey&&(\"polar\"===o?o=\"planar\":\"planar\"===o&&(o=\"polar\"));a.addEventListener(\"pointermove\",t=s=>{if(\"planar\"===o){let e=s[\"clientX\"]-n[\"clientX\"]||1;let t=s[\"clientY\"]-n[\"clientY\"]||1;let a=fr(e);let l=fr(t);let r=br(a,l);a=r;l=r;let o=e<0?n[\"clientX\"]-a:n[\"clientX\"];let i=t<0?n[\"clientY\"]-l:n[\"clientY\"];v=o+a/2;d=i+l/2;S=a/2;g=c*S;(0,common_1.to)(O,{type:\"spiral\",values:[v,d,g,S,p,m]},_)}else{if(\"polar\"===o){let e=new DOMPoint(s[\"clientX\"],s[\"clientY\"]);e=__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapPoint(e);let t=(0,common_1.ni)(h,f,e);f=e;m+=t;!1===__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").shiftKey&&(S=(0,common_1.Kt)(h,e));g=c*S;(0,common_1.to)(O,{type:\"spiral\",values:[v,d,g,S,p,m]},_)}}});let T=()=>{a.removeEventListener(\"pointermove\",t);a.removeEventListener(\"pointerup\",T);__classPrivateFieldGet(this,_OtherShapeTool_stage,\"f\").snapManager.snapEnd()};a.addEventListener(\"pointerup\",T)};exports[\"default\"]=OtherShapeTool;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/otherShapeTool.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/panTool.js":
/*!**********************************************!*\
  !*** ./node_modules/foxyjs/tools/panTool.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,o,a,i){if(a===\"m\")throw new TypeError(\"Private method is not writable\");if(a===\"a\"&&!i)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!i:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return a===\"a\"?i.call(e,o):i?i.value=o:t.set(e,o),o};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,o,a){if(o===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return o===\"m\"?a:o===\"a\"?a.call(e):a?a.value:t.get(e)};var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var _PanTool_instances,_PanTool_stage,_PanTool_ue,_PanTool_me,_PanTool_Ee,_PanTool_Te,_PanTool_Ae,_PanTool_Re,_PanTool_Ie,_PanTool_be;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");const ee_1=__importDefault(__webpack_require__(/*! ../utils/ee */ \"./node_modules/foxyjs/utils/ee.js\"));class PanTool{constructor(e){_PanTool_instances.add(this);_PanTool_stage.set(this,void 0);_PanTool_ue.set(this,void 0);_PanTool_me.set(this,void 0);_PanTool_Ee.set(this,void 0);_PanTool_Te.set(this,void 0);_PanTool_Ae.set(this,void 0);_PanTool_Re.set(this,!1);_PanTool_Ie.set(this,!1);__classPrivateFieldSet(this,_PanTool_stage,e,\"f\")}enabledCallback(){__classPrivateFieldGet(this,_PanTool_stage,\"f\").board.style.cursor=\"-webkit-grab\";__classPrivateFieldGet(this,_PanTool_stage,\"f\").workspaces.addEventListener(\"pointerdown\",__classPrivateFieldSet(this,_PanTool_me,e=>{__classPrivateFieldGet(this,_PanTool_instances,\"m\",_PanTool_be).call(this,e)},\"f\"))}disabledCallback(){__classPrivateFieldGet(this,_PanTool_stage,\"f\").board.style.cursor=\"-webkit-grab\";__classPrivateFieldGet(this,_PanTool_stage,\"f\").workspaces.removeEventListener(\"pointerdown\",__classPrivateFieldGet(this,_PanTool_me,\"f\"));window.removeEventListener(\"pointermove\",__classPrivateFieldGet(this,_PanTool_Te,\"f\"));window.removeEventListener(\"pointerup\",__classPrivateFieldGet(this,_PanTool_Ae,\"f\"))}}_PanTool_stage=new WeakMap,_PanTool_ue=new WeakMap,_PanTool_me=new WeakMap,_PanTool_Ee=new WeakMap,_PanTool_Te=new WeakMap,_PanTool_Ae=new WeakMap,_PanTool_Re=new WeakMap,_PanTool_Ie=new WeakMap,_PanTool_instances=new WeakSet,_PanTool_be=function e(a){if(a.buttons>1||!1===a.isPrimary)return;__classPrivateFieldGet(this,_PanTool_stage,\"f\").board.style.cursor=\"-webkit-grabbing\";__classPrivateFieldSet(this,_PanTool_Ie,!0,\"f\");let i=new DOMPoint(a.clientX,a.clientY);let s=i;window.addEventListener(\"pointermove\",__classPrivateFieldSet(this,_PanTool_Te,e=>{if(e.pointerId!==a.pointerId)return;let t=new DOMPoint(e.clientX,e.clientY);let o=e.timeStamp-a.timeStamp;if((0,common_1.Kt)(i,t)>=3||o>80){let e=new ee_1.default(s,t);if(!1===__classPrivateFieldGet(this,_PanTool_Re,\"f\")){__classPrivateFieldGet(this,_PanTool_stage,\"f\").scrollBy(e.x,e.y)}s=t}},\"f\"));window.addEventListener(\"pointerup\",__classPrivateFieldSet(this,_PanTool_Ae,e=>{if(e.pointerId!==a.pointerId)return;window.removeEventListener(\"pointermove\",__classPrivateFieldGet(this,_PanTool_Te,\"f\"));window.removeEventListener(\"pointerup\",__classPrivateFieldGet(this,_PanTool_Ae,\"f\"));__classPrivateFieldSet(this,_PanTool_Ie,!1,\"f\");!1===__classPrivateFieldGet(this,_PanTool_Re,\"f\")&&(__classPrivateFieldGet(this,_PanTool_stage,\"f\").board.style.cursor=\"-webkit-grab\")},\"f\"))};exports[\"default\"]=PanTool;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/panTool.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/penTool.js":
/*!**********************************************!*\
  !*** ./node_modules/foxyjs/tools/penTool.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,s,i){if(s===\"a\"&&!i)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!i:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return s===\"m\"?i:s===\"a\"?i.call(e):i?i.value:t.get(e)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,s,i,l){if(i===\"m\")throw new TypeError(\"Private method is not writable\");if(i===\"a\"&&!l)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!l:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return i===\"a\"?l.call(e,s):l?l.value=s:t.set(e,s),s};var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var _PenTool_instances,_PenTool_stage,_PenTool_Q,_PenTool_Xe,_PenTool_Ze,_PenTool_Ke,_PenTool_be,_PenTool_Qe,_PenTool_Je;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");const Ba_1=__importDefault(__webpack_require__(/*! ../utils/Ba */ \"./node_modules/foxyjs/utils/Ba.js\"));class PenTool{get enabled(){return __classPrivateFieldGet(this,_PenTool_stage,\"f\").freehandHud.hud.hasAttribute(\"enabled\")}set enabled(e){e?__classPrivateFieldGet(this,_PenTool_stage,\"f\").freehandHud.hud.setAttribute(\"enabled\",\"\"):__classPrivateFieldGet(this,_PenTool_stage,\"f\").freehandHud.hud.removeAttribute(\"enabled\")}constructor(e){_PenTool_instances.add(this);_PenTool_stage.set(this,void 0);_PenTool_Q.set(this,void 0);_PenTool_Xe.set(this,void 0);_PenTool_Ze.set(this,void 0);_PenTool_Ke.set(this,!1);this.enabledCallback=()=>{this.enabled=!0;__classPrivateFieldGet(this,_PenTool_stage,\"f\").board.style.cursor=\"crosshair\";__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.mode=\"edit\";__classPrivateFieldGet(this,_PenTool_stage,\"f\").workspaces.addEventListener(\"pointerdown\",__classPrivateFieldSet(this,_PenTool_Xe,e=>{__classPrivateFieldGet(this,_PenTool_be,\"f\").call(this,e)},\"f\"));__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.splineHud.addEventListener(\"nodeclick\",__classPrivateFieldSet(this,_PenTool_Ze,e=>{__classPrivateFieldGet(this,_PenTool_Qe,\"f\").call(this,e)},\"f\"))};this.disabledCallback=()=>{this.enabled=!1;__classPrivateFieldGet(this,_PenTool_stage,\"f\").workspaces.removeEventListener(\"pointerdown\",__classPrivateFieldGet(this,_PenTool_Xe,\"f\"));__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.splineHud.removeEventListener(\"nodeclick\",__classPrivateFieldGet(this,_PenTool_Ze,\"f\"));this.release()};this.release=()=>{__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.mode=\"edit\";__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud.hide();__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud.hud.dispatchEvent(new CustomEvent(\"release\"))};_PenTool_be.set(this,e=>{if(!1===__classPrivateFieldGet(this,_PenTool_Ke,\"f\")){__classPrivateFieldSet(this,_PenTool_Ke,!0,\"f\");__classPrivateFieldGet(this,_PenTool_instances,\"m\",_PenTool_Je).call(this,new DOMPoint(e[\"clientX\"],e[\"clientY\"]))}});_PenTool_Qe.set(this,e=>{let t=e.detail;if(!1===__classPrivateFieldGet(this,_PenTool_Ke,\"f\")&&\"mid\"!==t.position){__classPrivateFieldSet(this,_PenTool_Ke,!0,\"f\");__classPrivateFieldGet(this,_PenTool_instances,\"m\",_PenTool_Je).call(this,t)}});__classPrivateFieldSet(this,_PenTool_stage,e,\"f\")}}_PenTool_stage=new WeakMap,_PenTool_Q=new WeakMap,_PenTool_Xe=new WeakMap,_PenTool_Ze=new WeakMap,_PenTool_Ke=new WeakMap,_PenTool_be=new WeakMap,_PenTool_Qe=new WeakMap,_PenTool_instances=new WeakSet,_PenTool_Je=function e(o){var _;let t;let s;let i;let l;let a;let c;let n;let d=__classPrivateFieldGet(this,_PenTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_PenTool_stage,\"f\").currentWorkspace;let P=__classPrivateFieldGet(this,_PenTool_stage,\"f\").config.draw;let u=null;let v=[];let h=-1;let f=!1;let g=[];let r=new DOMPoint;__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.mode=\"draw\";if(o instanceof DOMPoint){let e=o;__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud.show(d,e,\"end\")}else{let e=o;let t=(0,common_1.Te)(e.spline);u=e.spline;f=\"start\"===e.position;v=(0,common_1.$e)(t);h=e.subpathIndex;let s=v[h];let i=(0,common_1.ut)(u,!0);let l=new DOMPoint(s.at(f?0:-1).values.at(-2),s.at(f?0:-1).values.at(-1));[\"R\",\"U\"].includes((_=s[1])===null||_===void 0?void 0:_.type)&&(s=(0,common_1.Re)(s,!1));let a=l.matrixTransform(i);__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud.show(u,a,e.position,s)}__classPrivateFieldGet(this,_PenTool_stage,\"f\").workspaces.addEventListener(\"pointerup\",s=e=>{let t=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);null===u?o instanceof DOMPoint&&(0,common_1.Kt)(o,t)>=4&&T():(0,common_1.Kt)(r,t)<4?G():T();r=t});__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.splineHud.addEventListener(\"nodepointerup\",i=e=>{let t=e.detail;if(null===u){p(t);G();alert(1)}});__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.splineHud.addEventListener(\"nodeclick\",l=e=>{let t=e.detail;e.preventDefault();t.spline===u?t.subpathIndex===h?((\"start\"===t.position&&!1===f||\"end\"===t.position&&!0===f)&&F(),G()):(m(t),G()):(p(t),G())});__classPrivateFieldGet(this,_PenTool_stage,\"f\").board.addEventListener(\"redo\",a=()=>{if(!1===(u===null||u===void 0?void 0:u.isConnected)){let e=g.find(e=>!0===e.isConnected);u=e||null}if(null===u){v=[];h=0;__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.selectedNodes=[];G()}else{let e=(0,common_1.Te)(u);v=(0,common_1.$e)(e);void 0===v[h]&&(h=0);let t=v.flat().indexOf(v[h].at(f?0:-1));let s=(0,common_1.ut)(u,!0);let i=new DOMPoint(v[h].at(f?0:-1).values.at(-2),v[h].at(f?0:-1).values.at(-1)).matrixTransform(s);__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.selectedNodes=[{spline:u,index:t}];__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud.show(u,i,f?\"start\":\"end\",v[h])}});__classPrivateFieldGet(this,_PenTool_stage,\"f\").board.addEventListener(\"keydown\",c=e=>{var t;let s=Ba_1.default.fromEvent(e);if(s.matches(\"Enter\")){G()}else{if(s.matches(\"Enter\",\"Shift\")){((t=v[h])===null||t===void 0?void 0:t.length)>0&&\"line\"!==u.localName&&F();G()}else{if(s.matches(\"Escape\")){e.preventDefault();G()}}}});__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud.hud.addEventListener(\"release\",n=()=>{G()});const T=()=>{var e;__classPrivateFieldGet(this,_PenTool_stage,\"f\").undoManager.checkpoint(\"#spline.cubic-bezier\",\"#spline-tool.cubic-bezier\");if(null===u){v=[[{type:\"M\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y1\"]]}]];h=0;u=(0,common_1.Zi)(\"svg:path\");d.append(u);(0,common_1.ja)(u,P)}[\"R\",\"U\"].includes((e=v[h][1])===null||e===void 0?void 0:e.type)&&(v[h]=(0,common_1.Re)(v[h],!1));!1===f?__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"curved\"]?v[h]=[...v[h],{type:\"C\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y2\"]]}]:v[h]=[...v[h],{type:\"L\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y2\"]]}]:__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"curved\"]?v[h]=[{type:\"M\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y1\"]]},{type:\"C\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y2\"]]},...v[h].slice(1)]:v[h]=[{type:\"M\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y1\"]]},{type:\"L\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y2\"]]},...v[h].slice(1)];v[h]=(0,common_1.Re)(v[h]);let s=[].concat(...v);if(\"line\"===u.localName||\"polyline\"===u.localName){let t=(0,common_1.Zi)(\"svg:path\");for(let e of u.attributes)!1===[\"x1\",\"y1\",\"x2\",\"y2\",\"points\"].includes(e.name)&&t.setAttribute(e.name,e.value);(0,common_1.Ae)(t,s,__classPrivateFieldGet(this,_PenTool_stage,\"f\").geometryPrecision);u.replaceWith(t);g.push(u,t);const o=structuredClone(Array.from(__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.keys()));__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.clear();o.forEach(e=>{__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.set(e===u?t:e)});u=t}else\"path\"===u.localName&&(0,common_1.Ae)(u,s,__classPrivateFieldGet(this,_PenTool_stage,\"f\").geometryPrecision);if(null===u.closest(\"defs\")&&!Array.from(__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.keys()).find(e=>e===u||e.contains(u))){__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.set(u)}let t=v.flat().indexOf(v[h].at(f?0:-1));let i=(0,common_1.ut)(u,!0);let l=v[h];let a=new DOMPoint(l.at(f?0:-1).values.at(-2),l.at(f?0:-1).values.at(-1)).matrixTransform(i);__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud.show(u,a,f?\"start\":\"end\",l);__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.selectedNodes=[{spline:u,index:t}]};const m=e=>{var t;__classPrivateFieldGet(this,_PenTool_stage,\"f\").undoManager.checkpoint(\"#spline.cubic-bezier\",\"#spline-tool.cubic-bezier\");let s=v[h];let i=v[e.subpathIndex];v=v.filter(e=>e!==i);h=v.indexOf(s);[\"R\",\"U\"].includes((t=i[1])===null||t===void 0?void 0:t.type)&&(i=(0,common_1.Re)(i,!1));(!0===f&&\"start\"===e.position||!1===f&&\"end\"===e.position)&&(i=(0,common_1.Ie)(i));!1===f?__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"curved\"]?v[h]=[...s,{type:\"C\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy2\"],i[0][\"values\"][0],i[0][\"values\"][1]]},...i.slice(1)]:v[h]=[...s,{type:\"L\",values:[i[0].values[0],i[0].values[1]]},...i.slice(1)]:__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"curved\"]?v[h]=[...i,...(0,common_1.Ie)((0,common_1.Re)([{type:\"M\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y2\"]]},{type:\"C\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y1\"]]}])).slice(1),...v[h].slice(1)]:v[h]=[...i,{type:\"L\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y2\"]]},...v[h].slice(1)];v[h]=(0,common_1.Re)(v[h]);let l=[].concat(...v);if(\"path\"===u.localName)(0,common_1.Ae)(u,l,__classPrivateFieldGet(this,_PenTool_stage,\"f\").geometryPrecision);else{let e=l.map(e=>e[\"values\"]).flat().map(e=>(0,common_1.te)(e,__classPrivateFieldGet(this,_PenTool_stage,\"f\").geometryPrecision));u.setAttribute(\"points\",e.join(\" \"))}__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.selectedNodes=[]};const p=e=>{var t;__classPrivateFieldGet(this,_PenTool_stage,\"f\").undoManager.checkpoint(\"#spline.cubic-bezier\",\"#spline-tool.cubic-bezier\");let s=u?u.ownerSVGElement.querySelector('textPath[href=\"#'+CSS.escape(u.id)+'\"]'):null;let i=e.spline;let l=__classPrivateFieldGet(this,_PenTool_stage,\"f\").workspaces.querySelector('textPath[href=\"#'+CSS.escape(i.id)+'\"]');let a=(0,common_1.$e)((0,common_1.Te)(i));let o=(0,common_1.pt)(i,u||d,!0);if(null===u){v=[[{type:\"M\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y1\"]]}]];h=0;u=(0,common_1.Zi)(\"svg:path\");d.append(u);(0,common_1.ja)(u,P)}let _=a[e.subpathIndex];a=a.filter(e=>e!==_);[\"R\",\"U\"].includes((t=_[1])===null||t===void 0?void 0:t.type)&&(_=(0,common_1.Re)(_,!1));\"end\"===e.position&&(_=(0,common_1.Ie)(_));_=(0,common_1.Mt)(_,o);f&&(v[h]=(0,common_1.Ie)(v[h]));__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"curved\"]?v[h].push({type:\"C\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy2\"],_[0][\"values\"][0],_[0][\"values\"][1]]},..._.slice(1)):v[h].push({type:\"L\",values:[_[0].values[0],_[0].values[1]]},..._.slice(1));l&&\"end\"===e.position&&(v[h]=(0,common_1.Ie)(v[h]));v[h]=(0,common_1.Re)(v[h]);let c=[].concat(...v);if(\"line\"===u.localName||\"polyline\"===u.localName){let t=(0,common_1.Zi)(\"svg:path\");for(let e of u.attributes)!1===[\"x1\",\"y1\",\"x2\",\"y2\",\"points\"].includes(e.name)&&t.setAttribute(e.name,e.value);(0,common_1.Ae)(t,c,__classPrivateFieldGet(this,_PenTool_stage,\"f\").geometryPrecision);u.replaceWith(t);g.push(u,t);const r=structuredClone(Array.from(__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.keys()));__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.clear();r.forEach(e=>{__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.set(e===u?t:e)});u=t}else\"path\"===u.localName&&(0,common_1.Ae)(u,c,__classPrivateFieldGet(this,_PenTool_stage,\"f\").geometryPrecision);if(0===a.length)i.remove();else{let e=[].concat(...a);(0,common_1.Ae)(i,e,__classPrivateFieldGet(this,_PenTool_stage,\"f\").geometryPrecision)}if(!s&&l&&!1===i.isConnected){let e=__classPrivateFieldGet(this,_PenTool_stage,\"f\").generateUniqueID(u.localName+\"-\");u.setAttribute(\"id\",e);l.setAttribute(\"href\",\"#\"+e);l.closest(\"text\").removeAttribute(\"transform\")}let n=window.structuredClone(Array.from(__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.keys()));!1===i.isConnected&&(n=n.filter(e=>e!==i));null===u.closest(\"defs\")&&void 0===n.find(e=>e===u||e.contains(u))&&n.push(u);__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.sets(n)};const F=()=>{__classPrivateFieldGet(this,_PenTool_stage,\"f\").undoManager.checkpoint(\"#spline.cubic-bezier\",\"#spline-tool.cubic-bezier\");let t=v[h];if(!1===f)__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"curved\"]?t.push({type:\"C\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy2\"],t[0].values[0],t[0].values[1]]},{type:\"Z\",values:[]}):t[\"push\"]({type:\"L\",values:[t[0].values[0],t[0].values[1]]},{type:\"Z\",values:[]});else{let e=new DOMPoint(t[\"at\"](-1).values[\"at\"](-2),t[\"at\"](-1).values[\"at\"](-1));__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"curved\"]?t.push(...(0,common_1.Ie)((0,common_1.Re)([{type:\"M\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y2\"]]},{type:\"C\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy1\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cx2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"cy2\"],e[\"x\"],e[\"y\"]]}]))[\"slice\"](1),{type:\"Z\",values:[]}):t[\"push\"]({type:\"L\",values:[__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"x2\"],__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud[\"y2\"]]},{type:\"Z\",values:[]})}v[h]=(0,common_1.Re)(v[h]);let e=[].concat(...v);if(\"line\"===u.localName){let t=(0,common_1.Zi)(\"svg:path\");for(let e of u.attributes)!1===[\"x1\",\"y1\",\"x2\",\"y2\"].includes(e.name)&&t.setAttribute(e.name,e.value);(0,common_1.Ae)(t,e,__classPrivateFieldGet(this,_PenTool_stage,\"f\").geometryPrecision);u.replaceWith(t);g.push(u,t);const s=structuredClone(Array.from(__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.keys()));__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.clear();s.forEach(e=>{__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.set(e===u?t:e)});u=t}else{if(\"polyline\"===u.localName){let t=(0,common_1.Zi)(\"svg:path\");for(let e of u.attributes)!1===[\"points\"].includes(e.name)&&t.setAttribute(e.name,e.value);(0,common_1.Ae)(t,e,__classPrivateFieldGet(this,_PenTool_stage,\"f\").geometryPrecision);u.replaceWith(t);const s=structuredClone(Array.from(__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.keys()));__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.clear();s.forEach(e=>{__classPrivateFieldGet(this,_PenTool_stage,\"f\").selectedElements.set(e===u?t:e)});u=t}else\"path\"===u.localName&&(0,common_1.Ae)(u,e,__classPrivateFieldGet(this,_PenTool_stage,\"f\").geometryPrecision)}__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.selectedNodes=[]};const G=()=>{__classPrivateFieldGet(this,_PenTool_stage,\"f\").workspaces.removeEventListener(\"pointerdown\",t);__classPrivateFieldGet(this,_PenTool_stage,\"f\").workspaces.removeEventListener(\"pointerup\",s);__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.splineHud.removeEventListener(\"nodepointerup\",i);__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.splineHud.removeEventListener(\"nodeclick\",l);__classPrivateFieldGet(this,_PenTool_stage,\"f\").board.removeEventListener(\"redo\",a);__classPrivateFieldGet(this,_PenTool_stage,\"f\").board.removeEventListener(\"keydown\",c);__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud.hud.removeEventListener(\"release\",n);__classPrivateFieldGet(this,_PenTool_stage,\"f\").splineTool.mode=\"edit\";__classPrivateFieldGet(this,_PenTool_stage,\"f\").cubicBezierSegHud.hide();__classPrivateFieldSet(this,_PenTool_Ke,!1,\"f\")}};exports[\"default\"]=PenTool;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/penTool.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/rectTool.js":
/*!***********************************************!*\
  !*** ./node_modules/foxyjs/tools/rectTool.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(t,e,o,s,a){if(s===\"m\")throw new TypeError(\"Private method is not writable\");if(s===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof e===\"function\"?t!==e||!a:!e.has(t))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return s===\"a\"?a.call(t,o):a?a.value=o:e.set(t,o),o};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(t,e,o,s){if(o===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof e===\"function\"?t!==e||!s:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return o===\"m\"?s:o===\"a\"?s.call(t):s?s.value:e.get(t)};var _RectTool_instances,_RectTool_pointerdown,_RectTool_Ke,_RectTool_stage,_RectTool_Pt,_RectTool_Dt;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");const{abs:cr,min:pr}=Math;class RectTool{constructor(t){_RectTool_instances.add(this);_RectTool_pointerdown.set(this,void 0);_RectTool_Ke.set(this,!1);_RectTool_stage.set(this,void 0);this.enabledCallback=()=>{const t=__classPrivateFieldGet(this,_RectTool_stage,\"f\").board;t.style.cursor=\"crosshair\";__classPrivateFieldGet(this,_RectTool_stage,\"f\").workspaces.addEventListener(\"pointerdown\",__classPrivateFieldSet(this,_RectTool_pointerdown,t=>{__classPrivateFieldGet(this,_RectTool_instances,\"m\",_RectTool_Pt).call(this,t)},\"f\"))};this.disabledCallback=()=>{__classPrivateFieldGet(this,_RectTool_stage,\"f\").workspaces.removeEventListener(\"pointerdown\",__classPrivateFieldGet(this,_RectTool_pointerdown,\"f\"))};__classPrivateFieldSet(this,_RectTool_stage,t,\"f\")}}_RectTool_pointerdown=new WeakMap,_RectTool_Ke=new WeakMap,_RectTool_stage=new WeakMap,_RectTool_instances=new WeakSet,_RectTool_Pt=function t(a){if(a[\"buttons\"]>1||!0===__classPrivateFieldGet(this,_RectTool_Ke,\"f\"))return;let i;let n;const r=__classPrivateFieldGet(this,_RectTool_stage,\"f\").board;const l=new DOMPoint(a[\"clientX\"],a[\"clientY\"]);r.addEventListener(\"pointermove\",i=t=>{const{clientX:e,clientY:o}=t;const s=new DOMPoint(e,o);if((0,common_1.Kt)(l,s)>=3){r.removeEventListener(\"pointermove\",i);r.removeEventListener(\"pointerup\",n);__classPrivateFieldGet(this,_RectTool_instances,\"m\",_RectTool_Dt).call(this,a)}});r.addEventListener(\"pointerup\",n=()=>{r.removeEventListener(\"pointermove\",i);r.removeEventListener(\"pointerup\",n)})},_RectTool_Dt=function t(e){const{clientX:o,clientY:s}=e;const a=__classPrivateFieldGet(this,_RectTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_RectTool_stage,\"f\").currentWorkspace;let u=\"planar\";const i=__classPrivateFieldGet(this,_RectTool_stage,\"f\").config.draw;const n=0;__classPrivateFieldGet(this,_RectTool_stage,\"f\").undoManager.checkpoint(\"#rectangle\",\"#rect-tool\");__classPrivateFieldGet(this,_RectTool_stage,\"f\").snapManager.snapStart(!1);let P=new DOMPoint(o,s);P=__classPrivateFieldGet(this,_RectTool_stage,\"f\").snapManager.snapPoint(P);if(\"polar\"===u||\"planar\"===u){let t;let m=1;let f=1;let w=\"planar\"===u?P[\"x\"]:P[\"x\"]-m/2;let T=\"planar\"===u?P[\"y\"]:P[\"y\"]-f/2;const R=(0,common_1.Zi)(\"svg:rect\");R.setAttribute(\"x\",w);R.setAttribute(\"y\",T);R.setAttribute(\"width\",m);R.setAttribute(\"height\",f);R.setAttribute(\"rx\",n);R.setAttribute(\"ry\",n);a.append(R);(0,common_1.ja)(R,i);__classPrivateFieldGet(this,_RectTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_RectTool_stage,\"f\").selectedElements.set(R);const r=(0,common_1.ut)(R)[\"inverse\"]();const g=(0,common_1.ct)(R)[\"multiply\"](r);R.setAttribute(\"transform\",g[\"toString\"]());__classPrivateFieldGet(this,_RectTool_stage,\"f\").ctrlKey&&(\"polar\"===u?u=\"planar\":\"planar\"===u&&(u=\"polar\"));window.addEventListener(\"pointermove\",t=t=>{const{clientX:e,clientY:o}=t;let s=new DOMPoint(e,o);if(\"planar\"===u){s=__classPrivateFieldGet(this,_RectTool_stage,\"f\").snapManager.snapPoint(s);const a=s[\"x\"]-P[\"x\"]||1;const i=s[\"y\"]-P[\"y\"]||1;m=cr(a);f=cr(i);if(__classPrivateFieldGet(this,_RectTool_stage,\"f\").shiftKey){const n=pr(m,f);m=n;f=n}w=a<0?P[\"x\"]-m:P[\"x\"];T=i<0?P[\"y\"]-f:P[\"y\"]}else{if(\"polar\"===u){const r=new DOMPoint(P[\"x\"],P[\"y\"]);const l=new DOMPoint(s[\"x\"],s[\"y\"]);const c=(0,common_1.Kt)(r,l);const _=new DOMPoint(r[\"x\"],r[\"y\"]-c);const d=_.matrixTransform((new DOMMatrix).translate(r[\"x\"],r[\"y\"])[\"rotate\"](-45).translate(-r[\"x\"],-r[\"y\"]));const p=_.matrixTransform((new DOMMatrix).translate(r[\"x\"],r[\"y\"])[\"rotate\"](45).translate(-r[\"x\"],-r[\"y\"]));const v=_.matrixTransform((new DOMMatrix).translate(r[\"x\"],r[\"y\"])[\"rotate\"](135).translate(-r[\"x\"],-r[\"y\"]));const h=(0,common_1.Kt)(d,p);w=P[\"x\"]-h/2;T=P[\"y\"]-h/2;m=h;f=h;let t=(0,common_1.ni)(r,v,l);__classPrivateFieldGet(this,_RectTool_stage,\"f\").shiftKey&&(t=(0,common_1.ai)(t,45));let e=new DOMMatrix;e.translateSelf(r[\"x\"],r[\"y\"]);e.rotateSelf(t);e.translateSelf(-r[\"x\"],-r[\"y\"]);R.setAttribute(\"transform\",g[\"multiply\"](e)[\"toString\"]())}}R.setAttribute(\"x\",w);R.setAttribute(\"y\",T);R.setAttribute(\"width\",m);R.setAttribute(\"height\",f)});const l=()=>{window.removeEventListener(\"pointermove\",t);window.removeEventListener(\"pointerup\",l);__classPrivateFieldGet(this,_RectTool_stage,\"f\").snapManager.snapEnd()};window.addEventListener(\"pointerup\",l)}};exports[\"default\"]=RectTool;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/rectTool.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/rubberBand.js":
/*!*************************************************!*\
  !*** ./node_modules/foxyjs/tools/rubberBand.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,r,i){if(r===\"a\"&&!i)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!i:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return r===\"m\"?i:r===\"a\"?i.call(e):i?i.value:t.get(e)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,r,i,n){if(i===\"m\")throw new TypeError(\"Private method is not writable\");if(i===\"a\"&&!n)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!n:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return i===\"a\"?n.call(e,r):n?n.value=r:t.set(e,r),r};var _RubberBand_rubberBandHud,_RubberBand_rubberBand;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class RubberBand{get rubberBandHud(){return __classPrivateFieldGet(this,_RubberBand_rubberBandHud,\"f\")}get enabled(){return this.rubberBandHud.hasAttribute(\"enabled\")}set enabled(e){e?this.rubberBandHud.setAttribute(\"enabled\",\"\"):this.rubberBandHud.removeAttribute(\"enabled\")}constructor(){_RubberBand_rubberBandHud.set(this,document.querySelector(\"#rubber-band-hud\"));_RubberBand_rubberBand.set(this,void 0);this.grabSelection=c=>{if(!this.enabled)return c;return new Promise(t=>{const{clientX:e,clientY:r}=c;const i=__classPrivateFieldGet(this,_RubberBand_rubberBand,\"f\");let n;let a;const b=(0,common_1.ut)(__classPrivateFieldGet(this,_RubberBand_rubberBandHud,\"f\"))[\"inverse\"]();const d=new DOMPoint(e,r).matrixTransform(b);let s=0;let u=0;let o=0;let l=0;i.removeAttribute(\"hidden\");window.addEventListener(\"pointermove\",n=e=>{if(!1===e.isPrimary)return;const t=new DOMPoint(e[\"clientX\"],e[\"clientY\"]).matrixTransform(b);o=t[\"x\"]-d[\"x\"];l=t[\"y\"]-d[\"y\"];if(o<0){o=-o;s=d[\"x\"]-o}else s=d[\"x\"];if(l<0){l=-l;u=d[\"y\"]-l}else u=d[\"y\"];i.setAttribute(\"x\",s+\"\");i.setAttribute(\"y\",u+\"\");i.setAttribute(\"width\",o+\"\");i.setAttribute(\"height\",l+\"\")});window.addEventListener(\"pointerup\",a=e=>{if(!1===e[\"isPrimary\"])return;i.setAttribute(\"hidden\",\"\");i.setAttribute(\"x\",0+\"\");i.setAttribute(\"y\",0+\"\");i.setAttribute(\"width\",0+\"\");i.setAttribute(\"height\",0+\"\");window.removeEventListener(\"pointermove\",n);window.removeEventListener(\"pointerup\",a);t(new DOMRect(s,u,o,l))})})};__classPrivateFieldGet(this,_RubberBand_rubberBandHud,\"f\").innerHTML=` <style>\n        #rubber-band-hud [uid=\"rubber-band\"] {\n                fill: rgb(12 118 218 / 40%);\n                stroke: rgb(12 118 218 / 100%);\n                stroke-width: 1;\n                pointer-events: none;\n                vector-effect: non-scaling-stroke;\n            }\n        </style>\n        <rect uid=\"rubber-band\" x=\"0\" y=\"0\" width=\"0\" height=\"0\" hidden=\"\"></rect>`;__classPrivateFieldSet(this,_RubberBand_rubberBand,__classPrivateFieldGet(this,_RubberBand_rubberBandHud,\"f\").querySelector('[uid=\"rubber-band\"]'),\"f\")}}_RubberBand_rubberBandHud=new WeakMap,_RubberBand_rubberBand=new WeakMap;exports[\"default\"]=RubberBand;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/rubberBand.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/splineTool.js":
/*!*************************************************!*\
  !*** ./node_modules/foxyjs/tools/splineTool.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,i,l,s){if(l===\"m\")throw new TypeError(\"Private method is not writable\");if(l===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return l===\"a\"?s.call(e,i):s?s.value=i:t.set(e,i),i};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,i,l){if(i===\"a\"&&!l)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!l:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return i===\"m\"?l:i===\"a\"?l.call(e):l?l.value:t.get(e)};var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var _SplineTool_stage;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");const ee_1=__importDefault(__webpack_require__(/*! ../utils/ee */ \"./node_modules/foxyjs/utils/ee.js\"));const Ba_1=__importDefault(__webpack_require__(/*! ../utils/Ba */ \"./node_modules/foxyjs/utils/Ba.js\"));const fd=5;const bd=5;const wd=Symbol();const vd=Symbol();const yd=Symbol();const kd=Symbol();class SplineTool{get mode(){return this.splineHud.hasAttribute(\"mode\")?this.splineHud.getAttribute(\"mode\"):\"edit\"}set mode(e){null===e?this.splineHud.setAttribute(\"mode\",\"edit\"):this.splineHud.setAttribute(\"mode\",(0,common_1.Pi)(e))}get enabled(){return this.splineHud.hasAttribute(\"enabled\")}set enabled(e){e?this.splineHud.setAttribute(\"enabled\",\"\"):this.splineHud.removeAttribute(\"enabled\")}get selectedNodes(){return[...this.Mi]}set selectedNodes(e){this.Mi=e;this.Pi()}constructor(e){_SplineTool_stage.set(this,void 0);this.splineHud=document.querySelector(\"#spline-hud\");this.Oi=[];this.Mi=[];this.Ei=null;this.Ti=null;this.Ai=null;this.enabledCallback=()=>{this.enabled=true;__classPrivateFieldGet(this,_SplineTool_stage,\"f\").board.addEventListener(\"selectedelementschange\",this.C=()=>{this.S()});this.S()};this.disabledCallback=()=>{this.enabled=false;this.l&&this.M();for(let e of this[\"#grippies\"].children)e.innerHTML=\"\";__classPrivateFieldGet(this,_SplineTool_stage,\"f\").board.removeEventListener(\"selectedelementschange\",this.C)};this.P=()=>{this.l=!0;__classPrivateFieldGet(this,_SplineTool_stage,\"f\").board.addEventListener(\"workspacemutation\",this.T=()=>{this.A()});__classPrivateFieldGet(this,_SplineTool_stage,\"f\").board.addEventListener(\"zoomchange\",this.D=()=>{this.O()});__classPrivateFieldGet(this,_SplineTool_stage,\"f\").board.addEventListener(\"undo\",this.Qe=()=>{this.deselectAllNodes()});__classPrivateFieldGet(this,_SplineTool_stage,\"f\").board.addEventListener(\"redo\",this.et=()=>{this.deselectAllNodes()})};this.M=()=>{this.Oi=[];this.Mi=[];this.l=!1;this[\"#curve-grippies\"].innerHTML=\"\";this[\"#primary-node-grippies\"].innerHTML=\"\";this[\"#secondary-node-grippies\"].innerHTML=\"\";this[\"#helper-lines\"].innerHTML=\"\";__classPrivateFieldGet(this,_SplineTool_stage,\"f\").board.removeEventListener(\"workspacemutation\",this.T);__classPrivateFieldGet(this,_SplineTool_stage,\"f\").board.removeEventListener(\"zoomchange\",this.D);__classPrivateFieldGet(this,_SplineTool_stage,\"f\").board.removeEventListener(\"undo\",this.Qe);__classPrivateFieldGet(this,_SplineTool_stage,\"f\").board.removeEventListener(\"redo\",this.et);this.splineHud.dispatchEvent(new CustomEvent(\"selectednodeschange\"))};this.rubberBandSelectionCallback=l=>{let e=__classPrivateFieldGet(this,_SplineTool_stage,\"f\").shiftKey;let s=[];if(l instanceof DOMRect){let i=l;for(let t of this[\"#primary-node-grippies\"].children){let e=(0,common_1.Wi)(t);(0,common_1.pi)(i,e)&&s.push(t)}}else for(let t of this[\"#primary-node-grippies\"].children){let e=new DOMPoint(t.firstElementChild.cx.baseVal.value,t.firstElementChild.cy.baseVal.value);!0===(0,common_1.yi)(l,e)&&s.push(t)}if(!1===e){this.Mi=[];for(let t of s){let e={spline:t[wd],index:t[yd]};this.Mi.push(e)}}else{if(!0===e)for(let e of s){let t={spline:e[wd],index:e[yd]};void 0===this.Mi.find(e=>e.spline===t.spline&&e.index===t.index)&&this.Mi[\"push\"](t)}}this.Pi();this.$i();this.splineHud.dispatchEvent(new CustomEvent(\"selectednodeschange\"));this.Mi.length>0&&this[\"#grippies\"].focus()};this.moveCallback=(t,s)=>{let e=this.Oi.filter(t=>this.Mi.filter(e=>e.spline===t).length>0);for(let p of e){let l=this.selectedNodes.filter(e=>e.spline===p).map(e=>e.index);if(l.length>0){let e=(0,common_1.pt)(p,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").canvas).inverse();let r=new ee_1.default(t,s);let i=r.matrixTransform(e);if(\"line\"===p.localName){let t=[new DOMPoint(p[\"x1\"].baseVal.value,p[\"y1\"].baseVal.value),new DOMPoint(p[\"x2\"].baseVal.value,p[\"y2\"].baseVal.value)];for(let e of l)t[e]=new DOMPoint(t[e][\"x\"]+i[\"x\"],t[e][\"y\"]+i[\"y\"]);for(let e of t){e[\"x\"]=(0,common_1.te)(e[\"x\"],__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision);e[\"y\"]=(0,common_1.te)(e[\"y\"],__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision)}p.setAttribute(\"x1\",t[0][\"x\"]);p.setAttribute(\"y1\",t[0][\"y\"]);p.setAttribute(\"x2\",t[1][\"x\"]);p.setAttribute(\"y2\",t[1][\"y\"])}else{if(\"polyline\"===p.localName||\"polygon\"===p.localName){let t=[...p.points].map(e=>DOMPoint.fromPoint(e));for(let e of l)t[e]=new DOMPoint(t[e][\"x\"]+r[\"x\"],t[e][\"y\"]+r[\"y\"]);for(let e of t){e[\"x\"]=(0,common_1.te)(e[\"x\"],__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision);e[\"y\"]=(0,common_1.te)(e[\"y\"],__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision)}p.setAttribute(\"points\",t.map(e=>[e[\"x\"],e[\"y\"]]).flat().join(\" \"))}else{if(\"path\"===p.localName){let o=(0,common_1.Te)(p);let a=structuredClone(o);for(let i of l){let s=o[i];let e=o[i+1];let n=a[i];let t=a[i+1];if(\"M\"===s.type||\"L\"===s.type){s.values[0]=n.values[0]+r[\"x\"];s.values[1]=n.values[1]+r[\"y\"];if(\"C\"===(e===null||e===void 0?void 0:e.type)){e.values[0]=t.values[0]+r[\"x\"];e.values[1]=t.values[1]+r[\"y\"]}else{if(\"Z\"===(e===null||e===void 0?void 0:e.type)){let e=(0,common_1.Ve)(s,o);let t=e[0];let i=e[1];let l=(0,common_1.Ve)(n,a);t.values[0]=s.values[0];t.values[1]=s.values[1];if(\"C\"===(i===null||i===void 0?void 0:i.type)){i.values[0]=l[1].values[0]+r[\"x\"];i.values[1]=l[1].values[1]+r[\"y\"]}}}}else{if(\"R\"===s.type){if(s.values[0]=n.values[0]+r[\"x\"],s.values[1]=n.values[1]+r[\"y\"],\"Z\"===(e===null||e===void 0?void 0:e.type)){let e=(0,common_1.Ve)(s,o);let t=e[0];(0,common_1.Ve)(n,a);t.values[0]=s.values[0];t.values[1]=s.values[1]}}else{if(\"U\"===s.type){if(\"Z\"===(e===null||e===void 0?void 0:e.type)){s.values[0]=n.values[0]+r[\"x\"];s.values[1]=n.values[1]+r[\"y\"]}else{s.values[0]=n.values[0]+r[\"x\"];s.values[1]=n.values[1]+r[\"y\"];if(\"Z\"===(e===null||e===void 0?void 0:e.type)){let e=(0,common_1.Ve)(s,o);let t=e[0];(0,common_1.Ve)(n,a);t.values[0]=s.values[0];t.values[1]=s.values[1]}}}else{if(\"C\"===s.type){s.values[2]=n.values[2]+r[\"x\"];s.values[3]=n.values[3]+r[\"y\"];s.values[4]=n.values[4]+r[\"x\"];s.values[5]=n.values[5]+r[\"y\"];if(\"C\"===(e===null||e===void 0?void 0:e.type)){e.values[0]=t.values[0]+r[\"x\"];e.values[1]=t.values[1]+r[\"y\"]}else{if(\"Z\"===(e===null||e===void 0?void 0:e.type)){let e=(0,common_1.Ve)(s,o);let t=e[0];let i=e[1];let l=(0,common_1.Ve)(n,a);t.values[0]=s.values[4];t.values[1]=s.values[5];if(\"C\"===i.type){i.values[0]=l[1].values[0]+r[\"x\"];i.values[1]=l[1].values[1]+r[\"y\"]}}}}}}}(0,common_1.Ae)(p,o,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision)}}}}}}return e.length>0};this.S=()=>{this.Oi=this.Fi();this.Mi=[];this.splineHud.dispatchEvent(new CustomEvent(\"selectednodeschange\"));if(0===this.Oi.length){this.l&&this.M()}else{this.l||this.P();this.Pi();this.$i()}};this.A=()=>{this.Pi();this.$i()};this.O=()=>{this.Ii();this.Ui()};this.je=t=>{var e;if(((e=this.mode)===null||e===void 0?void 0:e.startsWith(\"edit\"))&&this[\"#primary-node-grippies\"].querySelector(\"[data-selected]\")){let e=Ba_1.default.fromEvent(t);t.preventDefault();t.stopPropagation();if(e.matches(\"Backspace\")||e.matches(\"Delete\")){this.Gi(\"smooth\")}else{if(e.matches(\"Shift\",\"Backspace\")||e.matches(\"Shift\",\"Delete\")){this.Gi(\"sharp\")}}}};this.L=e=>{e.preventDefault();this[\"#grippies\"].focus();e.target.closest(\".primary-node-grippie\")?this.Ni(e):e.target.matches(\".secondary-node-grippie\")?this.ji(e):e.target.matches(\".curve-grippie path\")&&this.Vi(e)};this.Ve=e=>{e.target.closest(\".primary-node-grippie\")&&this.Hi(e)};this.He=e=>{e.target.closest(\".primary-node-grippie\")?this.Wi(e):e.target.matches(\".secondary-node-grippie\")?this.Yi(e):e.target.matches(\".curve-grippie > path\")&&this.qi(e)};this.Ni=o=>{var e;if(o.buttons>1)return;let a=!1;let r=o.target.closest(\".primary-node-grippie\");let p=r[wd];let d=r[yd];let t=(0,common_1.Te)(p);let[i]=(0,common_1.He)(t,d);if((e=this.mode)===null||e===void 0?void 0:e.startsWith(\"edit\")){let i;let l=__classPrivateFieldGet(this,_SplineTool_stage,\"f\").shiftKey;r.addEventListener(\"pointerup\",i=()=>{r.removeEventListener(\"pointerup\",i);let e=void 0!==this.Mi.find(e=>e.spline===p&&e.index===d);let t={spline:p,index:d};if(!1===e){!1===l?this.Mi=[t]:!0===l&&this.Mi.push(t);this.Pi()}else{if(!0===l&&!1===a){this.Mi=this.Mi.filter(e=>e.spline!==p||e.index!==d);this.Pi()}}this.splineHud.dispatchEvent(new CustomEvent(\"selectednodeschange\"))})}let u;let l;let c=new DOMPoint(o[\"clientX\"],o[\"clientY\"]);let v=c;let s=new CustomEvent(\"nodepointerdown\",{cancelable:!0,detail:{spline:p,index:d,subpathIndex:i,position:r.getAttribute(\"data-position\"),selected:r.hasAttribute(\"data-selected\"),pointerId:o.pointerId}});this.splineHud.dispatchEvent(s);r.addEventListener(\"pointermove\",u=i=>{var e;let t=new DOMPoint(i[\"clientX\"],i[\"clientY\"]);let l=i.timeStamp-o.timeStamp;let s=(0,common_1.Kt)(c,t)>3||l>80;let n=!1===(0,common_1.qt)(v,t,null);v=t;if(((e=this.mode)===null||e===void 0?void 0:e.startsWith(\"edit\"))&&!0===s&&!0===n){r.removeEventListener(\"pointermove\",u);let e=new ee_1.default(i[\"clientX\"]-o[\"clientX\"],i[\"clientY\"]-o[\"clientY\"]);a=!0;let t=Math.abs(e[\"x\"])>Math.abs(e[\"y\"])?\"horizontal\":\"vertical\";new DOMPoint(i[\"clientX\"],i[\"clientY\"]);if(void 0===this.Mi.find(e=>e.spline===p&&e.index===d)){this.Mi=[{spline:p,index:d}];this.Pi();this.splineHud.dispatchEvent(new CustomEvent(\"selectednodeschange\"))}this.Xi(o,r,t)}});r.addEventListener(\"pointerup\",l=t=>{r.removeEventListener(\"pointermove\",u);r.removeEventListener(\"pointerup\",l);if(!1===a&&!1===s.defaultPrevented){let e=new CustomEvent(\"nodeclick\",{detail:{spline:p,index:d,subpathIndex:i,position:r.getAttribute(\"data-position\"),selected:r.hasAttribute(\"data-selected\"),pointerId:t.pointerId}});this.splineHud.dispatchEvent(e)}})};this.Hi=e=>{var t;const i=(t=document.elementsFromPoint(e[\"clientX\"],e[\"clientY\"])[0])===null||t===void 0?void 0:t[\"closest\"](\".primary-node-grippie\");if(i){const l=i[wd];const s=i[yd];const n=(0,common_1.Te)(l);const[o]=(0,common_1.He)(n,s);const a=new CustomEvent(\"nodepointerup\",{detail:{spline:l,index:s,subpathIndex:o,position:i.getAttribute(\"data-position\"),selected:i.hasAttribute(\"data-selected\"),pointerId:e.pointerId}});this.splineHud.dispatchEvent(a)}};this.Xi=(e,t,l)=>{let i;let s;let n=Symbol();let d=Symbol();let o=Symbol();let a=Symbol();let u=Symbol();let r=this.Oi.filter(t=>this.Mi.filter(e=>e.spline===t).length>0);for(let t of r){let e=this.Zi(t);t[a]=e;t[u]=e.inverse();if(\"line\"===t.localName)t[o]=[new DOMPoint(t[\"x1\"].baseVal.value,t[\"y1\"].baseVal.value),new DOMPoint(t[\"x2\"].baseVal.value,t[\"y2\"].baseVal.value)];else{if(\"polyline\"===t.localName)t[o]=[...t.points].map(e=>DOMPoint.fromPoint(e));else{if(\"polygon\"===t.localName)t[o]=[...t.points].map(e=>DOMPoint.fromPoint(e));else{if(\"path\"===t.localName){let e=(0,common_1.Te)(t);t[n]=e;t[d]=structuredClone(e)}}}}}__classPrivateFieldGet(this,_SplineTool_stage,\"f\").undoManager.checkpoint(\"#move-nodes\",\"#edit-tool\");__classPrivateFieldGet(this,_SplineTool_stage,\"f\").snapManager.snapStart(!0);this[\"Ei\"]=t;let p=t[wd];let c=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);let v=t[kd].matrixTransform(p[a]);window.addEventListener(\"pointermove\",i=e=>{let t=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);__classPrivateFieldGet(this,_SplineTool_stage,\"f\").shiftKey&&(\"horizontal\"===l?t[\"y\"]=c[\"y\"]:\"vertical\"===l&&(t[\"x\"]=c[\"x\"]));let i=__classPrivateFieldGet(this,_SplineTool_stage,\"f\").snapManager.snapPoint(new DOMPoint(v[\"x\"]+t[\"x\"]-c[\"x\"],v[\"y\"]+t[\"y\"]-c[\"y\"]));let s=new ee_1.default(v,i);for(let p of r){let l=this.Mi.filter(e=>e.spline===p).map(e=>e.index);let r=s.matrixTransform(p[u]);if(\"line\"===p.localName){let t=[...p[o]];for(let e of l)t[e]=new DOMPoint(p[o][e][\"x\"]+r[\"x\"],p[o][e][\"y\"]+r[\"y\"]);p.setAttribute(\"x1\",t[0][\"x\"]);p.setAttribute(\"y1\",t[0][\"y\"]);p.setAttribute(\"x2\",t[1][\"x\"]);p.setAttribute(\"y2\",t[1][\"y\"])}else{if(\"polyline\"===p.localName||\"polygon\"===p.localName){let t=[...p[o]];for(let e of l)t[e]=new DOMPoint(p[o][e][\"x\"]+r[\"x\"],p[o][e][\"y\"]+r[\"y\"]);p.setAttribute(\"points\",t.map(e=>[e[\"x\"],e[\"y\"]]).flat().join(\" \"))}else{if(\"path\"===p.localName){let o=p[n];let a=p[d];for(let i of l){let s=o[i];let e=o[i+1];let n=a[i];let t=a[i+1];if(\"M\"===s.values||\"L\"===s.values){s.values[0]=n.values[0]+r[\"x\"];s.values[1]=n.values[1]+r[\"y\"];if(\"C\"===(e===null||e===void 0?void 0:e.values)){e.values[0]=t.values[0]+r[\"x\"];e.values[1]=t.values[1]+r[\"y\"]}else{if(\"Z\"===(e===null||e===void 0?void 0:e.values)){let e=(0,common_1.Ve)(s,o);let t=e[0];let i=e[1];let l=(0,common_1.Ve)(n,a);t.values[0]=s.values[0];t.values[1]=s.values[1];if(\"C\"===(i===null||i===void 0?void 0:i.values)){i.values[0]=l[1].values[0]+r[\"x\"];i.values[1]=l[1].values[1]+r[\"y\"]}}}}else{if(\"R\"===s.values){s.values[0]=n.values[0]+r[\"x\"];s.values[1]=n.values[1]+r[\"y\"];if(\"Z\"===(e===null||e===void 0?void 0:e.type)){let e=(0,common_1.Ve)(s,o);let t=e[0];(0,common_1.Ve)(n,a);t.values[0]=s.values[0];t.values[1]=s.values[1]}}else{if(\"U\"===s.type){if(\"Z\"===(e===null||e===void 0?void 0:e.type)){s.values[0]=n.values[0]+r[\"x\"];s.values[1]=n.values[1]+r[\"y\"]}else{s.values[0]=n.values[0]+r[\"x\"];s.values[1]=n.values[1]+r[\"y\"];if(\"Z\"===(e===null||e===void 0?void 0:e.type)){let e=(0,common_1.Ve)(s,o);let t=e[0];(0,common_1.Ve)(n,a);t.values[0]=s.values[0];t.values[1]=s.values[1]}}}else{if(\"C\"===s.type){s.values[2]=n.values[2]+r[\"x\"];s.values[3]=n.values[3]+r[\"y\"];s.values[4]=n.values[4]+r[\"x\"];s.values[5]=n.values[5]+r[\"y\"];if(\"C\"===(e===null||e===void 0?void 0:e.type)){e.values[0]=t.values[0]+r[\"x\"];e.values[1]=t.values[1]+r[\"y\"]}else{if(\"Z\"===(e===null||e===void 0?void 0:e.type)){let e=(0,common_1.Ve)(s,o);let t=e[0];let i=e[1];let l=(0,common_1.Ve)(n,a);t.values[0]=s.values[4];t.values[1]=s.values[5];if(\"C\"===i.type){i.values[0]=l[1].values[0]+r[\"x\"];i.values[1]=l[1].values[1]+r[\"y\"]}}}}}}}(0,common_1.Ae)(p,o)}}}}}});window.addEventListener(\"pointerup\",s=()=>{window.removeEventListener(\"pointermove\",i);window.removeEventListener(\"pointerup\",s);for(let t of r)if(\"line\"===t.localName){t.setAttribute(\"x1\",(0,common_1.te)(t[\"x1\"].baseVal.value,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision));t.setAttribute(\"y1\",(0,common_1.te)(t[\"y1\"].baseVal.value,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision));t.setAttribute(\"x2\",(0,common_1.te)(t[\"x2\"].baseVal.value,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision));t.setAttribute(\"y2\",(0,common_1.te)(t[\"y2\"].baseVal.value,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision))}else{if(\"polyline\"===t.localName||\"polygon\"===t.localName){let e=[...t.points].map(e=>[(0,common_1.te)(e[\"x\"],__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision),(0,common_1.te)(e[\"y\"],__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision)]);t.setAttribute(\"points\",e.flat().join(\" \"))}else{if(\"path\"===t.localName){let e=t[n];(0,common_1.Ae)(t,e,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision)}}}__classPrivateFieldGet(this,_SplineTool_stage,\"f\").snapManager.snapEnd();this.Ei=null;this.Li()})};this.Wi=e=>{let a=e.target.closest(\".primary-node-grippie\");let r=a[wd];if(\"polyline\"===r.localName||\"polygon\"===r.localName||\"path\"===r.localName){let e=a[yd];let l=(0,common_1.Te)(r,!0);let t=l[e];let i=l[e+1]||null;let s=l[e-1]||null;let n=(0,common_1.Ve)(t,l);let o=!1;(0,common_1.Ke)(l);if(\"M\"===t.type){if(\"C\"===i.type){if(!1===(i.values[0]===t.values[0]&&i.values[1]===t.values[1])){i.values[0]=t.values[0];i.values[1]=t.values[1];o=!0}}}else{if(\"C\"===t[\"type\"]){if(null===i||\"M\"===i[\"type\"]){if(!1===(t.values[2]===t.values[4]&&t.values[3]===t.values[5])){t.values[2]=t.values[4];t.values[3]=t.values[5];o=!0}}else{if(\"Z\"===i[\"type\"]){let e=n[1];\"C\"===e[\"type\"]&&(!1===(t.values[4]===e[\"values\"][0]&&t.values[5]===e[\"values\"][1]&&t.values[4]===t.values[2]&&t.values[5]===t.values[3])?(e[\"values\"][0]=t.values[4],e[\"values\"][1]=t.values[5],t.values[2]=t.values[4],t.values[3]=t.values[5]):(0,common_1.Ze)(s,t,e),o=!0)}else{\"C\"===i[\"type\"]&&(!1===(i.values[0]===t.values[4]&&i.values[1]===t.values[5]&&t.values[2]===t.values[4]&&t.values[3]===t.values[5])?(t.values[2]=t.values[4],t.values[3]=t.values[5],i.values[0]=t.values[4],i.values[1]=t.values[5]):(0,common_1.Ze)(s,t,i),o=!0)}}}}if(o){__classPrivateFieldGet(this,_SplineTool_stage,\"f\").undoManager.checkpoint(\"#reset-control-points\",\"#edit-tool\");(0,common_1.Qe)(l);if(\"polyline\"===r.localName||\"polygon\"===r.localName){let t=(0,common_1.Zi)(\"svg:path\");for(let e of r.attributes)!1===[\"x1\",\"y1\",\"x2\",\"y2\",\"points\"].includes(e.name)&&t.setAttribute(e.name,e.value);(0,common_1.Ae)(t,l,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision);r[\"replaceWith\"](t);let e=Array.from(__classPrivateFieldGet(this,_SplineTool_stage,\"f\").selectedElements.keys()).map(e=>e===r?t:e);let i=this.selectedNodes.map(e=>e.spline===r?{spline:t,index:e.index}:e);const p=window.structuredClone(e);__classPrivateFieldGet(this,_SplineTool_stage,\"f\").selectedElements.sets(p);this.selectedNodes=i;r=t}else(0,common_1.Ae)(r,l,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision)}}};this.ji=d=>{if(d.buttons<=1){let n;let o;let a=d[\"target\"];let r=new DOMPoint(d[\"clientX\"],d[\"clientY\"]);let p=r;window.addEventListener(\"pointermove\",n=e=>{let t=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);let i=e[\"timeStamp\"]-d[\"timeStamp\"];let l=(0,common_1.Kt)(r,t)>3||i>80;let s=!1===(0,common_1.qt)(p,t,null);p=t;if(!0===l&&!0===s){window.removeEventListener(\"pointermove\",n);window.removeEventListener(\"pointerup\",o);this[\"Ki\"](d,a)}});window.addEventListener(\"pointerup\",o=()=>{window.removeEventListener(\"pointermove\",n);window.removeEventListener(\"pointerup\",o)})}};this.Ki=(e,t)=>{let i=t.getAttribute(\"data-index\");let l=t[wd];let n=this.Zi(l);let o=n.inverse();__classPrivateFieldGet(this,_SplineTool_stage,\"f\").undoManager.checkpoint(\"#move-control-points\",\"#edit-tool\");__classPrivateFieldGet(this,_SplineTool_stage,\"f\").snapManager.snapStart(!0);let s=(0,common_1.Te)(l,!0);(0,common_1.Ke)(s);let a;let r;let p=t[yd];let d=s[p];let u=s[p-1]||null;let c=s[p+1]||null;let v=(0,common_1.Ve)(d,s);let m=(0,common_1.We)(d,s);let h=new DOMPoint(e[\"clientX\"],e[\"clientY\"]).matrixTransform(o);let _=[...d[\"values\"]];let f=null;let y=null;let g=null;f=\"M\"===u[\"type\"]&&m?v[v[\"length\"]-2]:u;c&&(\"Z\"===c[\"type\"]?y=m?v[1]:null:\"C\"===c[\"type\"]&&(y=c));\"1\"===i?\"M\"===f[\"type\"]||\"L\"===f[\"type\"]?g=new DOMPoint(f[\"values\"][0],f[\"values\"][1]):\"C\"===f[\"type\"]&&(g=new DOMPoint(f[\"values\"][4],f[\"values\"][5])):\"2\"===i&&(g=new DOMPoint(d[\"values\"][4],d[\"values\"][5]));let w=\"sharp\";let P=g.matrixTransform(n);let x=new DOMPoint(h[\"x\"],h[\"y\"]);this[\"Ti\"]=t;let M=()=>{let e=__classPrivateFieldGet(this,_SplineTool_stage,\"f\").ctrlKey;let t=__classPrivateFieldGet(this,_SplineTool_stage,\"f\").shiftKey;!0===e&&!1===t?w=\"sharp\":!1===e&&!0===t?\"1\"===i?w=\"C\"===(f===null||f===void 0?void 0:f[\"type\"])?\"smooth\":\"sharp\":\"2\"===i&&(w=\"C\"===(y===null||y===void 0?void 0:y[\"type\"])?\"smooth\":\"sharp\"):!0===e&&!0===t?\"1\"===i?w=\"C\"===(f===null||f===void 0?void 0:f[\"type\"])?\"symmetric-smooth\":\"sharp\":\"2\"===i&&(w=\"C\"===(y===null||y===void 0?void 0:y[\"type\"])?\"symmetric-smooth\":\"sharp\"):!1===e&&!1===t&&(\"1\"===i?w=(0,common_1.Ye)(f,d):\"2\"===i&&(w=(0,common_1.Ye)(d,y)))};let b=()=>{if(\"1\"===i){let s;if(__classPrivateFieldGet(this,_SplineTool_stage,\"f\").shiftKey)s=x;else{let e=x[\"x\"]-h[\"x\"];let t=x[\"y\"]-h[\"y\"];s=new DOMPoint(_[0]+e,_[1]+t)}let e=s.matrixTransform(n);s=__classPrivateFieldGet(this,_SplineTool_stage,\"f\").snapManager.snapPoint(e).matrixTransform(o);d.values[0]=s[\"x\"];d.values[1]=s[\"y\"];if(\"smooth\"===w){let e=new DOMPoint(f.values[2],f.values[3]);let t=new ee_1.default(g,s);let i=new ee_1.default(g,e);let l=t.getOppositeVector();l[\"length\"]=i[\"length\"];f.values[2]=g[\"x\"]+l[\"x\"];f.values[3]=g[\"y\"]+l[\"y\"]}else{if(\"symmetric-smooth\"===w){let e=new ee_1.default(g,s);e=e[\"negate\"]();f.values[2]=g[\"x\"]+e[\"x\"];f.values[3]=g[\"y\"]+e[\"y\"]}}}else{if(\"2\"===i){let s;if(__classPrivateFieldGet(this,_SplineTool_stage,\"f\").shiftKey)s=x;else{let e=x[\"x\"]-h[\"x\"];let t=x[\"y\"]-h[\"y\"];s=new DOMPoint(_[2]+e,_[3]+t)}{let e=s.matrixTransform(n);s=__classPrivateFieldGet(this,_SplineTool_stage,\"f\").snapManager.snapPoint(e).matrixTransform(o)}d.values[2]=s[\"x\"];d.values[3]=s[\"y\"];if(\"smooth\"===w){let e=new DOMPoint(y.values[0],y.values[1]);let t=new ee_1.default(g,s);let i=new ee_1.default(g,e);let l=t.getOppositeVector();l.length=i.length;y.values[0]=g[\"x\"]+l[\"x\"];y.values[1]=g[\"y\"]+l[\"y\"]}else{if(\"symmetric-smooth\"===w){let e=new ee_1.default(g,s);e=e.negate();y.values[0]=g[\"x\"]+e[\"x\"];y.values[1]=g[\"y\"]+e[\"y\"]}}}}(0,common_1.Ae)(l,s)};window.addEventListener(\"pointermove\",a=e=>{let t=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);if(__classPrivateFieldGet(this,_SplineTool_stage,\"f\").shiftKey){let[e]=(0,common_1.ii)(P,t,22.5);t=e}x=t.matrixTransform(o);b()});window.addEventListener(\"pointerup\",r=()=>{window.removeEventListener(\"pointermove\",a);window.removeEventListener(\"pointerup\",r);(0,common_1.Qe)(s);(0,common_1.Ae)(l,s,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision);this.Ti=null;__classPrivateFieldGet(this,_SplineTool_stage,\"f\").snapManager.snapEnd()});M()};this.Yi=e=>{let t=e.target;let i=t.getAttribute(\"data-index\");let l=t[wd];let s=t[yd];let n=(0,common_1.Te)(l,!0);let o=n[s];let a=n[s-1]||null;\"1\"===i?\"C\"===a[\"type\"]?(o.values[0]=a[\"values\"][4],o.values[1]=a[\"values\"][5]):\"M\"!==a[\"type\"]&&\"L\"!==a[\"type\"]||(o.values[0]=a[\"values\"][0],o.values[1]=a[\"values\"][1]):\"2\"===i&&(o.values[2]=o.values[4],o.values[3]=o.values[5]);__classPrivateFieldGet(this,_SplineTool_stage,\"f\").undoManager.checkpoint(\"#reset-control-point\",\"#edit-tool\");(0,common_1.Qe)(n);(0,common_1.Ae)(l,n,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision)};this.Vi=u=>{if(u.buttons<=1){let n;let o;let a=new DOMPoint(u[\"clientX\"],u[\"clientY\"]);let r=a;let e=u.target.closest(\".curve-grippie\");let p=u.target;let t=p.closest(\".curve-grippie\")[wd];let i=[...e.children].indexOf(p);let d=!1;window.addEventListener(\"pointermove\",n=e=>{let t=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);let i=e.timeStamp-u.timeStamp;let l=(0,common_1.Kt)(a,t)>3||i>80;let s=!1===(0,common_1.qt)(r,t,null);r=t;if(!0===l&&!0===s){window.removeEventListener(\"pointermove\",n);window.removeEventListener(\"pointerup\",o);this[\"Qi\"](e,p);d=!0}});window.addEventListener(\"pointerup\",o=()=>{window.removeEventListener(\"pointermove\",n);window.removeEventListener(\"pointerup\",o);!1===d&&this.Ji(t,i)})}};this.Qi=(t,i)=>{let e;let l;let s=i.closest(\".curve-grippie\");let r=s[wd],p=(0,common_1.Te)(r,!0);let n=[...s.children].indexOf(i);let d=p[n];let o=p[n-1];let a=p[n+1];let u=(0,common_1.Ve)(d,p);let c=(0,common_1.We)(d,p);let v=null;let m=null;let h=!1;let _=!1;let f=null;let y=null;let g=null;let w=null;let P=null;let x=this.Zi(r).inverse();__classPrivateFieldGet(this,_SplineTool_stage,\"f\").undoManager.checkpoint(\"#move-control-points\",\"#edit-tool\");this.Ai=s;this[\"#curve-grippies\"].style.display=\"none\";if(\"line\"===r.localName||\"polyline\"===r.localName||\"polygon\"===r.localName){let t=(0,common_1.Zi)(\"svg:path\");for(let e of r.attributes)!1===[\"x1\",\"y1\",\"x2\",\"y2\",\"points\"].includes(e.name)&&t.setAttribute(e.name,e.value);(0,common_1.Ae)(t,p);r.replaceWith(t);let e=Array.from(__classPrivateFieldGet(this,_SplineTool_stage,\"f\").selectedElements.keys()).map(e=>e===r?t:e);let i=this.selectedNodes.map(e=>e.spline===r?{spline:t,index:e.index}:e);__classPrivateFieldGet(this,_SplineTool_stage,\"f\").selectedElements.sets(e);this.selectedNodes=i;r=t}(0,common_1.Ke)(p);v=\"M\"===o.type&&c?u[u.length-2]:o;a&&(\"Z\"===a.type?m=c?u[1]:null:\"C\"===a.type&&(m=a));{let e=new DOMPoint(t[\"clientX\"],t[\"clientY\"]).matrixTransform(x);g=new DOMPoint(e[\"x\"],e[\"y\"]);w=(0,common_1.Je)(i,e)[0];P=new ee_1.default(e,w);\"M\"===v.type||\"L\"===v.type?f=new DOMPoint(v.values[0],v.values[1]):\"C\"===v.type&&(f=new DOMPoint(v.values[4],v.values[5]));\"M\"===d.type||\"L\"===d.type?y=new DOMPoint(d.values[0],d.values[1]):\"C\"===d.type&&(y=new DOMPoint(d.values[4],d.values[5]))}const M=()=>{let e=__classPrivateFieldGet(this,_SplineTool_stage,\"f\").ctrlKey;let t=__classPrivateFieldGet(this,_SplineTool_stage,\"f\").shiftKey;!0===e&&!1===t?(h=!1,_=!1):!1===e&&!0===t?(h=\"C\"===(v===null||v===void 0?void 0:v[\"type\"])&&\"smooth\",_=\"C\"===(m===null||m===void 0?void 0:m[\"type\"])&&\"smooth\"):!0===e&&!0===t?(h=\"C\"===(v===null||v===void 0?void 0:v[\"type\"])&&\"symmetric-smooth\",_=\"C\"===(m===null||m===void 0?void 0:m[\"type\"])&&\"symmetric-smooth\"):!1===e&&!1===t&&(h=(0,common_1.Ye)(v,d),_=(0,common_1.Ye)(d,m))};const b=()=>{let e=new DOMPoint(d.values[0],d.values[1]);let t=new DOMPoint(d.values[2],d.values[3]);let i=(0,common_1.pd)(w,f,e,t,y);let l=1;if(i<=1/6?l=0:i<=.5?l=Math.pow((6*i-1)/2,3)/2:i<=5/6&&(l=(1-Math.pow((6*(1-i)-1)/2,3))/2+.5),-1===i)return;let s=(1-l)/(3*i*(1-i)*(1-i));let n=l/(3*i*i*(1-i));let o=g[\"x\"]-w[\"x\"];let a=g[\"y\"]-w[\"y\"];d.values[0]=d.values[0]+s*o;d.values[1]=d.values[1]+s*a;d.values[2]=d.values[2]+n*o;d.values[3]=d.values[3]+n*a;\"smooth\"===h?(0,common_1.qe)(d,v,!1):\"symmetric-smooth\"===h&&(0,common_1.qe)(d,v,!0);\"smooth\"===_?(0,common_1.Xe)(d,m,!1):\"symmetric-smooth\"===_&&(0,common_1.Xe)(d,m,!0);w=g;(0,common_1.Ae)(r,p)};window.addEventListener(\"pointermove\",e=e=>{g=new DOMPoint(e[\"clientX\"],e[\"clientY\"]).matrixTransform(x);g[\"x\"]+=P[\"x\"];g[\"y\"]+=P[\"y\"];b()});window.addEventListener(\"pointerup\",l=()=>{window.removeEventListener(\"pointermove\",e);window.removeEventListener(\"pointerup\",l);(0,common_1.Qe)(p);(0,common_1.Ae)(r,p,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision);this.Ai=null;this[\"#curve-grippies\"].style.display=\"\";this.Li()});M()};this.Ji=(e,t)=>{let i=(0,common_1.Te)(e,!0);let l=t-1;let s=i[t];let n=i[l];let o=(0,common_1.Ve)(s,i);let a=(0,common_1.We)(s,i);n?a&&\"M\"===n[\"type\"]?\"polygon\"===e[\"localName\"]?this.Mi=[{spline:e,index:t},{spline:e,index:0}]:\"path\"===e[\"localName\"]&&(this.Mi=[{spline:e,index:t},{spline:e,index:o[\"length\"]-2}]):this.Mi=[{spline:e,index:t},{spline:e,index:l}]:this.Mi=[{spline:e,index:t}],this.Pi();this.splineHud.dispatchEvent(new CustomEvent(\"selectednodeschange\"))};this.qi=e=>{let t=e.target.closest(\".curve-grippie\");let i=e.target;let l=t[wd];let s=this[\"Zi\"](l).inverse();let a=null;let r=null;let n=new DOMPoint(e[\"clientX\"],e[\"clientY\"]).matrixTransform(s);let[p]=(0,common_1.Je)(i,n);let d=(0,common_1.Te)(l,!0);let u=[...t.children].indexOf(i);let c=d[u];if(\"L\"===c[\"type\"]){let e=new DOMPoint(c.values[0],c.values[1]);a={type:\"L\",values:[p[\"x\"],p[\"y\"]]};r={type:\"L\",values:[e[\"x\"],e[\"y\"]]}}else{if(\"C\"===c.type){let e,t=d[u-1]||null;\"M\"===t.type||\"L\"===t.type?e=new DOMPoint(t.values[0],t.values[1]):\"C\"===t.type&&(e=new DOMPoint(t.values[4],t.values[5]));let i=new DOMPoint(c.values[4],c.values[5]);let l=new DOMPoint(c.values[0],c.values[1]);let s=new DOMPoint(c.values[2],c.values[3]);let n=(0,common_1.pd)(p,e,l,s,i);let o=((e,t,i,l,s)=>{let n=(t[\"x\"]-e[\"x\"])*s+e[\"x\"];let o=(t[\"y\"]-e[\"y\"])*s+e[\"y\"];let a=(i[\"x\"]-t[\"x\"])*s+t[\"x\"];let r=(i[\"y\"]-t[\"y\"])*s+t[\"y\"];let p=(l[\"x\"]-i[\"x\"])*s+i[\"x\"];let d=(l[\"y\"]-i[\"y\"])*s+i[\"y\"];let u=(a-n)*s+n;let c=(r-o)*s+o;let v=(p-a)*s+a;let m=(d-r)*s+r;let h=(v-u)*s+u;let _=(m-c)*s+c;return[[new DOMPoint(e[\"x\"],e[\"y\"]),new DOMPoint(n,o),new DOMPoint(u,c),new DOMPoint(h,_)],[new DOMPoint(h,_),new DOMPoint(v,m),new DOMPoint(p,d),new DOMPoint(l[\"x\"],l[\"y\"])]]})(e,l,s,i,n);if(-1===n)return;a={type:\"C\",values:[o[0][1][\"x\"],o[0][1][\"y\"],o[0][2][\"x\"],o[0][2][\"y\"],o[0][3][\"x\"],o[0][3][\"y\"]]};r={type:\"C\",values:[o[1][1][\"x\"],o[1][1][\"y\"],o[1][2][\"x\"],o[1][2][\"y\"],o[1][3][\"x\"],o[1][3][\"y\"]]}}}__classPrivateFieldGet(this,_SplineTool_stage,\"f\").undoManager.checkpoint(\"#add-node\",\"#edit-tool\");d=[...d.slice(0,u),a,r,...d.slice(u+1)];if(\"line\"===l.localName){let t=(0,common_1.Zi)(\"svg:polyline\");for(let e of l.attributes)!1===[\"x1\",\"y1\",\"x2\",\"y2\"].includes(e.name)&&t.setAttribute(e.name,e.value);let e=d.map(e=>e.values).flat().map(e=>(0,common_1.te)(e,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision));t.setAttribute(\"points\",e.join(\" \"));l.replaceWith(t);Array.from(__classPrivateFieldGet(this,_SplineTool_stage,\"f\").selectedElements.keys()).forEach(e=>{__classPrivateFieldGet(this,_SplineTool_stage,\"f\").selectedElements.set(e===l?t:e)});l=t}else{if(\"polyline\"===l.localName||\"polygon\"===l.localName){let e=d.map(e=>e.values).flat().map(e=>(0,common_1.te)(e,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision));l.setAttribute(\"points\",e.join(\" \"))}else(0,common_1.Ae)(l,d,__classPrivateFieldGet(this,_SplineTool_stage,\"f\").geometryPrecision)}this.Mi=[{spline:l,index:u}];this.Ri();this.splineHud.dispatchEvent(new CustomEvent(\"selectednodeschange\"))};this.Li=()=>{if(this[\"Ai\"]||this[\"Ei\"]||this[\"Ti\"])return;let r=document.createDocumentFragment();for(let t of this[\"Oi\"]){let e=this[\"es\"](t);let i=(0,common_1.Te)(t,!0);let l=(0,common_1.Zi)(\"svg:g\");l[wd]=t;l.setAttribute(\"class\",\"curve-grippie\");l.setAttribute(\"transform\",e[\"toString\"]());r.append(l);let s=0;let n=0;let o=0;let a=0;for(let t of i){let e=(0,common_1.Zi)(\"svg:path\");\"M\"===t[\"type\"]?((0,common_1.Ae)(e,[t]),s=t[\"values\"][0],n=t[\"values\"][1],o=s,a=n):\"C\"===t[\"type\"]?((0,common_1.Ae)(e,[{type:\"M\",values:[s,n]},t]),s=t[\"values\"][4],n=t[\"values\"][5]):\"L\"===t[\"type\"]?((0,common_1.Ae)(e,[{type:\"M\",values:[s,n]},t]),s=t[\"values\"][0],n=t[\"values\"][1]):\"Z\"===t[\"type\"]&&((0,common_1.Ae)(e,[{type:\"M\",values:[s,n]},{type:\"L\",values:[o,a]}]),s=o,n=a),l.append(e)}}this[\"#curve-grippies\"].innerHTML=\"\";this[\"#curve-grippies\"].append(r);this._i()};this.Ri=()=>{var t,i,l;const d=fd/__classPrivateFieldGet(this,_SplineTool_stage,\"f\").scale;const u=.3*d;const h=[];const _=[];const f=[];const y=(e,t,i,l,s,n,o=\"normal\")=>{const a=(0,common_1.Zi)(\"svg:g\");a.setAttribute(\"class\",\"primary-node-grippie\");a.setAttribute(\"data-position\",e);a.setAttribute(\"data-subpath-type\",o);a[wd]=t;a[yd]=i;a[kd]=l;let r=l.matrixTransform(s);let p='<circle class=\"outer-circle\" cx=\"'+r.x+'\" cy=\"'+r.y+'\" r=\"'+d+'\"></circle>';\"start\"!==e&&\"end\"!==e||(p+='<circle class=\"inner-circle\" cx=\"'+r.x+'\" cy=\"'+r.y+'\" r=\"'+u+'\"></circle>');a.innerHTML=p;n&&a.setAttribute(\"data-selected\",\"\");return a};const g=(e,t,i,l)=>{let s=(0,common_1.Zi)(\"svg:circle\");s.setAttribute(\"class\",\"secondary-node-grippie\");s.setAttribute(\"data-index\",i);s.setAttribute(\"cx\",l.x);s.setAttribute(\"cy\",l.y);s.setAttribute(\"r\",bd/__classPrivateFieldGet(this,_SplineTool_stage,\"f\").scale);s[wd]=e;s[yd]=t;return s};const w=(e,t=!1)=>{let i=(0,common_1.Zi)(t?\"svg:polygon\":\"svg:polyline\");i.setAttribute(\"class\",\"helper-line\");i.setAttribute(\"points\",e.map(e=>[e.x,e.y]).flat().join(\" \"));return i};for(let m of this.Oi){let v=this.es(m);if(\"line\"===m.localName)for(let l of[0,1]){let e=this.Mi.find(e=>e.spline===m&&e.index===l);let t=new DOMPoint(m[\"x\"+(l+1)].baseVal.value,m[\"y\"+(l+1)].baseVal.value);let i=y(0===l?\"start\":\"end\",m,l,t,v,e);h.push(i)}else{if(\"polyline\"===m.localName)for(let s=0;s<m.points.length;s+=1){let e=this.Mi.find(e=>e.spline===m&&e.index===s);let t=DOMPoint.fromPoint(m.points[s]);let i=\"mid\";0===s?i=\"start\":s===m.points.length-1&&(i=\"end\");let l=y(i,m,s,t,v,e);h.push(l)}else{if(\"polygon\"===m.localName)for(let l=0;l<m.points.length;l+=1){let e=this.Mi.find(e=>e.spline===m&&e.index===l);let t=DOMPoint.fromPoint(m.points[l]);let i=y(\"mid\",m,l,t,v,e);h.push(i)}else{if(\"path\"===m.localName){let e=(0,common_1.Te)(m);let c=-1;console.log(e);console.log((0,common_1.$e)(e));for(let u of(0,common_1.$e)(e))if(\"R\"===((t=u[1])===null||t===void 0?void 0:t.type)){let o=\"Z\"===u[u.length-1].type;let a=-1;for(let n of u){a+=1;c+=1;let e;let t=this.Mi.find(e=>e.spline===m&&e.index===c);let i=u[a+1]||null;let l=\"mid\";if(\"M\"===n.type){if(!1===o){e=new DOMPoint(n.values[0],n.values[1]);l=\"start\"}else{if(\"R\"!==i.type)continue;e=new DOMPoint(n.values[0],n.values[1])}}else{if(\"R\"!==n.type)continue;e=new DOMPoint(n.values[0],n.values[1]);!1===o&&null===i&&(l=\"end\")}let s=y(l,m,c,e,v,t,\"rom\");h.push(s)}}else{if(\"U\"===((i=u[1])===null||i===void 0?void 0:i.type)){let o=\"Z\"===u[u.length-1].type;let i=[];for(let t of u)if(\"Z\"!==t.type){let e=new DOMPoint(...t.values).matrixTransform(v);i.push(e)}let e=w(i,o);f.push(e);let a=-1;for(let n of u){a+=1;c+=1;let e;let t=this.Mi.find(e=>e.spline===m&&e.index===c);let i=u[a+1]||null;let l=\"mid\";if(\"M\"===n.type){if(!1===o){e=new DOMPoint(n.values[0],n.values[1]);l=\"start\"}else{if(\"U\"!==i.type)continue;e=new DOMPoint(n.values[0],n.values[1])}}else{if(\"U\"!==n.type)continue;e=new DOMPoint(n.values[0],n.values[1]);!1===o&&null===i&&(l=\"end\")}let s=y(l,m,c,e,v,t,\"basis\");h.push(s)}}else{if(\"N\"===((l=u[1])===null||l===void 0?void 0:l.type)){}else{let s=\"Z\"===u[u.length-1].type;let n=-1;let p=u[1];let d=e.indexOf(p);for(let r of u){n+=1;c+=1;let e;let t=this.Mi.find(e=>e.spline===m&&e.index===c);let i=\"mid\";let a=u[n+1]||null;console.log(r);if(\"M\"===r.type){if(!1!==s)continue;e=new DOMPoint(r.values[0],r.values[1]);i=\"start\"}else{if(\"L\"===r.type){e=new DOMPoint(r.values[0],r.values[1]);!1===s&&null===a&&(i=\"end\")}else{if(\"C\"!==r.type)continue;e=new DOMPoint(r.values[4],r.values[5]);!1===s&&null===a&&(i=\"end\")}}let l=y(i,m,c,e,v,t);h.push(l);if(t){let s;let l=null;let n=null;\"M\"===r.type||\"L\"===r.type?s=new DOMPoint(r.values[0],r.values[1]):\"C\"===r.type&&(s=new DOMPoint(r.values[4],r.values[5]));\"C\"===r.type&&(l=new DOMPoint(r.values[2],r.values[3]));a&&(\"C\"===a.type?n=new DOMPoint(a.values[0],a.values[1]):\"Z\"===a.type&&\"C\"===p.type&&(n=new DOMPoint(p.values[0],p.values[1])));let o=[];if(l&&!1===(0,common_1.qt)(s,l)){let e=s.matrixTransform(v);let t=l.matrixTransform(v);let i=g(m,c,\"2\",t);_.push(i);o.push(t,e)}if(n&&!1===(0,common_1.qt)(s,n)){let e=s.matrixTransform(v);let t=n.matrixTransform(v);let i=\"Z\"===a.type?d:c+1;let l=g(m,i,\"1\",t);_.push(l);o.push(e,t)}if(o.length>1){let e=w(o);f.push(e)}}}}}}}}}}}const s=document.createDocumentFragment();const n=document.createDocumentFragment();const o=document.createDocumentFragment();for(let e of h)!1===e.hasAttribute(\"data-selected\")&&s.append(e);for(let e of h)!0===e.hasAttribute(\"data-selected\")&&s.append(e);for(let e of _)n.append(e);for(let e of f)o.append(e);this[\"#primary-node-grippies\"].innerHTML=\"\";this[\"#primary-node-grippies\"].append(s);this[\"#secondary-node-grippies\"].innerHTML=\"\";this[\"#secondary-node-grippies\"].append(n);this[\"#helper-lines\"].innerHTML=\"\";this[\"#helper-lines\"].append(o)};this.Bi=()=>{let t=fd/__classPrivateFieldGet(this,_SplineTool_stage,\"f\").scale;let i=.3*t;for(let e of this[\"#primary-node-grippies\"].children){e.children[0].setAttribute(\"r\",t.toString());e.children[1]&&e.children[1].setAttribute(\"r\",i.toString())}for(let e of this[\"#secondary-node-grippies\"].children)e.setAttribute(\"r\",(bd/__classPrivateFieldGet(this,_SplineTool_stage,\"f\").scale).toString())};this._i=()=>{for(let l of this[\"#curve-grippies\"].children){let e=l[wd];let t=getComputedStyle(e);let i=parseFloat(t.getPropertyValue(\"stroke-width\"))*__classPrivateFieldGet(this,_SplineTool_stage,\"f\").scale;i<10&&(i=10);l.style.setProperty(\"stroke-width\",i.toString())}};this.Di=()=>{let s=[];for(let l of this.Oi)if(\"polygon\"===l.localName||\"polyline\"===l.localName){for(let e=0;e<l.points.length;e+=1)s.push({spline:l,index:e})}else{if(\"line\"===l.localName){s.push({spline:l,index:0});s.push({spline:l,index:1})}else{if(\"path\"===l.localName){let i=(0,common_1.Te)(l,!0);for(let t=0;t<i.length;t+=1){let e=i[t];([\"C\",\"L\",\"R\",\"U\",\"N\"].includes(e.type)||\"M\"===e.type&&!1===(0,common_1.We)(e,i))&&s.push({spline:l,index:t})}}}}this.Mi=s;this.Ri();this.splineHud.dispatchEvent(new CustomEvent(\"selectednodeschange\"))};this.deselectAllNodes=()=>{this.Mi=[];this.Pi();this.splineHud.dispatchEvent(new CustomEvent(\"selectednodeschange\"))};this.Gi=(e=\"smooth\")=>{this.splineHud.dispatchEvent(new CustomEvent(\"selectednodeschange\"))};this.Fi=()=>{let i=[];let s=[];let l=e=>{for(let t of e)if(\"path\"===t.localName){if(t.hasAttribute(\"d\")&&!t.hasAttribute(\"data-bx-shape\")){t[vd]=null;i.push(t)}}else{if(\"polyline\"===t.localName||\"polygon\"===t.localName||\"line\"===t.localName){t[vd]=null;i.push(t)}else{if(\"text\"===t.localName){let l=t;let e=[...t.children].find(e=>\"textPath\"===e.localName);if(e){let i=e.getAttribute(\"href\");if(i){let e=i.trim().substring(1);let t=__classPrivateFieldGet(this,_SplineTool_stage,\"f\").workspaces.querySelector(\"#\"+CSS.escape(e));if((t===null||t===void 0?void 0:t.hasAttribute(\"d\"))&&!t.hasAttribute(\"data-bx-shape\")){t[vd]=l;s.push(t)}}}}else[\"g\",\"a\"].includes(t.localName)&&l(t.children)}}};l(Array.from(__classPrivateFieldGet(this,_SplineTool_stage,\"f\").selectedElements.keys()));i=i.filter(e=>!1===s.includes(e));return[...i,...s]};this.Zi=t=>{let i=null;let l=t[vd];if(l){let e=(0,common_1.ct)(t);i=t.closest(\"defs\")?(0,common_1.ut)(l).multiply(e):(0,common_1.ut)(l.parentElement).multiply(e)}else i=(0,common_1.ut)(t);return i};this.es=i=>{let l=null;let s=i[vd];if(s){let e;e=i.closest(\"defs\")?(0,common_1.pt)(s,this.splineHud):(0,common_1.pt)(s.parentElement,this.splineHud);let t=(0,common_1.ct)(i);l=e.multiply(t)}else l=(0,common_1.pt)(i,this.splineHud);return l};__classPrivateFieldSet(this,_SplineTool_stage,e,\"f\");this.l=!1;this.zi=0;this.Oi=[];this.Mi=[];this.Ei=null;this.Ti=null;this.Ai=null;this.$i=this.Li;this.Pi=this.Ri;this.Ii=this.Bi;this.Ui=this._i;this.splineHud.innerHTML=`<style>\n        #spline-hud [uid=\"grippies\"] {\n          cursor: default;\n        }\n        #spline-hud [uid=\"grippies\"]:focus {\n          outline: none;\n        }\n\n        #spline-hud .primary-node-grippie .outer-circle {\n          fill: white;\n          stroke: #4d2782;\n          stroke-width: 2;\n          vector-effect: non-scaling-stroke;\n        }\n        #spline-hud .primary-node-grippie[data-selected] .outer-circle {\n          fill: #bc9aec;\n        }\n        #spline-hud #grippies:focus .primary-node-grippie[data-selected] .outer-circle {\n          fill: #a370ea;\n        }\n        #spline-hud[mode^=\"draw-\"]   .primary-node-grippie[data-position=\"mid\"],\n        #spline-hud[mode$=\"-basis\"]  .primary-node-grippie:not([data-subpath-type=\"basis\"]),\n        #spline-hud[mode$=\"-rom\"]    .primary-node-grippie:not([data-subpath-type=\"rom\"]),\n        #spline-hud[mode$=\"-levien\"] .primary-node-grippie:not([data-subpath-type=\"levien\"]) {\n          display: none;\n        }\n    \n        #spline-hud .primary-node-grippie .inner-circle {\n          pointer-events: none;\n          fill: #4d2782;\n        }\n    \n        #spline-hud .secondary-node-grippie {\n          fill: white;\n          stroke: #ef6c6c;\n          stroke-width: 1.5;\n          vector-effect: non-scaling-stroke;\n        }\n        #spline-hud[mode^=\"draw-\"]   .secondary-node-grippie,\n        #spline-hud[mode$=\"-basis\"]  .secondary-node-grippie:not([data-subpath-type=\"basis\"]),\n        #spline-hud[mode$=\"-rom\"]    .secondary-node-grippie:not([data-subpath-type=\"rom\"]),\n        #spline-hud[mode$=\"-levien\"] .secondary-node-grippie:not([data-subpath-type=\"levien\"]) {\n          display: none;\n        }\n\n        #spline-hud .helper-line {\n          fill: none;\n          stroke: red;\n          stroke-width: 2;\n          vector-effect: non-scaling-stroke;\n          pointer-events: none;\n          opacity: 0.3;\n        }\n        #spline-hud[mode^=\"draw-freehand\"] .helper-line,\n        #spline-hud[mode$=\"-rom\"] .helper-line {\n          display: none;;\n        }\n\n        #spline-hud[mode^=\"draw\"] .curve-grippie {\n          display: none;\n        }\n        #spline-hud .curve-grippie path {\n          fill: none;\n          stroke: blue;\n          stroke-width: 10px;\n          vector-effect: non-scaling-stroke;\n          opacity: 0;\n        }\n        #spline-hud .curve-grippie path:hover {\n          opacity: 0.2;\n        }\n      </style>\n    \n      <g uid=\"grippies\" tabindex=\"-1\">\n        <g uid=\"helper-lines\"></g>\n        <g uid=\"curve-grippies\"></g>\n        <g uid=\"primary-node-grippies\"></g>\n        <g uid=\"secondary-node-grippies\"></g>\n      </g>`;this.splineHud.addEventListener(\"keydown\",e=>{this.je(e)});this.splineHud.addEventListener(\"pointerdown\",e=>{this.L(e)});this.splineHud.addEventListener(\"pointerup\",e=>{this.Ve(e)});this.splineHud.addEventListener(\"click\",e=>{Date.now()-this.zi<300&&this.He(e);this.zi=Date.now()});this[\"#grippies\"]=this.splineHud.querySelector('[uid=\"grippies\"]');this[\"#helper-lines\"]=this.splineHud.querySelector('[uid=\"helper-lines\"]');this[\"#curve-grippies\"]=this.splineHud.querySelector('[uid=\"curve-grippies\"]');this[\"#primary-node-grippies\"]=this.splineHud.querySelector('[uid=\"primary-node-grippies\"]');this[\"#secondary-node-grippies\"]=this.splineHud.querySelector('[uid=\"secondary-node-grippies\"]')}}_SplineTool_stage=new WeakMap;exports[\"default\"]=SplineTool;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/splineTool.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/textHud.js":
/*!**********************************************!*\
  !*** ./node_modules/foxyjs/tools/textHud.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __awaiter=this&&this.__awaiter||function(t,o,i,a){function r(e){return e instanceof i?e:new i(function(t){t(e)})}return new(i||(i=Promise))(function(e,i){function s(t){try{n(a.next(t))}catch(t){i(t)}}function l(t){try{n(a[\"throw\"](t))}catch(t){i(t)}}function n(t){t.done?e(t.value):r(t.value).then(s,l)}n((a=a.apply(t,o||[])).next())})};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(t,e,i,s){if(i===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof e===\"function\"?t!==e||!s:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return i===\"m\"?s:i===\"a\"?s.call(t):s?s.value:e.get(t)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(t,e,i,s,l){if(s===\"m\")throw new TypeError(\"Private method is not writable\");if(s===\"a\"&&!l)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof e===\"function\"?t!==e||!l:!e.has(t))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return s===\"a\"?l.call(t,i):l?l.value=i:e.set(t,i),i};var _TextTool_stage,_TextTool_hud,_TextTool_htmlInputObject,_TextTool_htmlInput,_TextTool_caretLine,_TextTool_selectionRects;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class TextTool{get inputMode(){return __classPrivateFieldGet(this,_TextTool_hud,\"f\").getAttribute(\"inputmode\")}get hud(){return __classPrivateFieldGet(this,_TextTool_hud,\"f\")}get enabled(){return this.hud.hasAttribute(\"enabled\")}set enabled(t){t?this.hud.setAttribute(\"enabled\",\"\"):this.hud.removeAttribute(\"enabled\")}constructor(t){_TextTool_stage.set(this,void 0);_TextTool_hud.set(this,document.querySelector(\"#text-hud\"));_TextTool_htmlInputObject.set(this,void 0);_TextTool_htmlInput.set(this,void 0);_TextTool_caretLine.set(this,void 0);_TextTool_selectionRects.set(this,void 0);this.l=false;this.enabledCallback=()=>{this.enabled=true;__classPrivateFieldGet(this,_TextTool_stage,\"f\").workspaces.addEventListener(\"pointerdown\",this[\"qe\"]=t=>{this[\"Xe\"](t)});__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.addEventListener(\"selectedtextrangechange\",this[\"We\"]=()=>{this[\"Ye\"]()});const t=Array.from(__classPrivateFieldGet(this,_TextTool_stage,\"f\").selectedElements.keys());1===t.length&&\"text\"===t[0][\"localName\"]&&this[\"sn\"](t[0])};this.disabledCallback=()=>{this.enabled=false;this[\"l\"]&&this[\"M\"]();__classPrivateFieldGet(this,_TextTool_stage,\"f\").workspaces.removeEventListener(\"pointerdown\",this[\"qe\"]);__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.removeEventListener(\"selectedtextrangechange\",this[\"We\"])};this.forceUpdate=()=>{this[\"l\"]&&this[\"Js\"]()};this.P=()=>{__classPrivateFieldGet(this,_TextTool_hud,\"f\")[\"style\"][\"display\"]=\"block\";this[\"l\"]=!0;__classPrivateFieldGet(this,_TextTool_htmlInputObject,\"f\")[\"append\"](__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\"));__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\")[\"focus\"]();this[\"rn\"]();this[\"nn\"]();this[\"Js\"]();__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.addEventListener(\"selectedelementschange\",this[\"C\"]=()=>{this[\"S\"]()});__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.addEventListener(\"workspacemutation\",this[\"T\"]=()=>{this[\"Qs\"]()});__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.addEventListener(\"undo\",this[\"Qe\"]=()=>{this[\"Je\"]()});__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.addEventListener(\"redo\",this[\"et\"]=()=>{this[\"Je\"]()})};this.M=()=>{__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\").remove();__classPrivateFieldGet(this,_TextTool_hud,\"f\")[\"style\"][\"display\"]=\"none\";this[\"l\"]=!1;__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.focus();__classPrivateFieldGet(this,_TextTool_stage,\"f\").selectedTextRange=void 0;__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.removeEventListener(\"selectedelementschange\",this[\"C\"]);__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.removeEventListener(\"workspacemutation\",this[\"T\"]);__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.removeEventListener(\"undo\",this[\"Qe\"]);__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.removeEventListener(\"redo\",this[\"et\"])};this.S=()=>{let t=__classPrivateFieldGet(this,_TextTool_stage,\"f\").selectedTextRange;if(t){let e=t[\"startContainer\"][\"closest\"](\"text\");const i=Array.from(__classPrivateFieldGet(this,_TextTool_stage,\"f\").selectedElements.keys());i[\"find\"](t=>t===e||t[\"contains\"](e))||(__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=void 0)}this[\"rn\"]();this[\"nn\"]();this[\"Js\"]()};this.Ye=()=>{const t=__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"];this.l&&!t?this.M():!this.l&&t&&this.P();if(this.l){this.Js();this.nn()}};this.Je=()=>{const e=__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"];if(e){let t=e[\"startContainer\"][\"closest\"](\"text\");t?this[\"sn\"](t):__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=void 0}};this.Xe=t=>{t[\"target\"][\"closest\"](\"text\")&&this.hn(t)};this.hn=n=>{if(n[\"buttons\"]>1)return;n[\"preventDefault\"]();let m=n[\"target\"][\"closest\"](\"text\");if(1===__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"pointerClickCount\"]){let t;let e;let d=(0,common_1.Ri)(m);let h=(0,common_1.ut)(m)[\"inverse\"]();let T=new DOMPoint(n[\"clientX\"],n[\"clientY\"]);let i=T[\"matrixTransform\"](h);let s=m[\"getCharNumAtPosition\"]((0,common_1.ti)(i));let l=s;let f=null;(0,common_1.Kt)(i,m[\"getStartPositionOfChar\"](s))>(0,common_1.Kt)(i,m[\"getEndPositionOfChar\"](s))&&(l+=1);let[u,x]=(0,common_1.ji)(m,l);__classPrivateFieldGet(this,_TextTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_TextTool_stage,\"f\").selectedElements.set(m);if(__classPrivateFieldGet(this,_TextTool_stage,\"f\").shiftKey){let t=__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"];if(null===t||!1===m[\"contains\"](t[\"startContainer\"])){let t=new Range;t[\"setStart\"](u,x);t[\"setEnd\"](u,x);__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=t}this[\"dn\"](l)}else{let t=new Range;t[\"setStart\"](u,x);t[\"setEnd\"](u,x);__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=t}__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\")[\"focus\"]();window[\"addEventListener\"](\"pointermove\",t=t=>{let e=new DOMPoint(t[\"clientX\"],t[\"clientY\"]);if((0,common_1.Kt)(T,e)<3)return;let{clientX:i,clientY:s}=t;let n=new DOMPoint(i,s)[\"matrixTransform\"](h);let o=m[\"getCharNumAtPosition\"]((0,common_1.ti)(n));if(-1===o){let t=m[\"getNumberOfChars\"]();let s=0;let l=Infinity;if(null===f){f=[];for(let e=0;e<t;e+=1){let t=(0,common_1.Qt)(m[\"getStartPositionOfChar\"](e),m[\"getEndPositionOfChar\"](e));f[\"push\"](t)}}for(let i=0;i<t;i+=1){let t=f[i];let e=(0,common_1.Kt)(n,t);if(e<l){s=i;l=e}}o=s}let l=o;(0,common_1.Kt)(n,m[\"getStartPositionOfChar\"](o))>(0,common_1.Kt)(n,m[\"getEndPositionOfChar\"](o))&&(l+=1);let[a,r]=(0,common_1.ji)(m,l),_=\"forward\";if(u===a)r<x&&(_=\"backward\");else u[\"compareDocumentPosition\"](a)===Node[\"DOCUMENT_POSITION_PRECEDING\"]&&(_=\"backward\");let c=new Range;c[\"direction\"]=_;if(\"forward\"===_){c[\"setStart\"](u,x);c[\"setEnd\"](a,r)}else{c[\"setStart\"](a,r);c[\"setEnd\"](u,x)}if(!1===__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"][\"collapsed\"]&&c[\"startOffset\"]===c[\"startContainer\"][\"textContent\"][\"length\"]){let t=d[d[\"indexOf\"](c[\"startContainer\"])+1];t&&c[\"setStart\"](t,0)}__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=c});window[\"addEventListener\"](\"pointerup\",e=()=>{window[\"removeEventListener\"](\"pointermove\",t);window[\"removeEventListener\"](\"pointerup\",e)})}else{if(2===__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"pointerClickCount\"]){let{clientX:t,clientY:e}=n;let i=(0,common_1.ut)(m)[\"inverse\"]();let s=new DOMPoint(t,e)[\"matrixTransform\"](i);let l=m[\"getCharNumAtPosition\"]((0,common_1.ti)(s));this[\"cn\"](m,l)}else{if(3===__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"pointerClickCount\"]){let{clientX:t,clientY:e}=n;let i=(0,common_1.ut)(m)[\"inverse\"]();let s=new DOMPoint(t,e)[\"matrixTransform\"](i);let l=m[\"getCharNumAtPosition\"]((0,common_1.ti)(s));this[\"pn\"](m,l)}else __classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"pointerClickCount\"]>=4&&this[\"sn\"](m)}}};this.ln=t=>{if(\"Home\"===t[\"key\"]||\"End\"===t[\"key\"]||t[\"key\"][\"startsWith\"](\"Arrow\")){this[\"un\"]()}};this.an=t=>__awaiter(this,void 0,void 0,function*(){if(\"historyUndo\"!==t[\"inputType\"]){if(0===__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\")[\"innerText\"][\"length\"]){__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\")[\"innerHTML\"]=\" \";document[\"execCommand\"](\"selectAll\")}this[\"en\"]()}this[\"xn\"]();this[\"un\"]()});this.en=()=>{__classPrivateFieldGet(this,_TextTool_stage,\"f\").undoManager.checkpoint(\"#edit-text\",\"#text-tool\")};this.sn=s=>{let l=(0,common_1.Ri)(s);if(l[\"length\"]>0){let t=l[0];let e=l[l[\"length\"]-1];let i=new Range;i[\"setStart\"](t,0);i[\"setEnd\"](e,e[\"textContent\"][\"length\"]);__classPrivateFieldGet(this,_TextTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_TextTool_stage,\"f\").selectedElements.set(s);__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=i;this[\"Js\"]();this[\"nn\"]()}};this.mn=()=>{__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=void 0};this.cn=(i,e)=>{let s=(0,common_1.Ii)(i);let l=s[e];let n=i[\"getNumberOfChars\"]();let o=e;let a=e;let r=t=>(0,common_1.Qd)(t)||\"​\"===t;for(let t=e-1;t>=0&&!(r(l)&&!r(s[t])||!r(l)&&r(s[t]));t-=1)o-=1;for(let t=e;t<n&&!(r(l)&&!r(s[t])||!r(l)&&r(s[t]));t+=1)a+=1;let[_,c]=(0,common_1.ji)(i,o);let[t,d]=(0,common_1.ji)(i,a);if(c===_[\"textContent\"][\"length\"]){let t=(0,common_1.Ri)(i);let e=t[t[\"indexOf\"](_)+1];if(e){_=e;c=0}}let h=new Range;h[\"setStart\"](_,c);h[\"setEnd\"](t,d);__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=h};this.pn=(i,e)=>{let s=(0,common_1.Ii)(i);let l=i[\"getNumberOfChars\"]();let n=e;let o=e;for(let t=e-1;t>=0&&\"​\"!==s[t];t-=1)n-=1;for(let t=e;t<l&&\"​\"!==s[t];t+=1)o+=1;let[a,r]=(0,common_1.ji)(i,n);let[t,_]=(0,common_1.ji)(i,o);if(r===a[\"textContent\"][\"length\"]){let t=(0,common_1.Ri)(i);let e=t[t[\"indexOf\"](a)+1];if(e){a=e;r=0}}let c=new Range;c[\"setStart\"](a,r);c[\"setEnd\"](t,_);__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=c};this.dn=t=>{let e=__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"];let i=e[\"startContainer\"][\"closest\"](\"text\");let[,s]=(0,common_1.Ni)(e[\"startContainer\"],e[\"startOffset\"]);let[,l]=(0,common_1.Ni)(e[\"endContainer\"],e[\"endOffset\"]);if(t<s)s=t;else{if(t>l)l=t;else{if(!(t>s&&t<l))return;t-s>l-t?l=t:s=t}}let[n,o]=(0,common_1.ji)(i,s);let[a,r]=(0,common_1.ji)(i,l);if(o===n[\"textContent\"][\"length\"]){let t=(0,common_1.Ri)(i);let e=t[t[\"indexOf\"](n)+1];if(e){n=e;o=0}}let _=new Range;_[\"setStart\"](n,o);_[\"setEnd\"](a,r);_[\"direction\"]=\"backward\";__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=_};this.Js=()=>{let e=__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"];let r=e?e[\"startContainer\"][\"closest\"](\"text\"):null;let t=e?r[\"getNumberOfChars\"]():0;let[,i]=e?(0,common_1.Ni)(e[\"startContainer\"],e[\"startOffset\"]):[,-1];let[,s]=e?(0,common_1.Ni)(e[\"endContainer\"],e[\"endOffset\"]):[,-1];if(1===t&&\" \"===(e===null||e===void 0?void 0:e[\"toString\"]())){let t=0;let e=r[\"getExtentOfChar\"](t);let i=r[\"getStartPositionOfChar\"](t);let s=r[\"getSubStringLength\"](t,1);let l=e[\"height\"];let n=r[\"getRotationOfChar\"](t);let o=new DOMPoint(i[\"x\"]+s/2,i[\"y\"]);let a=new DOMMatrix;a.multiplySelf((0,common_1.pt)(r,__classPrivateFieldGet(this,_TextTool_hud,\"f\")));a.translateSelf(o[\"x\"],o[\"y\"]);a.rotateSelf(n);a.translateSelf(-o[\"x\"],-o[\"y\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"x1\",i[\"x\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"y1\",e[\"y\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"x2\",i[\"x\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"y2\",e[\"y\"]+l);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"transform\",a[\"toString\"]());__classPrivateFieldGet(this,_TextTool_caretLine,\"f\")[\"style\"][\"setProperty\"](\"visibility\",\"visible\")}else{if(!0===(e===null||e===void 0?void 0:e[\"collapsed\"])){let a=\"backward\"===e[\"direction\"]?i:s;if(0===a){let t=r[\"getExtentOfChar\"](a);let e=r[\"getStartPositionOfChar\"](a);let i=r[\"getSubStringLength\"](a,1);let s=t[\"height\"];let l=r[\"getRotationOfChar\"](a);let n=new DOMPoint(e[\"x\"]+i/2,e[\"y\"]);let o=new DOMMatrix;o.multiplySelf((0,common_1.pt)(r,__classPrivateFieldGet(this,_TextTool_hud,\"f\")));o.translateSelf(n[\"x\"],n[\"y\"]);o.rotateSelf(l);o.translateSelf(-n[\"x\"],-n[\"y\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"x1\",e[\"x\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"y1\",t[\"y\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"x2\",e[\"x\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"y2\",t[\"y\"]+s);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"transform\",o[\"toString\"]());__classPrivateFieldGet(this,_TextTool_caretLine,\"f\")[\"style\"][\"visibility\"]=\"visible\"}else{if(a>0&&a<=t){let t=r[\"getExtentOfChar\"](a-1);let e=r[\"getEndPositionOfChar\"](a-1);let i=r[\"getSubStringLength\"](a-1,1);let s=t[\"height\"];let l=r[\"getRotationOfChar\"](a-1);let n=new DOMPoint(e[\"x\"]+i/2,e[\"y\"]);let o=new DOMMatrix;o[\"multiplySelf\"]((0,common_1.pt)(r,__classPrivateFieldGet(this,_TextTool_hud,\"f\")));o[\"translateSelf\"](n[\"x\"],n[\"y\"]);o[\"rotateSelf\"](l);o[\"translateSelf\"](-n[\"x\"],-n[\"y\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"x1\",e[\"x\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"y1\",t[\"y\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"x2\",e[\"x\"]);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"y2\",t[\"y\"]+s);__classPrivateFieldGet(this,_TextTool_caretLine,\"f\").setAttribute(\"transform\",o[\"toString\"]());__classPrivateFieldGet(this,_TextTool_caretLine,\"f\")[\"style\"][\"visibility\"]=\"visible\"}else a>t&&(__classPrivateFieldGet(this,_TextTool_caretLine,\"f\")[\"style\"][\"visibility\"]=\"hidden\")}}else __classPrivateFieldGet(this,_TextTool_caretLine,\"f\")[\"style\"][\"visibility\"]=\"hidden\"}__classPrivateFieldGet(this,_TextTool_selectionRects,\"f\")[\"innerHTML\"]=\"\";if(!1===(e===null||e===void 0?void 0:e[\"collapsed\"])){let _=e[\"startContainer\"][\"closest\"](\"text\");let t=_[\"getNumberOfChars\"]();for(let r=i;r<s&&r<t;r+=1){let t=_[\"getExtentOfChar\"](r);let e=_[\"getStartPositionOfChar\"](r);_[\"getEndPositionOfChar\"](r);let i=_[\"getSubStringLength\"](r,1);let s=t[\"height\"];let l=_[\"getRotationOfChar\"](r);let n=new DOMPoint(e[\"x\"]+i/2,e[\"y\"]);let o=new DOMMatrix;o[\"multiplySelf\"]((0,common_1.pt)(_,__classPrivateFieldGet(this,_TextTool_hud,\"f\")));o[\"translateSelf\"](n[\"x\"],n[\"y\"]);o[\"rotateSelf\"](l);o[\"translateSelf\"](-n[\"x\"],-n[\"y\"]);let a=(0,common_1.Zi)(\"svg:rect\");a.setAttribute(\"x\",e[\"x\"]);a.setAttribute(\"y\",t[\"y\"]);a.setAttribute(\"width\",i);a.setAttribute(\"height\",s);a.setAttribute(\"transform\",o[\"toString\"]());__classPrivateFieldGet(this,_TextTool_selectionRects,\"f\")[\"append\"](a)}}if(\"visible\"===__classPrivateFieldGet(this,_TextTool_caretLine,\"f\")[\"style\"][\"visibility\"]){__classPrivateFieldGet(this,_TextTool_htmlInputObject,\"f\").setAttribute(\"x\",__classPrivateFieldGet(this,_TextTool_caretLine,\"f\")[\"x2\"][\"baseVal\"][\"value\"].toString());__classPrivateFieldGet(this,_TextTool_htmlInputObject,\"f\").setAttribute(\"y\",__classPrivateFieldGet(this,_TextTool_caretLine,\"f\")[\"y2\"][\"baseVal\"][\"value\"].toString());__classPrivateFieldGet(this,_TextTool_caretLine,\"f\")[\"hasAttribute\"](\"transform\")?__classPrivateFieldGet(this,_TextTool_htmlInputObject,\"f\").setAttribute(\"transform\",__classPrivateFieldGet(this,_TextTool_caretLine,\"f\")[\"getAttribute\"](\"transform\")||\"\"):__classPrivateFieldGet(this,_TextTool_htmlInputObject,\"f\")[\"removeAttribute\"](\"transform\")}else{if(__classPrivateFieldGet(this,_TextTool_selectionRects,\"f\")[\"children\"][\"length\"]>0){let t=__classPrivateFieldGet(this,_TextTool_selectionRects,\"f\")[\"children\"][0];const l=t[\"x\"][\"baseVal\"][\"value\"].toString();const n=(t[\"y\"][\"baseVal\"][\"value\"]+t[\"height\"][\"baseVal\"][\"value\"]).toString();__classPrivateFieldGet(this,_TextTool_htmlInputObject,\"f\").setAttribute(\"x\",l);__classPrivateFieldGet(this,_TextTool_htmlInputObject,\"f\").setAttribute(\"y\",n);t[\"hasAttribute\"](\"transform\")?__classPrivateFieldGet(this,_TextTool_htmlInputObject,\"f\").setAttribute(\"transform\",t[\"getAttribute\"](\"transform\")||\"\"):__classPrivateFieldGet(this,_TextTool_htmlInputObject,\"f\")[\"removeAttribute\"](\"transform\")}}};this.un=()=>{let t=(0,common_1.Xd)(this.hud)[\"getSelection\"]();let e=t[\"rangeCount\"]>0?t[\"getRangeAt\"](0):null;if(e){let i=this[\"gn\"](e[\"startContainer\"],e[\"startOffset\"])[1];let s=this[\"gn\"](e[\"endContainer\"],e[\"endOffset\"])[1];let l=0;let n=new Range;let o=null;let t=this[\"tn\"];for(let e of(0,common_1.Ri)(t)){for(let t=0;t<=e[\"textContent\"][\"length\"];t+=1,l+=1){l===i&&n[\"setStart\"](e,t);l===s&&(0===t&&o?n[\"setEnd\"](o,o[\"textContent\"][\"length\"]):n[\"setEnd\"](e,t))}l-=1;o=e}__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=n}};this.nn=()=>{let t=__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"];if(t){let i=(0,common_1.Ni)(t[\"startContainer\"],t[\"startOffset\"])[1];let s=(0,common_1.Ni)(t[\"endContainer\"],t[\"endOffset\"])[1];let l=0;let n=new Range;let o=null;for(let e of this[\"fn\"](__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\"))){for(let t=0;t<=e[\"textContent\"][\"length\"];t+=1,l+=1){l===i&&n[\"setStart\"](e,t);l===s&&(0===t&&o?n[\"setEnd\"](o,o[\"textContent\"][\"length\"]):n[\"setEnd\"](e,t))}l-=1;o=e}const e=window[\"getSelection\"]();e[\"removeAllRanges\"]();e[\"addRange\"](n)}};this.xn=()=>{let o=this[\"tn\"];let a=o?o[\"querySelector\"](\"textPath\")||o:null;if(a){let t=(0,common_1.Zi)(\"svg:g\");t[\"innerHTML\"]=__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\")[\"innerHTML\"];let e=document[\"createNodeIterator\"](t,NodeFilter[\"SHOW_ELEMENT\"]|NodeFilter[\"SHOW_TEXT\"]);let s=null;let i=(0,common_1.Bi)(o);let l=(0,common_1.Gi)(o);for(;s=e[\"nextNode\"]();)if(s[\"nodeType\"]===Element.TEXT_NODE){if(s[\"textContent\"][\"includes\"](\"\\n\")){let e=document[\"createDocumentFragment\"]();for(let t of s[\"textContent\"])if(\"\\n\"===t){let t=(0,common_1.fs)`<tspan x=\"${i[\"x\"]}\" dy=\"${l+1}em\">${\"​\"}</tspan>`;e[\"append\"](t)}else e[\"append\"](new Text(t));s[\"replaceWith\"](e)}}else{if(s[\"nodeType\"]===Element.ELEMENT_NODE){if(\"span\"===s[\"localName\"]){let i=(0,common_1.Zi)(\"svg:tspan\");for(let{name:t,value:e}of[...s[\"attributes\"]])i[\"setAttribute\"](t,e);for(let t of[...s[\"childNodes\"]])i[\"append\"](t);s[\"replaceWith\"](i)}else(\"br\"===s[\"localName\"]||\"div\"===s[\"localName\"])&&s[\"remove\"]()}}a[\"innerHTML\"]=t[\"innerHTML\"];let n=(0,common_1.Bi)(o);n[\"x\"]!==i[\"x\"]&&o[\"setAttribute\"](\"x\",i[\"x\"]);n[\"y\"]!==i[\"y\"]&&o[\"setAttribute\"](\"y\",i[\"y\"])}};this.rn=()=>{let t=__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"];let e=t?t[\"startContainer\"][\"closest\"](\"text\"):null;let i=e?e[\"querySelector\"](\"textPath\")||e:null;if(i){let t=document[\"createElement\"](\"div\");t[\"innerHTML\"]=i[\"innerHTML\"];for(let s of t[\"querySelectorAll\"](\"tspan\"))if((0,common_1._i)(s))s[\"replaceWith\"](new Text(\"\\n\"));else{let i=document[\"createElement\"](\"span\");for(let{name:t,value:e}of[...s[\"attributes\"]])i[\"setAttribute\"](t,e);for(let t of[...s[\"childNodes\"]])i[\"append\"](t);s[\"replaceWith\"](i)}__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\")[\"innerHTML\"]=t[\"innerHTML\"];this[\"tn\"]=e}};this.fn=t=>{let e=[];let i=document[\"createTreeWalker\"](t,NodeFilter[\"SHOW_TEXT\"]);for(;i[\"nextNode\"]();)i[\"currentNode\"][\"closest\"](\"bx-title, desc\")||e[\"push\"](i[\"currentNode\"]);return e};this.gn=(e,i)=>{let s=__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\");let l=0;let n=-1;for(let t of this[\"fn\"](s)){if(t===e){n=l+i;break}l+=t[\"length\"]}return[s,n]};__classPrivateFieldSet(this,_TextTool_stage,t,\"f\");this.Qs=this.Js;this[\"tn\"]=null;__classPrivateFieldGet(this,_TextTool_hud,\"f\").innerHTML='\\n  <style>\\n    /**\\n     * Overlays\\n     */\\n\\n    #text-hud [uid=\"caret-line\"] {\\n      stroke-width: 3;\\n      vector-effect: non-scaling-stroke;\\n      pointer-events: none;\\n      stroke: gray;\\n    }\\n    #text-hud[inputmode] [uid=\"caret-line\"] {\\n      stroke: blue;\\n    }\\n\\n    #text-hud [uid=\"selection-rects\"] rect {\\n      fill: rgba(179, 179, 179, 0.3);\\n      pointer-events: none;\\n    }\\n    #text-hud[inputmode] [uid=\"selection-rects\"] rect {\\n      fill: var(--selection-background-color);\\n    }\\n\\n    /**\\n     * HTML input\\n     */\\n\\n    #text-hud [uid=\"html-input-object\"] {\\n      width: 1px;\\n      height: 1px;\\n      opacity: 0;\\n      background: white;\\n      pointer-events: none;\\n    }\\n    #text-hud[debug] [uid=\"html-input-object\"] {\\n      width: 150px;\\n      height: 50px;\\n      opacity: 1;\\n      pointer-events: all;\\n    }\\n\\n    #text-hud [uid=\"html-input-object\"] * {\\n      /* Needed for correct positioning of IME dialog */\\n      font-size: 0.01px !important;\\n    }\\n    #text-hud[debug] [uid=\"html-input-object\"] * {\\n      font-size: 10px !important;\\n    }\\n\\n    #text-hud [uid=\"html-input\"] {\\n      width: 100%;\\n      height: 100%;\\n      padding: 0;\\n      margin: 0;\\n      white-space: pre;\\n    }\\n    #text-hud[inputmode] [uid=\"html-input\"] {\\n      /* Make text editable and selectable */\\n      -webkit-user-modify: read-write-plaintext-only;\\n      -webkit-user-select: text;\\n    }\\n\\n    #text-hud [uid=\"html-input\"] *:not(span):not(a) {\\n      display: none;\\n    }\\n  </style>\\n\\n  <g uid=\"overlays\">\\n    <line uid=\"caret-line\"></line>\\n    <g uid=\"selection-rects\"></g>\\n  </g>\\n\\n  <foreignObject uid=\"html-input-object\" width=\"200\" height=\"16\">\\n    <p uid=\"html-input\" tabindex=\"0\"></p>\\n  </foreignObject>\\n';__classPrivateFieldSet(this,_TextTool_htmlInputObject,document.querySelector('[uid=\"html-input-object\"]'),\"f\");__classPrivateFieldSet(this,_TextTool_htmlInput,document.querySelector('[uid=\"html-input\"]'),\"f\");__classPrivateFieldSet(this,_TextTool_caretLine,document.querySelector('[uid=\"caret-line\"]'),\"f\");__classPrivateFieldSet(this,_TextTool_selectionRects,document.querySelector('[uid=\"selection-rects\"]'),\"f\");let e=!1;__classPrivateFieldGet(this,_TextTool_hud,\"f\").addEventListener(\"focus\",()=>__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\")[\"focus\"]());__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\").addEventListener(\"focus\",()=>{__classPrivateFieldGet(this,_TextTool_hud,\"f\").dispatchEvent(new CustomEvent(\"textinputmodestart\",{bubbles:!0,composed:!0}));__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\").setAttribute(\"contenteditable\",\"plaintext-only\");__classPrivateFieldGet(this,_TextTool_hud,\"f\").setAttribute(\"inputmode\",\"\");this[\"nn\"]()});__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\").addEventListener(\"blur\",()=>{__classPrivateFieldGet(this,_TextTool_hud,\"f\").dispatchEvent(new CustomEvent(\"textinputmodeend\",{bubbles:!0,composed:!0}));__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\").removeAttribute(\"contenteditable\");__classPrivateFieldGet(this,_TextTool_hud,\"f\").removeAttribute(\"inputmode\")});__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\").addEventListener(\"input\",t=>{this[\"an\"](t)});__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\").addEventListener(\"keydown\",t=>__awaiter(this,void 0,void 0,function*(){e=!0;yield(0,common_1.sleep)(1);this[\"ln\"](t)}));__classPrivateFieldGet(this,_TextTool_htmlInput,\"f\").addEventListener(\"keyup\",t=>{e=!1;this[\"ln\"](t)})}}_TextTool_stage=new WeakMap,_TextTool_hud=new WeakMap,_TextTool_htmlInputObject=new WeakMap,_TextTool_htmlInput=new WeakMap,_TextTool_caretLine=new WeakMap,_TextTool_selectionRects=new WeakMap;exports[\"default\"]=TextTool;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/textHud.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/textTool.js":
/*!***********************************************!*\
  !*** ./node_modules/foxyjs/tools/textTool.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __awaiter=this&&this.__awaiter||function(e,l,o,a){function n(t){return t instanceof o?t:new o(function(e){e(t)})}return new(o||(o=Promise))(function(t,o){function s(e){try{_(a.next(e))}catch(e){o(e)}}function i(e){try{_(a[\"throw\"](e))}catch(e){o(e)}}function _(e){e.done?t(e.value):n(e.value).then(s,i)}_((a=a.apply(e,l||[])).next())})};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,o,s,i){if(s===\"m\")throw new TypeError(\"Private method is not writable\");if(s===\"a\"&&!i)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!i:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return s===\"a\"?i.call(e,o):i?i.value=o:t.set(e,o),o};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,o,s){if(o===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!s:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return o===\"m\"?s:o===\"a\"?s.call(e):s?s.value:t.get(e)};var _TextTool_instances,_TextTool_stage,_TextTool_me,_TextTool_jt,_TextTool_Ae,_TextTool_Vt,_TextTool_be,_TextTool_Wt,_TextTool_Yt,_TextTool_qt,_TextTool_Ht;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");class TextTool{constructor(e){_TextTool_instances.add(this);_TextTool_stage.set(this,void 0);_TextTool_me.set(this,void 0);_TextTool_jt.set(this,void 0);_TextTool_Ae.set(this,void 0);_TextTool_Vt.set(this,{});__classPrivateFieldSet(this,_TextTool_stage,e,\"f\")}enabledCallback(){let t=!0;const e=()=>{__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.style.cursor=\"text\"};e();__classPrivateFieldGet(this,_TextTool_instances,\"m\",_TextTool_Ht).call(this);__classPrivateFieldGet(this,_TextTool_stage,\"f\").workspaces.addEventListener(\"pointerdown\",__classPrivateFieldSet(this,_TextTool_me,e=>{__classPrivateFieldGet(this,_TextTool_instances,\"m\",_TextTool_be).call(this,e)},\"f\"));__classPrivateFieldGet(this,_TextTool_stage,\"f\").workspaces.addEventListener(\"pointerover\",__classPrivateFieldSet(this,_TextTool_jt,e=>{t=null!==e[\"target\"][\"closest\"](\"text\")},\"f\"));window.addEventListener(\"pointerup\",__classPrivateFieldSet(this,_TextTool_Ae,()=>{e()},\"f\"))}disabledCallback(){__classPrivateFieldGet(this,_TextTool_stage,\"f\").board.style.cursor=\"auto\";__classPrivateFieldGet(this,_TextTool_stage,\"f\").workspaces.removeEventListener(\"pointerdown\",__classPrivateFieldGet(this,_TextTool_me,\"f\"));__classPrivateFieldGet(this,_TextTool_stage,\"f\").workspaces.removeEventListener(\"pointerover\",__classPrivateFieldGet(this,_TextTool_jt,\"f\"));window.removeEventListener(\"pointerup\",__classPrivateFieldGet(this,_TextTool_Ae,\"f\"))}}_TextTool_stage=new WeakMap,_TextTool_me=new WeakMap,_TextTool_jt=new WeakMap,_TextTool_Ae=new WeakMap,_TextTool_Vt=new WeakMap,_TextTool_instances=new WeakSet,_TextTool_be=function e(l){return __awaiter(this,void 0,void 0,function*(){if(!(l[\"buttons\"]>1)&&null===l[\"target\"][\"closest\"](\"text\")){__classPrivateFieldGet(this,_TextTool_stage,\"f\").undoManager.checkpoint(\"#text\",\"#text-tool\");let e=__classPrivateFieldGet(this,_TextTool_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_TextTool_stage,\"f\").currentWorkspace;let t=__classPrivateFieldGet(this,_TextTool_stage,\"f\").config.text.textContent;let o=__classPrivateFieldGet(this,_TextTool_stage,\"f\").config.text;let i=(0,common_1.Zi)(\"svg:text\");i[\"textContent\"]=t;i[\"style\"][\"whiteSpace\"]=\"pre\";e[\"append\"](i);(0,common_1.ja)(i,o);__classPrivateFieldGet(this,_TextTool_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_TextTool_stage,\"f\").selectedElements.set(i);let s=(0,common_1.ut)(i)[\"inverse\"]()[\"translate\"](l[\"clientX\"],l[\"clientY\"]);i[\"setAttribute\"](\"transform\",s[\"toString\"]());let _=()=>__awaiter(this,void 0,void 0,function*(){let e=(0,common_1.Ri)(i);let t=e[0];let o=e[e[\"length\"]-1];let s=new Range;s[\"setStart\"](t,0);s[\"setEnd\"](o,o[\"textContent\"][\"length\"]);__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=void 0;__classPrivateFieldGet(this,_TextTool_stage,\"f\")[\"selectedTextRange\"]=s;yield(0,common_1.sleep)(100);__classPrivateFieldGet(this,_TextTool_stage,\"f\").textHud.hud[\"focus\"]()});_();o[\"font-family\"]&&(yield __classPrivateFieldGet(this,_TextTool_instances,\"m\",_TextTool_Wt).call(this,o[\"font-family\"]));_()}})},_TextTool_Wt=function e(t){return true},_TextTool_Yt=function e(t){},_TextTool_qt=function e(t,o=!0){return new Promise(e=>__awaiter(this,void 0,void 0,function*(){if(void 0===__classPrivateFieldGet(this,_TextTool_Vt,\"f\")[t]&&(__classPrivateFieldGet(this,_TextTool_Vt,\"f\")[t]=yield __classPrivateFieldGet(this,_TextTool_instances,\"m\",_TextTool_Yt).call(this,t),o)){for(let e of __classPrivateFieldGet(this,_TextTool_Vt,\"f\")[t])e[\"load\"]()}e(true)}))},_TextTool_Ht=function e(t=!0){return new Promise(e=>__awaiter(this,void 0,void 0,function*(){e(true)}))};exports[\"default\"]=TextTool;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/textTool.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/transformSelect.js":
/*!******************************************************!*\
  !*** ./node_modules/foxyjs/tools/transformSelect.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __awaiter=this&&this.__awaiter||function(e,i,s,_){function n(t){return t instanceof s?t:new s(function(e){e(t)})}return new(s||(s=Promise))(function(t,s){function r(e){try{l(_.next(e))}catch(e){s(e)}}function a(e){try{l(_[\"throw\"](e))}catch(e){s(e)}}function l(e){e.done?t(e.value):n(e.value).then(r,a)}l((_=_.apply(e,i||[])).next())})};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,s,r,a){if(r===\"m\")throw new TypeError(\"Private method is not writable\");if(r===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return r===\"a\"?a.call(e,s):a?a.value=s:t.set(e,s),s};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,s,r){if(s===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return s===\"m\"?r:s===\"a\"?r.call(e):r?r.value:t.get(e)};var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var _TransformSelect_instances,_TransformSelect_stage,_TransformSelect_Q,_TransformSelect_ue,_TransformSelect_xe,_TransformSelect_me,_TransformSelect_ge,_TransformSelect_fe,_TransformSelect_be,_TransformSelect_ke,_TransformSelect_Pe,_TransformSelect_Se,_TransformSelect_Me,_TransformSelect_Ce,_TransformSelect_ve,_TransformSelect_ye,_TransformSelect_we,_TransformSelect_ze,_TransformSelect_De;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");const ee_1=__importDefault(__webpack_require__(/*! ../utils/ee */ \"./node_modules/foxyjs/utils/ee.js\"));const Aa=Symbol();class TransformSelect{constructor(e){_TransformSelect_instances.add(this);_TransformSelect_stage.set(this,void 0);_TransformSelect_Q.set(this,void 0);_TransformSelect_ue.set(this,void 0);_TransformSelect_xe.set(this,void 0);_TransformSelect_me.set(this,void 0);_TransformSelect_ge.set(this,!1);_TransformSelect_De.set(this,(e,t)=>{let s=(0,common_1.ns)(e,t);if(s){for(;!1===[\"g\",\"a\"].includes(s.localName);)s=s.parentNode}return s});__classPrivateFieldSet(this,_TransformSelect_stage,e,\"f\")}enabledCallback(){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").rubberBand.enabled=true;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").board.style.cursor=\"auto\";__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").workspaces.addEventListener(\"contextmenu\",__classPrivateFieldSet(this,_TransformSelect_xe,e=>{__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_fe).call(this,e)},\"f\"));__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").workspaces.addEventListener(\"pointerdown\",__classPrivateFieldSet(this,_TransformSelect_me,e=>{__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_be).call(this,e)},\"f\"))}disabledCallback(){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").rubberBand.enabled=false;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").workspaces.removeEventListener(\"contextmenu\",__classPrivateFieldGet(this,_TransformSelect_xe,\"f\"));__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").workspaces.removeEventListener(\"pointerdown\",__classPrivateFieldGet(this,_TransformSelect_me,\"f\"))}}_TransformSelect_stage=new WeakMap,_TransformSelect_Q=new WeakMap,_TransformSelect_ue=new WeakMap,_TransformSelect_xe=new WeakMap,_TransformSelect_me=new WeakMap,_TransformSelect_ge=new WeakMap,_TransformSelect_De=new WeakMap,_TransformSelect_instances=new WeakSet,_TransformSelect_fe=function e(t){let r=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").getHitWorkspaceElements(t[\"clientX\"],t[\"clientY\"]);if(r.length>0){let e=r[r.length-1];let t=__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_we).call(this,e);let s=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.has(e);for(let e of t)__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.has(e)&&(s=!0);!1===s&&__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_ve).call(this,e)}else __classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_ye).call(this,t)},_TransformSelect_be=function e(l){const{buttons:t,isPrimary:s,clientX:r,clientY:a,pointerType:i}=l;if(t>1||!1===s)return;let _;let n;let c=l[\"target\"];let o=new DOMPoint(r,a);let f=o;let m=\"touch\"===i?9:3;__classPrivateFieldSet(this,_TransformSelect_ge,!1,\"f\");window.addEventListener(\"pointermove\",_=s=>{if(s.pointerId!==l.pointerId)return;let e=new DOMPoint(s[\"clientX\"],s[\"clientY\"]);let t=s.timeStamp-l.timeStamp;let r=(0,common_1.Kt)(o,e)>m||t>80;let a=!1===(0,common_1.qt)(f,e,null);f=e;if(!0===r&&!0===a){window.removeEventListener(\"pointermove\",_);__classPrivateFieldSet(this,_TransformSelect_ge,!0,\"f\");let e=new ee_1.default(s[\"clientX\"]-l[\"clientX\"],s[\"clientY\"]-l[\"clientY\"]);let t=Math.abs(e[\"x\"])>Math.abs(e[\"y\"])?\"horizontal\":\"vertical\";__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_ke).call(this,l,s,t)}});window.addEventListener(\"pointerup\",n=e=>{if(e.pointerId!==l.pointerId)return;window.removeEventListener(\"pointermove\",_);window.removeEventListener(\"pointerup\",n);let t=new DOMPoint(e.clientX,e.clientY);(0,common_1.Kt)(o,t)<m&&__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_Ce).call(this,c,e)})},_TransformSelect_ke=function e(t,s,r){let a=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").getHitWorkspaceElements(s[\"clientX\"],s[\"clientY\"]);a.length>0?__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_Se).call(this,s,a[a.length-1],r):__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_Me).call(this,t)},_TransformSelect_Pe=function e(t){let s=t.querySelector(\"textPath\");let r=null;(s===null||s===void 0?void 0:s.hasAttribute(\"href\"))&&(r=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").workspaces.querySelector(s.href.baseVal));return r},_TransformSelect_Se=function e(l,r,i){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").undoManager.checkpoint(\"#move\",\"#transform-tool\");{let t=__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_we).call(this,r);let s=!1;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.has(r)&&(s=!0);for(let e of t)__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.has(e)&&(s=!0);if(!s){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").transformTool.mode=\"scale\";if(0===t.length){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer=void 0;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.set(r)}else{let e=__classPrivateFieldGet(this,_TransformSelect_De,\"f\").call(this,r,__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer);for(;r.parentNode!==e&&r.parentNode!==__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentWorkspace;)r=r.parentNode;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.set(r)}}}if(__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").altKey){__classPrivateFieldGet(this,_TransformSelect_ue,\"f\").insertArtwork(__classPrivateFieldGet(this,_TransformSelect_ue,\"f\").extractArtworkWithSelectedElements(),\"original\");r=__classPrivateFieldGet(this,_TransformSelect_ue,\"f\").selectedElements[0]}{const s=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").board;let e;let t;let o=[];for(let r of Array.from(__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.keys())){const a=r;if(\"text\"===a.localName){let e=__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_Pe).call(this,r);if(e&&__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.has(e))continue}let e=(0,common_1.ut)(a);let t=e.inverse();let s=(0,common_1.ct)(a).multiplySelf(t);a[Aa]={clientToUserTransform:e,initialClientTransform:s};o.push(r)}s.style.cursor=\"move\";__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").snapManager.snapStart();s.addEventListener(\"pointermove\",e=e=>{if(e.pointerId!==l.pointerId)return;let n=e[\"clientX\"]-l[\"clientX\"];let c=e[\"clientY\"]-l[\"clientY\"];let t=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").shiftKey;t&&(\"vertical\"===i?n=0:\"horizontal\"===i&&(c=0));for(let r of o){let{clientToUserTransform:e,initialClientTransform:t}=r[Aa];let s=DOMMatrix.fromMatrix(t);s.translateSelf(n,c);s.multiplySelf(e);r.setAttribute(\"transform\",s.toString())}const{manualGuides:s,smartGuides:r,grid:a}=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").config;if(!s.disabled||r.disabled||a.disabled){let e=o.map(e=>(0,common_1.Yi)(e));let i=(0,common_1.ci)(e);let _=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").snapManager.snapBBox(i);if(!1===((e,t,s=null)=>null!==s?(0,common_1.te)(e[\"x\"],s)===(0,common_1.te)(t[\"x\"],s)&&(0,common_1.te)(e[\"y\"],s)===(0,common_1.te)(t[\"y\"],s)&&(0,common_1.te)(e.width,s)===(0,common_1.te)(t.width,s)&&(0,common_1.te)(e.height,s)===(0,common_1.te)(t.height,s):e[\"x\"]===t[\"x\"]&&e[\"y\"]===t[\"y\"]&&e.width===t.width&&e.height)(i,_))for(let l of o){let{clientToUserTransform:e,initialClientTransform:t}=l[Aa];let s=_[\"x\"]-i[\"x\"];let r=_[\"y\"]-i[\"y\"];let a=DOMMatrix.fromMatrix(t);a.translateSelf(n+s,c+r);a.multiplySelf(e);l.setAttribute(\"transform\",a.toString())}}});s.addEventListener(\"pointerup\",t=()=>{s.removeEventListener(\"pointermove\",e);s.removeEventListener(\"pointerup\",t);s.style.cursor=\"auto\";__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").snapManager.snapEnd()})}},_TransformSelect_Me=function e(t){return __awaiter(this,void 0,void 0,function*(){let e=\"rect\";let r=\"intersect\";let a=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer||__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentWorkspace;let l=(0,common_1.ut)(__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentWorkspace).inverse();let i=[];if(\"rect\"===e){let s=yield __classPrivateFieldGet(this,_TransformSelect_stage,\"f\").rubberBand.grabSelection(t);for(let t of a.children)if([...common_1.g,\"svg\",\"g\",\"a\",\"use\"].includes(t.localName)){let e=(0,common_1.di)((0,common_1.Yi)(t),l);!1===(0===e.width&&0===e.height)&&(\"contain\"===r?(0,common_1.pi)(s,e)&&i.push(t):\"intersect\"===r&&(0,common_1.xi)(s,e)&&i.push(t))}}i=i.filter(e=>!1===(\"none\"===getComputedStyle(e).pointerEvents));if(!__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").shiftKey)__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.clear();i.forEach(e=>{if(\"none\"!==getComputedStyle(e).pointerEvents)__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.set(e)})})},_TransformSelect_Ce=function e(t,s){if(s.button>0||__classPrivateFieldGet(this,_TransformSelect_ge,\"f\"))return;let r=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").board.querySelector(\"#transform-hud\");let a=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").getHitWorkspaceElements(s.clientX,s.clientY);if(a.length>0){let s=a[a.length-1];if(__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").pointerClickCount%2===1)__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_ve).call(this,s);else{if(__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").pointerClickCount%2===0){let e=__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_ze).call(this,s);if(e){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer=e;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.clear()}else{if(\"use\"===s.localName){let e=s.href.baseVal.trim();let t=null;e.length>1&&(t=__classPrivateFieldGet(this,_TransformSelect_ue,\"f\").workspaces.querySelector(\"#\"+CSS.escape(e.substring(1))));if(\"symbol\"===(t===null||t===void 0?void 0:t.localName)){let e=t;__classPrivateFieldGet(this,_TransformSelect_ue,\"f\").editSymbol(e.id)}else{__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").transformTool.mode=\"scale\";__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").toggleTool(\"edit-tool\")}}else{if(\"text\"===s.localName){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").transformTool.mode=\"scale\";__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").toggleTool(\"text-tool\")}else{__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").transformTool.mode=\"scale\"}}}}}}else __classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_ye).call(this,s)},_TransformSelect_ve=function e(r){var t;let s=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").board;let a=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").ctrlKey;let l=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").shiftKey;let i=__classPrivateFieldGet(this,_TransformSelect_instances,\"m\",_TransformSelect_we).call(this,r);let _=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.has(r);for(let e of i)__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.has(e)&&(_=!0);if(a||l){if(!a&&l){if(0===i.length){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer=void 0;if(__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.has(r)){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.delete(r)}else{__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.set(r)}}else{if((t=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer)===null||t===void 0?void 0:t.contains(r)){for(;r.parentNode!==__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer;)r=r.parentNode;if(__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.has(r)){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.delete(r)}else{__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.set(r)}}else{let e=__classPrivateFieldGet(this,_TransformSelect_De,\"f\").call(this,r,__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer);for(;r.parentNode!==e&&r.parentNode!==__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentWorkspace;)r=r.parentNode;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer=e;if(__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.has(r)){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.delete(r)}else{__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.set(r)}}}}else{if(a&&!l){let t=null;for(let e=r.parentElement;e!==__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentWorkspace;e=e.parentElement)if(\"g\"===e.localName||\"a\"===e.localName){t=e;break}__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer=t;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.set(r)}else{if(a&&l){let t=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer;let s=Array.from(__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.keys());s=s.includes(r)?s.filter(e=>e!==r):[...s,r];if(0===s.length)t=void 0;else{for(let e=s[0].parentElement;e!==__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentWorkspace;e=e.parentElement)if(\"g\"===e.localName||\"a\"===e.localName){t=e;break}}__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer=t}}}}else{if(_){if(\"scale\"===__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").transformTool.mode){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").transformTool.mode=\"rotate-and-skew\"}else{__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").transformTool.mode=\"scale\"}}else{__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").transformTool.mode=\"scale\";if(0===i.length){__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer=void 0;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.set(r)}else{let t=__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer;if(t===null||t===void 0?void 0:t.contains(r)){for(;r.parentNode!==t;)r=r.parentNode;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.set(r)}else{let e=__classPrivateFieldGet(this,_TransformSelect_De,\"f\").call(this,r,t);for(;r.parentNode!==e&&r.parentNode!==__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentWorkspace;)r=r.parentNode;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer=e;__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.clear();__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.set(r)}}}}},_TransformSelect_ye=function e(t){if(t.buttons>1)return;if(!__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").ctrlKey&&!__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").shiftKey){2===__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").pointerClickCount&&(__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentContainer=void 0);__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").selectedElements.clear()}},_TransformSelect_we=function e(t){let s=[];if(t!==__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentWorkspace){for(;t.parentElement&&t.parentElement!==__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentWorkspace;){t=t.parentElement;[\"g\",\"a\"].includes(t.localName)&&s.unshift(t)}}return s},_TransformSelect_ze=function e(t){let s=[];for(let e=t.parentElement;e!==__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentWorkspace&&e!==__classPrivateFieldGet(this,_TransformSelect_stage,\"f\").currentWorkspace;e=e.parentElement)\"g\"!==e.localName&&\"a\"!==e.localName||s.push(e);return s.length>0?s[s.length-1]:null};exports[\"default\"]=TransformSelect;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/transformSelect.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/transformTool.js":
/*!****************************************************!*\
  !*** ./node_modules/foxyjs/tools/transformTool.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __awaiter=this&&this.__awaiter||function(t,l,i,a){function n(e){return e instanceof i?e:new i(function(t){t(e)})}return new(i||(i=Promise))(function(e,i){function s(t){try{r(a.next(t))}catch(t){i(t)}}function o(t){try{r(a[\"throw\"](t))}catch(t){i(t)}}function r(t){t.done?e(t.value):n(t.value).then(s,o)}r((a=a.apply(t,l||[])).next())})};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(t,e,i,s){if(i===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof e===\"function\"?t!==e||!s:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return i===\"m\"?s:i===\"a\"?s.call(t):s?s.value:e.get(t)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(t,e,i,s,o){if(s===\"m\")throw new TypeError(\"Private method is not writable\");if(s===\"a\"&&!o)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof e===\"function\"?t!==e||!o:!e.has(t))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return s===\"a\"?o.call(t,i):o?o.value=i:e.set(t,i),i};var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};var _TransformTool_stage,_TransformTool_transformHud,_TransformTool_grippies;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");const ee_1=__importDefault(__webpack_require__(/*! ../utils/ee */ \"./node_modules/foxyjs/utils/ee.js\"));let{abs:Rd,atan:Id,min:Bd,max:Ud}=Math;let{parseFloat:_d}=Number;let Fd=12;let Nd=12;let jd=10;let Vd=Symbol();let Hd=Symbol();let Wd=Symbol();let Yd=Symbol();class TransformTool{get transformHud(){return __classPrivateFieldGet(this,_TransformTool_transformHud,\"f\")}constructor(t){_TransformTool_stage.set(this,void 0);_TransformTool_transformHud.set(this,document.querySelector(\"#transform-hud\"));_TransformTool_grippies.set(this,void 0);this.Os=false;this.Ls=false;this.$s=!1;this.enabledCallback=()=>{this.enabled=true;__classPrivateFieldGet(this,_TransformTool_stage,\"f\").board.addEventListener(\"selectedelementschange\",this.C=()=>{this.S()});__classPrivateFieldGet(this,_TransformTool_stage,\"f\").board.addEventListener(\"workspacemutation\",this.T=()=>{this.A()});__classPrivateFieldGet(this,_TransformTool_stage,\"f\").board.addEventListener(\"zoomchange\",this.D=()=>{this.O()});this.S();this.O()};this.disabledCallback=()=>{this.enabled=false;__classPrivateFieldGet(this,_TransformTool_stage,\"f\").board.removeEventListener(\"selectedelementschange\",this.C);__classPrivateFieldGet(this,_TransformTool_stage,\"f\").board.removeEventListener(\"workspacemutation\",this.T);__classPrivateFieldGet(this,_TransformTool_stage,\"f\").board.removeEventListener(\"zoomchange\",this.D)};this.forceUpdate=()=>{this.xi()};this.zs=()=>{if(this.mode===\"scale\"){this[\"#scale-grippies\"].style.setProperty(\"visibility\",\"visible\");this[\"#rotate-grippies\"].style.setProperty(\"visibility\",\"hidden\");this[\"#skew-grippies\"].style.setProperty(\"visibility\",\"hidden\")}else{if(\"rotate-and-skew\"===this.mode){this[\"#scale-grippies\"].style.setProperty(\"visibility\",\"hidden\");this[\"#rotate-grippies\"].style.setProperty(\"visibility\",\"visible\");this[\"#skew-grippies\"].style.setProperty(\"visibility\",\"visible\")}}this.xi()};this.S=()=>{if(0===__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.size){__classPrivateFieldGet(this,_TransformTool_grippies,\"f\").style.setProperty(\"display\",\"none\")}else{__classPrivateFieldGet(this,_TransformTool_grippies,\"f\").style.setProperty(\"display\",\"block\")}this.xi()};this.A=()=>{if(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedElements.size>100){this.Is()}else{this.Rs()}};this.O=()=>{this.Rs()};this.L=e=>{let i;let t;let s=e.target;let o=new DOMPoint(e[\"clientX\"],e[\"clientY\"]);let r=o;s.addEventListener(\"pointermove\",i=t=>{s.removeEventListener(\"pointermove\",i);this.Bs(e,t)});s.addEventListener(\"pointerup\",t=()=>{s.removeEventListener(\"pointermove\",i);s.removeEventListener(\"pointerup\",t)})};this.He=t=>{let e=t.target.parentElement;e===this[\"#rotate-grippies\"]?this[\"Us\"]():e===this[\"#skew-grippies\"]?this[\"_s\"]():e===this[\"#origin-grippie\"]&&this[\"Fs\"]()};this.Bs=(e,i)=>{let t=i.target.parentElement;if(t===this[\"#scale-grippies\"]){let t=i.target;this.Gs(e,t)}else{if(t===this[\"#rotate-grippies\"]){this.Ns(e)}else{if(t===this[\"#skew-grippies\"]){let t=i.target;this.js(e,t)}}}};this.Gs=(u,t)=>{if(u.buttons>1)return;let i;let e;let a=Array.from(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.keys());let y=t.getAttribute(\"data-position\");let s=new DOMPoint(t.x.baseVal.value+t.width.baseVal.value/2,t.y.baseVal.value+t.height.baseVal.value/2).matrixTransform((0,common_1.ut)(t));let w=new DOMPoint(u[\"clientX\"],u[\"clientY\"]);let T=new ee_1.default(w,s);let o=!0;let r=!0;let l=!0;let b=!1;this.Os=!0;__classPrivateFieldGet(this,_TransformTool_stage,\"f\").undoManager.checkpoint(\"#scale--verb\",\"#transform-tool\");__classPrivateFieldGet(this,_TransformTool_stage,\"f\").snapManager.snapStart();a=a[\"filter\"](e=>{if(\"text\"===e.localName){let t=this.Hs(e);if(t&&__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.has(t))return!1}return!0});for(let l of a)if(!0===o){let t=(0,common_1.ut)(l);let{scaleX:e,scaleY:i}=(0,common_1.Oo)(t);let s=\"left\"===y||\"right\"===y?e:i;let o=getComputedStyle(l);l[Vd]=l.style.getPropertyValue(\"stroke-width\");l[Hd]=l.style.getPropertyValue(\"vector-effect\");let r=Rd(s)*_d(o.getPropertyValue(\"stroke-width\"));l.style.setProperty(\"stroke-width\",r);l.style.setProperty(\"vector-effect\",\"non-scaling-stroke\")}if(this[\"Ws\"](a)){let[t,...e]=a;let v=Symbol();this[\"Ls\"]=!0;(0,common_1.pt)(t,__classPrivateFieldGet(this,_TransformTool_transformHud,\"f\"));for(let r of a){let t=(0,common_1.ut)(r).inverse();let e=(0,common_1.ct)(r);let s=a.filter(t=>t!==r);let o=[(0,common_1.Wi)(r)];for(let i of s){let t=(0,common_1.pt)(i,r);let e=(0,common_1.di)((0,common_1.Wi)(i),t);o.push(e)}let i=(0,common_1.ci)(o);r[v]={clientToUserTransform:t,userTransform:e,bbox:i}}window.addEventListener(\"pointermove\",i=u=>{for(let p of a){let{clientToUserTransform:t,userTransform:e,bbox:i}=p[v];let s=w.matrixTransform(t);let o=new DOMPoint(u[\"clientX\"],u[\"clientY\"]);let r=__classPrivateFieldGet(this,_TransformTool_stage,\"f\").snapManager.snapPoint(o);if(!1===(0,common_1.qt)(o,r)){o=r;o[\"x\"]-=T[\"x\"];o[\"y\"]-=T[\"y\"]}let l=o.matrixTransform(t);let a=l[\"x\"]-s[\"x\"];let n=l[\"y\"]-s[\"y\"];let{centerX:h,centerY:m,scaleX:d,scaleY:f}=this[\"Ys\"](a,n,i,y,b);let c=-h*(Number(d)-1);let _=-m*(Number(f)-1);let g=DOMMatrix.fromMatrix(e);g.translateSelf(c,_);g.scaleSelf(d,f);p.setAttribute(\"transform\",g)}})}else{let t=Array.from(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.keys()).map(t=>(0,common_1.Yi)(t));let p=(0,common_1.ci)(t);for(let s of a){let t=(0,common_1.ut)(s);let e=t.inverse();let i=(0,common_1.ct)(s);s[Wd]={clientToUserTransform:t,userToClientTransform:e,userTransform:i}}window.addEventListener(\"pointermove\",i=g=>{for(let _ of a){let t=new DOMPoint(u[\"clientX\"],u[\"clientY\"]);let e=new DOMPoint(g[\"clientX\"],g[\"clientY\"]);{let t=__classPrivateFieldGet(this,_TransformTool_stage,\"f\").snapManager.snapPoint(e);if(!1===(0,common_1.qt)(e,t)){e=t;e[\"x\"]-=T[\"x\"];e[\"y\"]-=T[\"y\"]}}let i=e[\"x\"]-t[\"x\"];let s=e[\"y\"]-t[\"y\"];let{clientToUserTransform:o,userToClientTransform:r,userTransform:l}=_[Wd];let{centerX:a,centerY:n,scaleX:h,scaleY:m}=this[\"Ys\"](i,s,p,y,b);let d=-a*(Number(h)-1);let f=-n*(Number(m)-1);let c=DOMMatrix.fromMatrix(l);c.multiplySelf(r);c.translateSelf(d,f);c.scaleSelf(h,m);c.multiplySelf(o);_.setAttribute(\"transform\",c.toString())}})}window.addEventListener(\"pointerup\",e=()=>{window.removeEventListener(\"pointermove\",i);window.removeEventListener(\"pointerup\",e);for(let t of a){if(!0===o){t.style.setProperty(\"stroke-width\",t[Vd]);t.style.setProperty(\"vector-effect\",t[Hd])}}__classPrivateFieldGet(this,_TransformTool_stage,\"f\").snapManager.snapEnd();this.Os=!1;this.Ls=!1})};this.Ns=i=>{if(i.buttons>1)return;let m=[...Array.from(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.keys())];__classPrivateFieldGet(this,_TransformTool_stage,\"f\").undoManager.checkpoint(\"#rotate\",\"#transform-tool\");m=m.filter(e=>{if(\"text\"===e.localName){let t=this.Hs(e);if(t&&__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.has(t))return!1}return!0});this.Ws(m)&&(this.Ls=!0);if(1===m.length){let t;let e;let o=m[0];let r=(0,common_1.Ct)(o);let l=new DOMPoint(i[\"clientX\"],i[\"clientY\"]);let a=(0,common_1.kt)([o]);this.$s=!0;window.addEventListener(\"pointermove\",t=t=>{let e=new DOMPoint(t[\"clientX\"],t[\"clientY\"]);let i=(0,common_1.ni)(a,l,e);let s=r+i;__classPrivateFieldGet(this,_TransformTool_stage,\"f\").shiftKey&&(s=(0,common_1.ai)(s,15));(0,common_1.St)(o,s)});window.addEventListener(\"pointerup\",e=()=>{window.removeEventListener(\"pointermove\",t);window.removeEventListener(\"pointerup\",e);this[\"$s\"]=!1;this[\"Ls\"]=!1})}else{let t;let e;let n=(0,common_1.kt)(m);let h=new DOMPoint(i[\"clientX\"],i[\"clientY\"]);for(let s of m){let t=(0,common_1.ct)(s);let e=(0,common_1.ut)(s);let i=e.inverse();s[Wd]={clientToUserTransform:e,userToClientTransform:i,userTransform:t}}this[\"$s\"]=!0;window.addEventListener(\"pointermove\",t=a=>{for(let l of m){let{clientToUserTransform:t,userToClientTransform:e,userTransform:i}=l[Wd];let s=new DOMPoint(a[\"clientX\"],a[\"clientY\"]);let o=(0,common_1.ni)(n,h,s);__classPrivateFieldGet(this,_TransformTool_stage,\"f\").shiftKey&&(o=(0,common_1.ai)(o,15));let r=DOMMatrix.fromMatrix(i);r.multiplySelf(e);r.translateSelf(n[\"x\"],n[\"y\"]);r.rotateSelf(o);r.translateSelf(-n[\"x\"],-n[\"y\"]);r.multiplySelf(t);l.setAttribute(\"transform\",r)}});window.addEventListener(\"pointerup\",e=()=>{window.removeEventListener(\"pointermove\",t);window.removeEventListener(\"pointerup\",e);this.$s=!1;this.Ls=!1})}};this.js=(i,t)=>{if(i.buttons>1)return;let r;let e;let f;let c=[...Array.from(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.keys())];let s=t.getAttribute(\"data-position\");f=\"top\"===s||\"bottom\"===s?\"horizontal\":\"vertical\";__classPrivateFieldGet(this,_TransformTool_stage,\"f\").undoManager.checkpoint(\"#skew\",\"#transform-tool\");c=c.filter(e=>{if(\"text\"===e.localName){let t=this.Hs(e);if(t&&__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.has(t))return!1}return!0});for(let l of c){l[Vd]=l.style.getPropertyValue(\"stroke-width\");l[Hd]=l.style.getPropertyValue(\"vector-effect\");let t=(0,common_1.ut)(l);let{scaleX:e,scaleY:i}=(0,common_1.Oo)(t);let s=(e+i)/2;let o=getComputedStyle(l);let r=Rd(s)*_d(o.getPropertyValue(\"stroke-width\"));l.style.setProperty(\"stroke-width\",r);l.style.setProperty(\"vector-effect\",\"non-scaling-stroke\")}if(this.Ws(c)){let[s,...t]=c;let e=(0,common_1.Wi)(s);let o=[];let h=Symbol();for(let i of t){let t=(0,common_1.pt)(i,s);let e=(0,common_1.di)((0,common_1.Wi)(i),t);o.push(e)}(0,common_1.ci)([e,...o]);(0,common_1.pt)(s,this.transformHud);let m=new DOMPoint(i[\"clientX\"],i[\"clientY\"]);let d=(0,common_1.kt)(c);for(let i of c){let t=(0,common_1.ut)(i).inverse();let e=(0,common_1.ct)(i);i[h]={clientToUserTransform:t,userTransform:e}}window.addEventListener(\"pointermove\",r=n=>{for(let a of c){let{clientToUserTransform:t,userTransform:e}=a[h];let i=m.matrixTransform(t);let s=d.matrixTransform(t);let o=new DOMPoint(n[\"clientX\"],n[\"clientY\"]).matrixTransform(t);let r=(0,common_1.ni)(s,i,o);let l=DOMMatrix.fromMatrix(e);l=\"horizontal\"===f?(0,common_1.Pt)(l,-r,0,s[\"x\"],s[\"y\"]):(0,common_1.Pt)(l,0,r,s[\"x\"],s[\"y\"]);a.setAttribute(\"transform\",l.toString())}})}else{let n=new DOMPoint(i[\"clientX\"],i[\"clientY\"]);let h=(0,common_1.kt)(c);for(let s of c){let t=(0,common_1.ut)(s);let e=t[\"inverse\"]();let i=(0,common_1.ct)(s);s[Wd]={clientToUserTransform:t,userToClientTransform:e,userTransform:i}}window.addEventListener(\"pointermove\",r=a=>{for(let l of c){let{clientToUserTransform:t,userToClientTransform:e,userTransform:i}=l[Wd];let s=new DOMPoint(a[\"clientX\"],a[\"clientY\"]);let o=(0,common_1.ni)(h,n,s);let r=DOMMatrix.fromMatrix(i);r.multiplySelf(e);r=\"horizontal\"===f?(0,common_1.Pt)(r,-o,0,h[\"x\"],h[\"y\"]):(0,common_1.Pt)(r,0,o,h[\"x\"],h[\"y\"]);r.multiplySelf(t);l.setAttribute(\"transform\",r.toString())}})}window.addEventListener(\"pointerup\",e=()=>{window.removeEventListener(\"pointermove\",r);window.removeEventListener(\"pointerup\",e);for(let t of c){t.style.setProperty(\"stroke-width\",t[Vd]);t.style.setProperty(\"vector-effect\",t[Hd])}})};this.Vs=t=>{if(t.buttons>1)return};this.Us=()=>{__classPrivateFieldGet(this,_TransformTool_stage,\"f\").undoManager.checkpoint(\"#remove-transform\",\"#transform-tool\");for(let t of Array.from(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedElements.keys()))t.removeAttribute(\"transform\")};this._s=()=>{__classPrivateFieldGet(this,_TransformTool_stage,\"f\").undoManager.checkpoint(\"#remove-transform\",\"#transform-tool\");for(let t of Array.from(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedElements.keys()))t.removeAttribute(\"transform\")};this.Fs=()=>{__classPrivateFieldGet(this,_TransformTool_stage,\"f\").undoManager.checkpoint(\"#move-transform-origin\",\"#transform-tool\");for(let t of Array.from(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedElements.keys()))t.removeAttribute(\"transform\")};this.xi=()=>{if(\"scale\"===this.mode){this.qs()}else if(\"rotate-and-skew\"===this.mode){this.Xs();this.Zs();!1===this.$s&&this.Ks()}};this.qs=()=>{const a=Array.from(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.keys());if(a.length>0){let i=__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.scaleGrippie.size/__classPrivateFieldGet(this,_TransformTool_stage,\"f\").scale;let r;let l=this[\"Es\"];for(let t of this[\"#scale-grippies\"].children){const e=t;e.width.baseVal.value=i;e.height.baseVal.value=i}if(this.Ls||this.Ws(a)){let[s,...t]=a;let e=(0,common_1.Wi)(s);let o=[];for(let i of t){let t=(0,common_1.pt)(i,s);let e=(0,common_1.di)((0,common_1.Wi)(i),t);o.push(e)}r=(0,common_1.ci)([e,...o]);const n=(0,common_1.pt)(s,__classPrivateFieldGet(this,_TransformTool_transformHud,\"f\"));const h=new DOMPoint(r[\"x\"]+r[\"width\"]/2,r[\"y\"])[\"matrixTransform\"](n);l[\"top\"][\"x\"][\"baseVal\"][\"value\"]=h[\"x\"]-i/2;l[\"top\"][\"y\"][\"baseVal\"][\"value\"]=h[\"y\"]-i/2;const m=new DOMPoint(r[\"x\"]+r[\"width\"]/2,r[\"y\"]+r[\"height\"])[\"matrixTransform\"](n);l[\"bottom\"][\"x\"][\"baseVal\"][\"value\"]=m[\"x\"]-i/2;l[\"bottom\"][\"y\"][\"baseVal\"][\"value\"]=m[\"y\"]-i/2;const d=new DOMPoint(r[\"x\"],r[\"y\"]+r[\"height\"]/2)[\"matrixTransform\"](n);l[\"left\"][\"x\"][\"baseVal\"][\"value\"]=d[\"x\"]-i/2;l[\"left\"][\"y\"][\"baseVal\"][\"value\"]=d[\"y\"]-i/2;const f=new DOMPoint(r[\"x\"]+r[\"width\"],r[\"y\"]+r[\"height\"]/2)[\"matrixTransform\"](n);l[\"right\"][\"x\"][\"baseVal\"][\"value\"]=f[\"x\"]-i/2;l[\"right\"][\"y\"][\"baseVal\"][\"value\"]=f[\"y\"]-i/2;const c=new DOMPoint(r[\"x\"],r[\"y\"])[\"matrixTransform\"](n);l[\"top-left\"][\"x\"][\"baseVal\"][\"value\"]=c[\"x\"]-i/2;l[\"top-left\"][\"y\"][\"baseVal\"][\"value\"]=c[\"y\"]-i/2;const _=new DOMPoint(r[\"x\"]+r[\"width\"],r[\"y\"])[\"matrixTransform\"](n);l[\"top-right\"][\"x\"][\"baseVal\"][\"value\"]=_[\"x\"]-i/2;l[\"top-right\"][\"y\"][\"baseVal\"][\"value\"]=_[\"y\"]-i/2;const g=new DOMPoint(r[\"x\"],r[\"y\"]+r[\"height\"])[\"matrixTransform\"](n);l[\"bottom-left\"][\"x\"][\"baseVal\"][\"value\"]=g[\"x\"]-i/2;l[\"bottom-left\"][\"y\"][\"baseVal\"][\"value\"]=g[\"y\"]-i/2;const p=new DOMPoint(r[\"x\"]+r[\"width\"],r[\"y\"]+r[\"height\"])[\"matrixTransform\"](n);l[\"bottom-right\"][\"x\"][\"baseVal\"][\"value\"]=p[\"x\"]-i/2;l[\"bottom-right\"][\"y\"][\"baseVal\"][\"value\"]=p[\"y\"]-i/2}else{let t=(0,common_1.ut)(__classPrivateFieldGet(this,_TransformTool_transformHud,\"f\"))[\"inverse\"]();let e=a[\"map\"](t=>(0,common_1.Yi)(t));r=(0,common_1.ci)(e);r=(0,common_1.di)(r,t);l[\"top\"][\"x\"][\"baseVal\"][\"value\"]=r[\"x\"]+r[\"width\"]/2-i/2;l[\"top\"][\"y\"][\"baseVal\"][\"value\"]=r[\"y\"]-i/2;l[\"bottom\"][\"x\"][\"baseVal\"][\"value\"]=r[\"x\"]+r[\"width\"]/2-i/2;l[\"bottom\"][\"y\"][\"baseVal\"][\"value\"]=r[\"y\"]+r[\"height\"]-i/2;l[\"left\"][\"x\"][\"baseVal\"][\"value\"]=r[\"x\"]-i/2;l[\"left\"][\"y\"][\"baseVal\"][\"value\"]=r[\"y\"]+r[\"height\"]/2-i/2;l[\"right\"][\"x\"][\"baseVal\"][\"value\"]=r[\"x\"]+r[\"width\"]-i/2;l[\"right\"][\"y\"][\"baseVal\"][\"value\"]=r[\"y\"]+r[\"height\"]/2-i/2;l[\"top-left\"][\"x\"][\"baseVal\"][\"value\"]=r[\"x\"]-i/2;l[\"top-left\"][\"y\"][\"baseVal\"][\"value\"]=r[\"y\"]-i/2;l[\"top-right\"][\"x\"][\"baseVal\"][\"value\"]=r[\"x\"]+r[\"width\"]-i/2;l[\"top-right\"][\"y\"][\"baseVal\"][\"value\"]=r[\"y\"]-i/2;l[\"bottom-left\"][\"x\"][\"baseVal\"][\"value\"]=r[\"x\"]-i/2;l[\"bottom-left\"][\"y\"][\"baseVal\"][\"value\"]=r[\"y\"]+r[\"height\"]-i/2;l[\"bottom-right\"][\"x\"][\"baseVal\"][\"value\"]=r[\"x\"]+r[\"width\"]-i/2;l[\"bottom-right\"][\"y\"][\"baseVal\"][\"value\"]=r[\"y\"]+r[\"height\"]-i/2}l[\"top\"][\"style\"][\"visibility\"]=0===r[\"height\"]?\"hidden\":null;l[\"bottom\"][\"style\"][\"visibility\"]=0===r[\"height\"]?\"hidden\":null;l[\"left\"][\"style\"][\"visibility\"]=0===r[\"width\"]?\"hidden\":null;l[\"right\"][\"style\"][\"visibility\"]=0===r[\"width\"]?\"hidden\":null;l[\"top-left\"][\"style\"][\"visibility\"]=0===r[\"width\"]||0===r[\"height\"]?\"hidden\":null;l[\"top-right\"][\"style\"][\"visibility\"]=0===r[\"width\"]||0===r[\"height\"]?\"hidden\":null;l[\"bottom-left\"][\"style\"][\"visibility\"]=0===r[\"width\"]||0===r[\"height\"]?\"hidden\":null;l[\"bottom-right\"][\"style\"][\"visibility\"]=0===r[\"width\"]||0===r[\"height\"]?\"hidden\":null}};this.Xs=()=>{let f=Array.from(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.keys());if(f.length>0){let h=__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.rotateGrippie.size/__classPrivateFieldGet(this,_TransformTool_stage,\"f\").scale;let m;let d=this[\"As\"];for(let t of this[\"#rotate-grippies\"][\"children\"]){const e=t;e[\"width\"][\"baseVal\"][\"value\"]=h;e[\"height\"][\"baseVal\"][\"value\"]=h}if(this[\"Ls\"]||this[\"Ws\"](f)){let[s,...t]=f;let e=(0,common_1.Wi)(s);let o=[];for(let i of t){let t=(0,common_1.pt)(i,s);let e=(0,common_1.di)((0,common_1.Wi)(i),t);o[\"push\"](e)}m=(0,common_1.ci)([e,...o]);let i=(0,common_1.pt)(s,__classPrivateFieldGet(this,_TransformTool_transformHud,\"f\"));let r=new DOMPoint(m[\"x\"],m[\"y\"])[\"matrixTransform\"](i);d[\"top-left\"][\"x\"][\"baseVal\"][\"value\"]=r[\"x\"]-h/2;d[\"top-left\"][\"y\"][\"baseVal\"][\"value\"]=r[\"y\"]-h/2;let l=new DOMPoint(m[\"x\"]+m[\"width\"],m[\"y\"])[\"matrixTransform\"](i);d[\"top-right\"][\"x\"][\"baseVal\"][\"value\"]=l[\"x\"]-h/2;d[\"top-right\"][\"y\"][\"baseVal\"][\"value\"]=l[\"y\"]-h/2;let a=new DOMPoint(m[\"x\"],m[\"y\"]+m[\"height\"])[\"matrixTransform\"](i);d[\"bottom-left\"][\"x\"][\"baseVal\"][\"value\"]=a[\"x\"]-h/2;d[\"bottom-left\"][\"y\"][\"baseVal\"][\"value\"]=a[\"y\"]-h/2;let n=new DOMPoint(m[\"x\"]+m[\"width\"],m[\"y\"]+m[\"height\"])[\"matrixTransform\"](i);d[\"bottom-right\"][\"x\"][\"baseVal\"][\"value\"]=n[\"x\"]-h/2;d[\"bottom-right\"][\"y\"][\"baseVal\"][\"value\"]=n[\"y\"]-h/2}else{let t=(0,common_1.ut)(__classPrivateFieldGet(this,_TransformTool_transformHud,\"f\"))[\"inverse\"]();let e=f[\"map\"](t=>(0,common_1.Yi)(t));m=(0,common_1.ci)(e);m=(0,common_1.di)(m,t);d[\"top-left\"][\"x\"][\"baseVal\"][\"value\"]=m[\"x\"]-h/2;d[\"top-left\"][\"y\"][\"baseVal\"][\"value\"]=m[\"y\"]-h/2;d[\"top-right\"][\"x\"][\"baseVal\"][\"value\"]=m[\"x\"]+m[\"width\"]-h/2;d[\"top-right\"][\"y\"][\"baseVal\"][\"value\"]=m[\"y\"]-h/2;d[\"bottom-left\"][\"x\"][\"baseVal\"][\"value\"]=m[\"x\"]-h/2;d[\"bottom-left\"][\"y\"][\"baseVal\"][\"value\"]=m[\"y\"]+m[\"height\"]-h/2;d[\"bottom-right\"][\"x\"][\"baseVal\"][\"value\"]=m[\"x\"]+m[\"width\"]-h/2;d[\"bottom-right\"][\"y\"][\"baseVal\"][\"value\"]=m[\"y\"]+m[\"height\"]-h/2}d[\"bottom-left\"][\"style\"][\"visibility\"]=0===m[\"width\"]||0===m[\"height\"]?\"hidden\":null;d[\"bottom-right\"][\"style\"][\"visibility\"]=0===m[\"width\"]||0===m[\"height\"]?\"hidden\":null}};this.Zs=()=>{let f=Array.from(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.keys());if(f.length>0){let h=__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.skewGrippie.size/__classPrivateFieldGet(this,_TransformTool_stage,\"f\").scale;let m;let d=this[\"Ts\"];for(let t of this[\"#skew-grippies\"][\"children\"]){const e=t;e[\"width\"][\"baseVal\"][\"value\"]=h;e[\"height\"][\"baseVal\"][\"value\"]=h}if(this[\"Ls\"]||this[\"Ws\"](f)){let[s,...t]=f;let e=(0,common_1.Wi)(s);let o=[];for(let i of t){let t=(0,common_1.pt)(i,s);let e=(0,common_1.di)((0,common_1.Wi)(i),t);o[\"push\"](e)}m=(0,common_1.ci)([e,...o]);let i=(0,common_1.pt)(s,__classPrivateFieldGet(this,_TransformTool_transformHud,\"f\"));let r=new DOMPoint(m[\"x\"]+m[\"width\"]/2,m[\"y\"])[\"matrixTransform\"](i);d[\"top\"][\"x\"][\"baseVal\"][\"value\"]=r[\"x\"]-h/2;d[\"top\"][\"y\"][\"baseVal\"][\"value\"]=r[\"y\"]-h/2;let l=new DOMPoint(m[\"x\"]+m[\"width\"]/2,m[\"y\"]+m[\"height\"])[\"matrixTransform\"](i);d[\"bottom\"][\"x\"][\"baseVal\"][\"value\"]=l[\"x\"]-h/2;d[\"bottom\"][\"y\"][\"baseVal\"][\"value\"]=l[\"y\"]-h/2;let a=new DOMPoint(m[\"x\"],m[\"y\"]+m[\"height\"]/2)[\"matrixTransform\"](i);d[\"left\"][\"x\"][\"baseVal\"][\"value\"]=a[\"x\"]-h/2;d[\"left\"][\"y\"][\"baseVal\"][\"value\"]=a[\"y\"]-h/2;let n=new DOMPoint(m[\"x\"]+m[\"width\"],m[\"y\"]+m[\"height\"]/2)[\"matrixTransform\"](i);d[\"right\"][\"x\"][\"baseVal\"][\"value\"]=n[\"x\"]-h/2;d[\"right\"][\"y\"][\"baseVal\"][\"value\"]=n[\"y\"]-h/2}else{let t=(0,common_1.ut)(__classPrivateFieldGet(this,_TransformTool_transformHud,\"f\"))[\"inverse\"]();let e=f[\"map\"](t=>(0,common_1.Yi)(t));m=(0,common_1.ci)(e);m=(0,common_1.di)(m,t);d[\"top\"][\"x\"][\"baseVal\"][\"value\"]=m[\"x\"]+m[\"width\"]/2-h/2;d[\"top\"][\"y\"][\"baseVal\"][\"value\"]=m[\"y\"]-h/2;d[\"bottom\"][\"x\"][\"baseVal\"][\"value\"]=m[\"x\"]+m[\"width\"]/2-h/2;d[\"bottom\"][\"y\"][\"baseVal\"][\"value\"]=m[\"y\"]+m[\"height\"]-h/2;d[\"left\"][\"x\"][\"baseVal\"][\"value\"]=m[\"x\"]-h/2;d[\"left\"][\"y\"][\"baseVal\"][\"value\"]=m[\"y\"]+m[\"height\"]/2-h/2;d[\"right\"][\"x\"][\"baseVal\"][\"value\"]=m[\"x\"]+m[\"width\"]-h/2;d[\"right\"][\"y\"][\"baseVal\"][\"value\"]=m[\"y\"]+m[\"height\"]/2-h/2}d.top[\"style\"][\"visibility\"]=0===m[\"width\"]||0===m[\"height\"]?\"hidden\":null;d.bottom[\"style\"][\"visibility\"]=0===m[\"width\"]||0===m[\"height\"]?\"hidden\":null;d.left[\"style\"][\"visibility\"]=0===m[\"width\"]||0===m[\"height\"]?\"hidden\":null;d.right[\"style\"][\"visibility\"]=0===m[\"width\"]||0===m[\"height\"]?\"hidden\":null}};this.Ks=()=>{if(__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.size>=1){}};this.blink=()=>__awaiter(this,void 0,void 0,function*(){__classPrivateFieldGet(this,_TransformTool_grippies,\"f\").style.setProperty(\"display\",\"none\");yield(0,common_1.sleep)(200);__classPrivateFieldGet(this,_TransformTool_stage,\"f\").selectedObjectElements.size>0&&__classPrivateFieldGet(this,_TransformTool_grippies,\"f\").style.setProperty(\"display\",\"block\")});this.Hs=t=>{let e=t[\"querySelector\"](\"textPath\");let i=null;(e===null||e===void 0?void 0:e[\"hasAttribute\"](\"href\"))&&(i=__classPrivateFieldGet(this,_TransformTool_stage,\"f\").workspaces.querySelector(e[\"href\"][\"baseVal\"]));return i};this.Ws=s=>{if(s[\"length\"]>1){let[e,...i]=s;for(let t of i)if(t.parentElement!==e.parentElement)return!1;let t=(0,common_1.ct)(e);let o=(0,common_1.te)(Math.atan(t[\"c\"]/t[\"d\"]),2);let r=(0,common_1.te)(Math.atan(-t[\"b\"]/t[\"a\"]),2);for(let s of i){let t=(0,common_1.ct)(s);let e=(0,common_1.te)(Math.atan(t[\"c\"]/t[\"d\"]),2);let i=(0,common_1.te)(Math.atan(-t[\"b\"]/t[\"a\"]),2);if(!1===Object.is(e,o)||!1===Object.is(i,r))return!1}}return!0};this.Ys=(t,e,i,s,o)=>{let r;let l;let a;let n;let h;const m=__classPrivateFieldGet(this,_TransformTool_stage,\"f\").ctrlKey;const d=__classPrivateFieldGet(this,_TransformTool_stage,\"f\").shiftKey;return!1===o?m||d?!m&&d?h=\"B\":m&&!d?h=\"C\":m&&d&&(h=\"D\"):h=\"A\":!0===o&&(m||d?!m&&d?h=\"A\":m&&!d?h=\"D\":m&&d&&(h=\"C\"):h=\"B\"),\"top\"===s?\"A\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"],a=1,n=(i[\"height\"]-e)/i[\"height\"]):\"B\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"],n=(i[\"height\"]-e)/i[\"height\"],a=n):\"C\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=1,n=(i[\"height\"]-i[\"height\"]/2-e)/(i[\"height\"]-i[\"height\"]/2)):\"D\"===h&&(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,n=(i[\"height\"]-i[\"height\"]/2-e)/(i[\"height\"]-i[\"height\"]/2),a=n):\"bottom\"===s?\"A\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"],a=1,n=(i[\"height\"]+e)/i[\"height\"]):\"B\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"],n=(i[\"height\"]+e)/i[\"height\"],a=n):\"C\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=1,n=(i[\"height\"]-i[\"height\"]/2+e)/(i[\"height\"]-i[\"height\"]/2)):\"D\"===h&&(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,n=(i[\"height\"]-i[\"height\"]/2+e)/(i[\"height\"]-i[\"height\"]/2),a=n):\"left\"===s?\"A\"===h?(r=i[\"x\"]+i[\"width\"],l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-t)/i[\"width\"],n=1):\"B\"===h?(r=i[\"x\"]+i[\"width\"],l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-t)/i[\"width\"],n=a):\"C\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-i[\"width\"]/2-t)/(i[\"width\"]-i[\"width\"]/2),n=1):\"D\"===h&&(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-i[\"width\"]/2-t)/(i[\"width\"]-i[\"width\"]/2),n=a):\"right\"===s&&(\"A\"===h?(r=i[\"x\"],l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]+t)/i[\"width\"],n=1):\"B\"===h?(r=i[\"x\"],l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]+t)/i[\"width\"],n=a):\"C\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-i[\"width\"]/2+t)/(i[\"width\"]-i[\"width\"]/2),n=1):\"D\"===h&&(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=n=(i[\"width\"]-i[\"width\"]/2+t)/(i[\"width\"]-i[\"width\"]/2))),\"top-left\"===s?\"A\"===h?(r=i[\"x\"]+i[\"width\"],l=i[\"y\"]+i[\"height\"],a=(i[\"width\"]-t)/i[\"width\"],n=(i[\"height\"]-e)/i[\"height\"]):\"B\"===h?(r=i[\"x\"]+i[\"width\"],l=i[\"y\"]+i[\"height\"],a=(i[\"width\"]-t)/i[\"width\"],n=(i[\"height\"]-e)/i[\"height\"],a=n=Math.min(a,n)):\"C\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-i[\"width\"]/2-t)/(i[\"width\"]-i[\"width\"]/2),n=(i[\"height\"]-i[\"height\"]/2-e)/(i[\"height\"]-i[\"height\"]/2)):\"D\"===h&&(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-i[\"width\"]/2-t)/(i[\"width\"]-i[\"width\"]/2),n=(i[\"height\"]-i[\"height\"]/2-e)/(i[\"height\"]-i[\"height\"]/2),a>=0&&n>=0?a=n=Math.min(a,n):a<=0&&n<=0?a=n=Math.max(a,n):Math.abs(a)>=Math.abs(n)?a=-n:n=-a):\"top-right\"===s?\"A\"===h?(r=i[\"x\"],l=i[\"y\"]+i[\"height\"],a=(i[\"width\"]+t)/i[\"width\"],n=(i[\"height\"]-e)/i[\"height\"]):\"B\"===h?(r=i[\"x\"],l=i[\"y\"]+i[\"height\"],a=(i[\"width\"]+t)/i[\"width\"],n=(i[\"height\"]-e)/i[\"height\"],a=n=Math.min(a,n)):\"C\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-i[\"width\"]/2+t)/(i[\"width\"]-i[\"width\"]/2),n=(i[\"height\"]-i[\"height\"]/2-e)/(i[\"height\"]-i[\"height\"]/2)):\"D\"===h&&(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-i[\"width\"]/2+t)/(i[\"width\"]-i[\"width\"]/2),n=(i[\"height\"]-i[\"height\"]/2-e)/(i[\"height\"]-i[\"height\"]/2),a>=0&&n>=0?a=n=Math.min(a,n):a<=0&&n<=0?a=n=Math.max(a,n):Math.abs(a)>=Math.abs(n)?a=-n:n=-a):\"bottom-left\"===s?\"A\"===h?(r=i[\"x\"]+i[\"width\"],l=i[\"y\"],a=(i[\"width\"]-t)/i[\"width\"],n=(i[\"height\"]+e)/i[\"height\"]):\"B\"===h?(r=i[\"x\"]+i[\"width\"],l=i[\"y\"],a=(i[\"width\"]-t)/i[\"width\"],n=(i[\"height\"]+e)/i[\"height\"],a=n=Math.min(a,n)):\"C\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-i[\"width\"]/2-t)/(i[\"width\"]-i[\"width\"]/2),n=(i[\"height\"]-i[\"height\"]/2+e)/(i[\"height\"]-i[\"height\"]/2)):\"D\"===h&&(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-i[\"width\"]/2-t)/(i[\"width\"]-i[\"width\"]/2),n=(i[\"height\"]-i[\"height\"]/2+e)/(i[\"height\"]-i[\"height\"]/2),a>=0&&n>=0?a=n=Math.min(a,n):a<=0&&n<=0?a=n=Math.max(a,n):Math.abs(a)>=Math.abs(n)?a=-n:n=-a):\"bottom-right\"===s&&(\"A\"===h?(r=i[\"x\"],l=i[\"y\"],a=(i[\"width\"]+t)/i[\"width\"],n=(i[\"height\"]+e)/i[\"height\"]):\"B\"===h?(r=i[\"x\"],l=i[\"y\"],a=(i[\"width\"]+t)/i[\"width\"],n=(i[\"height\"]+e)/i[\"height\"],a=n=Math.min(a,n)):\"C\"===h?(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-i[\"width\"]/2+t)/(i[\"width\"]-i[\"width\"]/2),n=(i[\"height\"]-i[\"height\"]/2+e)/(i[\"height\"]-i[\"height\"]/2)):\"D\"===h&&(r=i[\"x\"]+i[\"width\"]/2,l=i[\"y\"]+i[\"height\"]/2,a=(i[\"width\"]-i[\"width\"]/2+t)/(i[\"width\"]-i[\"width\"]/2),n=(i[\"height\"]-i[\"height\"]/2+e)/(i[\"height\"]-i[\"height\"]/2),a>=0&&n>=0?a=n=Math.min(a,n):a<=0&&n<=0?a=n=Math.max(a,n):Math.abs(a)>=Math.abs(n)?a=-n:n=-a)),{centerX:r,centerY:l,scaleX:a,scaleY:n}};__classPrivateFieldSet(this,_TransformTool_stage,t,\"f\");this.Es={};this.Ts={};this.As={};this.$s=!1;this.Os=!1;this.Ls=!1;this.ri=\"scale\";this.Rs=this.xi;this.Is=this.xi;__classPrivateFieldGet(this,_TransformTool_transformHud,\"f\").innerHTML=`<style>\n        #transform-hud [uid=\"scale-grippies\"] > .grippie {\n          fill: ${__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.scaleGrippie.fill};\n          stroke: ${__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.scaleGrippie.stroke};\n          stroke-width: ${__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.scaleGrippie[\"stroke-width\"]};\n          vector-effect: non-scaling-stroke;\n          filter: url(#grippie-shadow);\n        }\n    \n        #transform-hud [uid=\"rotate-grippies\"] > .grippie {\n          fill: ${__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.rotateGrippie.fill};\n          stroke: ${__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.rotateGrippie.stroke};\n          stroke-width: ${__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.rotateGrippie[\"stroke-width\"]};\n          vector-effect: non-scaling-stroke;\n          filter: url(#grippie-shadow);\n        }\n    \n        #transform-hud [uid=\"skew-grippies\"] > .grippie {\n          fill: ${__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.skewGrippie.fill};\n          stroke: ${__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.skewGrippie.stroke};\n          stroke-width: ${__classPrivateFieldGet(this,_TransformTool_stage,\"f\").config.skewGrippie[\"stroke-width\"]};\n          vector-effect: non-scaling-stroke;\n          filter: url(#grippie-shadow);\n        }\n      </style>\n    \n      <g uid=\"grippies\">\n        <g uid=\"scale-grippies\">\n          <rect class=\"grippie\" data-position=\"top\"></rect>\n          <rect class=\"grippie\" data-position=\"left\"></rect>\n          <rect class=\"grippie\" data-position=\"bottom\"></rect>\n          <rect class=\"grippie\" data-position=\"right\"></rect>\n          <rect class=\"grippie\" data-position=\"top-left\"></rect>\n          <rect class=\"grippie\" data-position=\"top-right\"></rect>\n          <rect class=\"grippie\" data-position=\"bottom-left\"></rect>\n          <rect class=\"grippie\" data-position=\"bottom-right\"></rect>\n        </g>\n    \n        <g uid=\"rotate-grippies\">\n          <rect class=\"grippie\" rx=\"999\" data-position=\"top-left\"></rect>\n          <rect class=\"grippie\" rx=\"999\" data-position=\"top-right\"></rect>\n          <rect class=\"grippie\" rx=\"999\" data-position=\"bottom-left\"></rect>\n          <rect class=\"grippie\" rx=\"999\" data-position=\"bottom-right\"></rect>\n        </g>\n    \n        <g uid=\"skew-grippies\">\n          <rect class=\"grippie\" data-position=\"top\"></rect>\n          <rect class=\"grippie\" data-position=\"left\"></rect>\n          <rect class=\"grippie\" data-position=\"bottom\"></rect>\n          <rect class=\"grippie\" data-position=\"right\"></rect>\n        </g>\n\n      </g>`;this[\"#scale-grippies\"]=document.querySelector('[uid=\"scale-grippies\"]');this[\"#rotate-grippies\"]=document.querySelector('[uid=\"rotate-grippies\"]');this[\"#skew-grippies\"]=document.querySelector('[uid=\"skew-grippies\"]');__classPrivateFieldSet(this,_TransformTool_grippies,__classPrivateFieldGet(this,_TransformTool_transformHud,\"f\").querySelector('[uid=\"grippies\"]'),\"f\");for(let t of this[\"#scale-grippies\"].children){const e=t;this.Es[e.getAttribute(\"data-position\")]=e}for(let t of this[\"#rotate-grippies\"].children){const e=t;this.As[e.getAttribute(\"data-position\")]=t}for(let t of this[\"#skew-grippies\"].children){const e=t;this.Ts[e.getAttribute(\"data-position\")]=t}__classPrivateFieldGet(this,_TransformTool_transformHud,\"f\").addEventListener(\"pointerdown\",t=>{this.L(t)});__classPrivateFieldGet(this,_TransformTool_transformHud,\"f\").addEventListener(\"dblclick\",t=>{this.He(t)})}get mode(){return this.ri}set mode(t){this.ri=t;this.zs()}get isScaling(){return this.Os}get enabled(){return this.transformHud.hasAttribute(\"enabled\")}set enabled(t){t?this.transformHud.setAttribute(\"enabled\",\"\"):this.transformHud.removeAttribute(\"enabled\")}}_TransformTool_stage=new WeakMap,_TransformTool_transformHud=new WeakMap,_TransformTool_grippies=new WeakMap;exports[\"default\"]=TransformTool;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/transformTool.js?");

/***/ }),

/***/ "./node_modules/foxyjs/tools/viewTool.js":
/*!***********************************************!*\
  !*** ./node_modules/foxyjs/tools/viewTool.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(t,e,i,s,o){if(s===\"m\")throw new TypeError(\"Private method is not writable\");if(s===\"a\"&&!o)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof e===\"function\"?t!==e||!o:!e.has(t))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return s===\"a\"?o.call(t,i):o?o.value=i:e.set(t,i),i};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(t,e,i,s){if(i===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof e===\"function\"?t!==e||!s:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return i===\"m\"?s:i===\"a\"?s.call(t):s?s.value:e.get(t)};var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};var _ViewTool_stage,_ViewTool_hud;Object.defineProperty(exports, \"__esModule\", ({value:true}));const ee_1=__importDefault(__webpack_require__(/*! ../utils/ee */ \"./node_modules/foxyjs/utils/ee.js\"));const common_1=__webpack_require__(/*! ../utils/common */ \"./node_modules/foxyjs/utils/common.js\");const nt_1=__importDefault(__webpack_require__(/*! ../utils/nt */ \"./node_modules/foxyjs/utils/nt.js\"));const{abs:Dd}=Math;const zd=Symbol();const Od=Symbol();const Ed=Symbol();const Td=Symbol();class ViewTool{get enabled(){return true}set enabeld(t){}constructor(t){_ViewTool_stage.set(this,void 0);_ViewTool_hud.set(this,document.querySelector(\"#view-hud\"));this.enabledCallback=()=>{};this.disabledCallback=()=>{};this.moveCallback=(t,e)=>{};this.hs=t=>{let{key:e,value:i}=t[\"detail\"];if(\"bx-viewsettings:showIds\"===e){this[\"ts\"]=this[\"v\"][\"getConfig\"](\"bx-viewsettings:showIds\",!1);this[\"I\"]()}else{\"bx-viewsettings:moveObjects\"===e&&(this[\"ss\"]=this[\"v\"][\"getConfig\"](\"bx-viewsettings:moveObjects\",!1))}};this.A=()=>{this[\"ns\"]||this[\"os\"]||this[\"ls\"]?this[\"cs\"]():this[\"I\"]()};this.O=()=>{this[\"cs\"]()};this.L=t=>{t[\"buttons\"]<=1&&t[\"target\"][\"closest\"](\".grippie\")&&this.U(t)};this.U=r=>{let a;let t;let e=this[\"k\"];let n=r[\"target\"][\"closest\"](\".grippie\");let i=n[\"closest\"](\".subhud\")[zd];let p=new DOMPoint(r[\"clientX\"],r[\"clientY\"]);let l=p;e[\"selectedElements\"]=\"view\"===i[\"localName\"]?[i]:[];window.addEventListener(\"pointermove\",a=s=>{let t=new DOMPoint(s[\"clientX\"],s[\"clientY\"]);let e=s[\"timeStamp\"]-r[\"timeStamp\"];let i=(0,common_1.Kt)(p,t)>3||e>80;let o=!1===(0,common_1.qt)(l,t,null);l=t;if(!0===i&&!0===o){window.removeEventListener(\"pointermove\",a);let t=new ee_1.default(s[\"clientX\"]-r[\"clientX\"],s[\"clientY\"]-r[\"clientY\"]);let e=Dd(t[\"x\"])>Dd(t[\"y\"])?\"horizontal\":\"vertical\";let i=n.getAttribute(\"data-position\");\"center\"===i?this[\"ps\"](r,n,e):\"ref\"===i?this[\"us\"](r,n,e):this[\"xs\"](r,n,e)}});window.addEventListener(\"pointerup\",t=()=>{window.removeEventListener(\"pointermove\",a);window.removeEventListener(\"pointerup\",t)})};this.He=t=>{t[\"target\"][\"closest\"]('.grippie[data-position=\"ref\"]')&&this[\"gs\"]()};this.ps=(t,e,i)=>{};this.xs=(t,e,i)=>{};this.us=(t,e,i)=>{};this.gs=()=>{let t=__classPrivateFieldGet(this,_ViewTool_stage,\"f\").board;let a=__classPrivateFieldGet(this,_ViewTool_stage,\"f\").currentWorkspace;let{geometryPrecision:n}=t;__classPrivateFieldGet(this,_ViewTool_stage,\"f\").undoManager.checkpoint([\"#view\",\"#reference-point\",\"#reset\"],\"#view-tool\");if(a.hasAttribute(\"viewBox\")){let{x:t,y:e,width:i,height:s}=nt_1.default.fromString(a.getAttribute(\"viewBox\"));let o=(0,common_1.te)(t+i/2,n);let r=(0,common_1.te)(e+s/2,n);a.setAttribute(\"refX\",o.toString());a.setAttribute(\"refY\",r.toString())}else{a.removeAttribute(\"refX\");a.removeAttribute(\"refY\")}};this.I=()=>{};this.ds=()=>{};this.cs=(t=null)=>{};__classPrivateFieldSet(this,_ViewTool_stage,t,\"f\");this[\"ts\"]=!1;__classPrivateFieldGet(this,_ViewTool_hud,\"f\").innerHTML=`<style>\n    #view-hud .grippie[data-position=\"center\"] {\n      fill: rgba(0, 0, 0, 0);\n      shape-rendering: crispEdges;\n    }\n    #view-hud .grippie[data-position=\"center\"] {\n      cursor: -webkit-grab;\n    }\n    #view-hud .grippie[data-position=\"center\"]:active {\n      cursor: -webkit-grabbing;\n    }\n\n    #view-hud .grippie[data-position=\"left\"],\n    #view-hud .grippie[data-position=\"right\"],\n    #view-hud .grippie[data-position=\"top\"],\n    #view-hud .grippie[data-position=\"bottom\"] {\n      stroke: red;\n      vector-effect: non-scaling-stroke;\n      stroke-width: 8;\n      opacity: 0;\n    }\n\n    #view-hud .grippie[data-position=\"top-left\"] rect,\n    #view-hud .grippie[data-position=\"top-right\"] rect,\n    #view-hud .grippie[data-position=\"bottom-left\"] rect,\n    #view-hud .grippie[data-position=\"bottom-right\"] rect {\n      fill: transparent;\n    }\n\n    #view-hud .grippie[data-position=\"top-left\"] path,\n    #view-hud .grippie[data-position=\"top-right\"] path,\n    #view-hud .grippie[data-position=\"bottom-left\"] path,\n    #view-hud .grippie[data-position=\"bottom-right\"] path {\n      fill: white;\n      stroke: rgb(88, 88, 88);\n      stroke-width: 1;\n      vector-effect: non-scaling-stroke;\n    }\n    #view-hud .subhud[data-selected] .grippie[data-position=\"top-left\"] path,\n    #view-hud .subhud[data-selected] .grippie[data-position=\"top-right\"] path,\n    #view-hud .subhud[data-selected] .grippie[data-position=\"bottom-left\"] path,\n    #view-hud .subhud[data-selected] .grippie[data-position=\"bottom-right\"] path {\n      fill: rgb(176, 214, 255);\n      stroke: rgb(2, 81, 165);\n    }\n\n    #view-hud .grippie[data-position=\"left\"],\n    #view-hud .grippie[data-position=\"right\"] {\n      cursor: ew-resize;\n    }\n    #view-hud .grippie[data-position=\"top\"],\n    #view-hud .grippie[data-position=\"bottom\"] {\n      cursor: ns-resize;\n    }\n    #view-hud .grippie[data-position=\"top-left\"] {\n      cursor: nwse-resize;\n    }\n    #view-hud .grippie[data-position=\"top-right\"] {\n      cursor: nesw-resize;\n    }\n    #view-hud .grippie[data-position=\"bottom-left\"] {\n      cursor: nesw-resize;\n    }\n    #view-hud .grippie[data-position=\"bottom-right\"] {\n      cursor: nwse-resize;\n    }\n\n    #view-hud .grippie[data-position=\"ref\"] {\n      display: none;\n      cursor: default;\n    }\n    #view-hud .subhud[data-selected] .grippie[data-position=\"ref\"] {\n      display: initial;\n    }\n    #view-hud .grippie[data-position=\"ref\"] path {\n      fill: white;\n      stroke: rgb(88, 88, 88);\n      stroke-width: 1;\n      vector-effect: non-scaling-stroke;\n    }\n    #view-hud .subhud[data-selected] .grippie[data-position=\"ref\"] path {\n      fill: rgb(176, 214, 255);\n      stroke: rgb(2, 81, 165);\n    }\n    #view-hud .grippie[data-position=\"ref\"] rect {\n      fill: transparent;\n    }\n\n    #view-hud .label {\n      pointer-events: none;\n      font-weight: 700;\n      fill: #636363;\n    }\n  </style>\n\n  <defs>\n    <g uid=\"subhud-template\" class=\"subhud\">\n      <rect class=\"grippie\" data-position=\"center\"></rect>\n\n      <line class=\"grippie\" data-position=\"left\"></line>\n      <line class=\"grippie\" data-position=\"right\"></line>\n      <line class=\"grippie\" data-position=\"top\"></line>\n      <line class=\"grippie\" data-position=\"bottom\"></line>\n\n      <g class=\"grippie\" data-position=\"top-left\">\n        <rect width=\"30\" height=\"30\"></rect>\n        <path d=\"M 15 15 h 15 v -5 h -20 v 20 h 5 z\"/>\n      </g>\n\n      <g class=\"grippie\" data-position=\"top-right\">\n        <rect width=\"30\" height=\"30\"></rect>\n        <path d=\"M 0 15 h 15 v 15 h 5 v -20 h -20 z\"/>\n      </g>\n\n      <g class=\"grippie\" data-position=\"bottom-left\">\n        <rect width=\"30\" height=\"30\"></rect>\n        <path d=\"M 15 15 h 15 v 5 h -20 v -20 h 5 z\"/>\n      </g>\n\n      <g class=\"grippie\" data-position=\"bottom-right\">\n        <rect width=\"30\" height=\"30\"></rect>\n        <path d=\"M 15 15 v -15 h 5 v 20 h -20 v -5 z\"/>\n      </g>\n\n      <g class=\"grippie\" data-position=\"ref\">\n        <rect width=\"24\" height=\"24\"></rect>\n        <path d=\"M 24 10 L 24 14 L 14 14 L 14 24 L 10 24 L 10 14 L 0 14 L 0 10 L 10 10 L 10 0 L 14 0 L 14 10 Z\"/>\n      </g>\n\n      <text class=\"label\">Default view</text>\n    </g>\n  </defs>\n\n  <g uid=\"subhuds\"></g>`;__classPrivateFieldGet(this,_ViewTool_hud,\"f\")[\"addEventListener\"](\"pointerdown\",t=>{this.L(t)});__classPrivateFieldGet(this,_ViewTool_hud,\"f\")[\"addEventListener\"](\"dblclick\",t=>{this.He(t)})}}_ViewTool_stage=new WeakMap,_ViewTool_hud=new WeakMap;exports[\"default\"]=ViewTool;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/tools/viewTool.js?");

/***/ }),

/***/ "./node_modules/foxyjs/utils/Ba.js":
/*!*****************************************!*\
  !*** ./node_modules/foxyjs/utils/Ba.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(t,e,s,i){if(s===\"a\"&&!i)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof e===\"function\"?t!==e||!i:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return s===\"m\"?i:s===\"a\"?i.call(t):i?i.value:e.get(t)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(t,e,s,i,a){if(i===\"m\")throw new TypeError(\"Private method is not writable\");if(i===\"a\"&&!a)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof e===\"function\"?t!==e||!a:!e.has(t))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return i===\"a\"?a.call(t,s):a?a.value=s:e.set(t,s),s};var _Ba__e,_Ba_Fe,_Ba_Ge,_Ba_Ne,_Ba_je;Object.defineProperty(exports, \"__esModule\", ({value:true}));const common_1=__webpack_require__(/*! ./common */ \"./node_modules/foxyjs/utils/common.js\");class Ba{constructor(...e){_Ba__e.set(this,!1);_Ba_Fe.set(this,!1);_Ba_Ge.set(this,!1);_Ba_Ne.set(this,!1);_Ba_je.set(this,null);for(let t of e)\"Control\"===t?this[\"ctrl\"]=!0:\"Alt\"===t?this[\"alt\"]=!0:\"Shift\"===t?this[\"shift\"]=!0:\"Meta\"===t?this[\"meta\"]=!0:this[\"key\"]=t}static[(_Ba__e=new WeakMap,_Ba_Fe=new WeakMap,_Ba_Ge=new WeakMap,_Ba_Ne=new WeakMap,_Ba_je=new WeakMap,\"fromEvent\")](e){let s=new Ba;s[\"ctrl\"]=common_1.As?e[\"metaKey\"]:e[\"ctrlKey\"];s[\"alt\"]=e[\"altKey\"];s[\"shift\"]=e[\"shiftKey\"];s[\"meta\"]=common_1.As?e[\"ctrlKey\"]:e[\"metaKey\"];s[\"key\"]=null;if(e instanceof KeyboardEvent){let t=e[\"key\"];\" \"===t&&(t=\"Space\");t&&\"Control\"!==t&&\"Alt\"!==t&&\"Shift\"!==t&&\"Meta\"!==t&&(1===t[\"length\"]?s[\"key\"]=t[\"toUpperCase\"]():s[\"key\"]=t)}return s}static[\"fromElement\"](t){let e=new Ba;e[\"ctrl\"]=t[\"modKeys\"][\"includes\"](\"Control\");e[\"alt\"]=t[\"modKeys\"][\"includes\"](\"Alt\");e[\"shift\"]=t[\"modKeys\"][\"includes\"](\"Shift\");e[\"meta\"]=t[\"modKeys\"][\"includes\"](\"Meta\");e[\"key\"]=t[\"normalKey\"];return e}static[\"fromString\"](t){return new Ba(...t[\"split\"](\"+\")[\"filter\"](t=>\"\"!==t))}get[\"ctrl\"](){return __classPrivateFieldGet(this,_Ba__e,\"f\")}set[\"ctrl\"](t){__classPrivateFieldSet(this,_Ba__e,t,\"f\")}get[\"alt\"](){return __classPrivateFieldGet(this,_Ba_Fe,\"f\")}set[\"alt\"](t){__classPrivateFieldSet(this,_Ba_Fe,t,\"f\")}get[\"shift\"](){return __classPrivateFieldGet(this,_Ba_Ge,\"f\")}set[\"shift\"](t){__classPrivateFieldSet(this,_Ba_Ge,t,\"f\")}get[\"meta\"](){return __classPrivateFieldGet(this,_Ba_Ne,\"f\")}set[\"meta\"](t){__classPrivateFieldSet(this,_Ba_Ne,t,\"f\")}get[\"key\"](){return __classPrivateFieldGet(this,_Ba_je,\"f\")}set[\"key\"](t){__classPrivateFieldSet(this,_Ba_je,t,\"f\")}[\"matches\"](...e){let s=!1;let i=!1;let a=!1;let r=!1;let l=null;for(let t of e)\"Control\"===t?s=!0:\"Alt\"===t?i=!0:\"Shift\"===t?a=!0:\"Meta\"===t?r=!0:l=t;return s===this[\"ctrl\"]&&i===this[\"alt\"]&&r===this[\"meta\"]&&a===this[\"shift\"]&&l===this[\"key\"]}[\"includes\"](t){return\"Control\"===t?this[\"ctrl\"]:\"Alt\"===t?this[\"alt\"]:\"Shift\"===t?this[\"shift\"]:\"Meta\"===t?this[\"meta\"]:this[\"key\"]===t}[\"compare\"](t){return this[\"ctrl\"]===t[\"ctrl\"]&&this[\"alt\"]===t[\"alt\"]&&this[\"shift\"]===t[\"shift\"]&&this[\"meta\"]===t[\"meta\"]&&this[\"key\"]===t[\"key\"]}[\"isVoid\"](){return!1===this[\"ctrl\"]&&!1===this[\"alt\"]&&!1===this[\"shift\"]&&!1===this[\"meta\"]&&null===this[\"key\"]}[\"toDisplayString\"](){let s=\"\";if(common_1.As){this[\"meta\"]&&(s+=\"^\");this[\"alt\"]&&(s+=\"⌥\");this[\"shift\"]&&(s+=\"⇧\");this[\"ctrl\"]&&(s+=\"⌘\");let t={ArrowUp:\"↑\",ArrowDown:\"↓\",ArrowLeft:\"←\",ArrowRight:\"→\",Backspace:\"⌦\",Tab:\"⇥\"};null!==this[\"key\"]&&(s+=t[this[\"key\"]]||this[\"key\"])}else{let t=[];this[\"ctrl\"]&&t[\"push\"](\"Ctrl\");this[\"alt\"]&&t[\"push\"](\"Alt\");this[\"shift\"]&&t[\"push\"](\"Shift\");this[\"meta\"]&&t[\"push\"](\"Meta\");let e={ArrowUp:\"Up\",ArrowDown:\"Down\",ArrowLeft:\"Left\",ArrowRight:\"Right\"};null!==this[\"key\"]&&t[\"push\"](e[this[\"key\"]]||this[\"key\"]);s=t[\"join\"](\"+\")}return s}[\"toJSON\"](){return this[\"toString\"]()}[\"toElement\"](){let t=(0,common_1.Zi)(\"x-shortcut\");let e=[];this[\"ctrl\"]&&e[\"push\"](\"Control\");this[\"alt\"]&&e[\"push\"](\"Alt\");this[\"shift\"]&&e[\"push\"](\"Shift\");this[\"meta\"]&&e[\"push\"](\"Meta\");null!==this[\"key\"]&&e[\"push\"](\"key\");t[\"value\"]=e;return t}[\"toString\"](){let t=[];this[\"ctrl\"]&&t[\"push\"](\"Control\");this[\"alt\"]&&t[\"push\"](\"Alt\");this[\"shift\"]&&t[\"push\"](\"Shift\");this[\"meta\"]&&t[\"push\"](\"Meta\");null!==this[\"key\"]&&t[\"push\"](this[\"key\"]);return t[\"join\"](\"+\")}}exports[\"default\"]=Ba;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/utils/Ba.js?");

/***/ }),

/***/ "./node_modules/foxyjs/utils/common.js":
/*!*********************************************!*\
  !*** ./node_modules/foxyjs/utils/common.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __awaiter=this&&this.__awaiter||function(e,o,l,n){function i(t){return t instanceof l?t:new l(function(e){e(t)})}return new(l||(l=Promise))(function(t,l){function s(e){try{a(n.next(e))}catch(e){l(e)}}function r(e){try{a(n[\"throw\"](e))}catch(e){l(e)}}function a(e){e.done?t(e.value):i(e.value).then(s,r)}a((n=n.apply(e,o||[])).next())})};var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports, \"__esModule\", ({value:true}));exports.Ae=exports.Ne=exports.os=exports.ns=exports.fs=exports.ks=exports.Ig=exports.Zi=exports.Oo=exports.fo=exports.to=exports.Xi=exports.fi=exports.Qi=exports.Yi=exports.pt=exports.lt=exports.ut=exports.Xt=exports.qt=exports.Et=exports.Qt=exports.Kt=exports.kt=exports.Jt=exports.Pt=exports.Mt=exports.Ct=exports.St=exports.ct=exports.We=exports.Ze=exports.Xe=exports.Wi=exports.vi=exports.ni=exports.ii=exports.ai=exports.di=exports.hi=exports.xi=exports.pi=exports.ci=exports.ie=exports.te=exports.ja=exports.kc=exports.b=exports.g=exports.sleep=void 0;exports.x=exports.w=exports.R=exports.L=exports.m=exports.P=exports.M=exports.As=exports.vc=exports.S=exports.pd=exports.ds=exports.cs=exports.as=exports.Md=exports.On=exports.Dc=exports.Rl=exports.ql=exports.Pc=exports.gn=exports.Xl=exports.Xd=exports.Ye=exports.Qd=exports.Pi=exports.Ni=exports._i=exports.Qe=exports.Je=exports.qe=exports.ke=exports.He=exports.Ve=exports.yi=exports.ji=exports.Ri=exports.Ii=exports.Gi=exports.Bi=exports.il=exports.$i=exports.Ti=exports.ti=exports.Ke=exports.Te=exports.me=exports.Ie=exports.Re=exports.$e=void 0;exports.fc=void 0;const ee_1=__importDefault(__webpack_require__(/*! ./ee */ \"./node_modules/foxyjs/utils/ee.js\"));const{sin:It,cos:Bt,acos:Ut,atan2:_t,abs:Ft,sqrt:Gt,pow:Nt,PI:jt,min:Vt,max:Ht}=Math;const As=[\"iPhone\",\"iPad\"][\"includes\"](navigator[\"platform\"])||navigator[\"platform\"][\"startsWith\"](\"Mac\");exports.As=As;const vc=[[-3,-3],[-2,-3],[-1,-3],[0,-3],[1,-3],[2,-3],[3,-3],[-3,-2],[-2,-2],[-1,-2],[0,-2],[1,-2],[2,-2],[3,-2],[-3,-1],[-2,-1],[-1,-1],[0,-1],[1,-1],[2,-1],[3,-1],[-3,0],[-2,0],[-1,0],[0,0],[1,0],[2,0],[3,0],[-3,1],[-2,1],[-1,1],[0,1],[1,1],[2,1],[3,1],[-3,2],[-2,2],[-1,2],[0,2],[1,2],[2,2],[3,2],[-3,3],[-2,3],[-1,3],[0,3],[1,3],[2,3],[3,3]];exports.vc=vc;const fc={colors:\"unpinned\",gradients:\"unpinned\",patterns:\"unpinned\",markers:\"unpinned\",symbols:\"none\",filters:\"unpinned\",fonts:\"unpinned\",clipPaths:\"unpinned\",masks:\"unpinned\"};exports.fc=fc;const Jn={rect:1,frame:1,ring:1,pie:1,crescent:1,triangle:1,\"n-gon\":1,star:1,cog:1,arrow:1,cross:1,spiral:1};const b=[\"circle\",\"ellipse\",\"line\",\"path\",\"polygon\",\"polyline\",\"rect\",\"text\",\"textPath\",\"tspan\",\"image\",\"svg\",\"g\",\"a\",\"use\"];exports.b=b;const u={bx:\"https://foxy-svg.com\",html:\"http://www.w3.org/1999/xhtml\",svg:\"http://www.w3.org/2000/svg\",xlink:\"http://www.w3.org/1999/xlink\",xmlns:\"http://www.w3.org/2000/xmlns/\"};const _a=[\"fill\",\"fill-opacity\",\"fill-rule\",\"stroke\",\"stroke-dasharray\",\"stroke-dashoffset\",\"stroke-linecap\",\"stroke-linejoin\",\"stroke-miterlimit\",\"stroke-opacity\",\"stroke-width\",\"paint-order\",\"vector-effect\"];const g=[\"circle\",\"ellipse\",\"line\",\"path\",\"polygon\",\"polyline\",\"rect\",\"text\",\"textPath\",\"tspan\",\"image\"];exports.g=g;const M=[...g,\"a\",\"g\"];exports.M=M;const P=[...g,\"a\",\"g\",\"use\"];exports.P=P;const Fa=[\"opacity\",\"mix-blend-mode\",\"isolation\"];const Ua=[\"text\",\"textPath\",\"tspan\"];const Ga=[\"font-family\",\"font-size\",\"font-stretch\",\"font-style\",\"font-variant\",\"font-weight\",\"letter-spacing\",\"word-spacing\",\"text-decoration\",\"text-transform\"];const xs=document.createElement(\"template\");const Yt=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");const x=[\"circle\",\"ellipse\",\"line\",\"path\",\"polygon\",\"polyline\",\"rect\"];exports.x=x;const m=[\"text\",\"textPath\",\"tspan\"];exports.m=m;const w=[...x,...m];exports.w=w;const S=[\"circle\",\"ellipse\",\"line\",\"path\",\"polygon\",\"polyline\",\"rect\",\"text\",\"textPath\",\"tspan\",\"image\",\"clipPath\",\"a\",\"g\",\"use\"];exports.S=S;const L=[\"rect\",\"circle\",\"ellipse\",\"line\",\"path\",\"polygon\",\"polyline\",\"image\",\"text\",\"tspan\",\"use\",\"svg\",\"a\",\"g\"];exports.L=L;const R=[\"path\",\"line\",\"polyline\",\"polygon\"];exports.R=R;const U=[\"fill\",\"stroke\",\"filter\",\"clip-path\",\"mask\",\"marker-mid\",\"marker-start\",\"marker-end\"];const v=[\"solidcolor\",\"linearGradient\",\"radialGradient\",\"pattern\"];const y=[\"desc\",\"bx-title\"];const k=[\"svg\",\"g\",\"defs\",\"symbol\",\"use\"];const D=[\"feBlend\",\"feColorMatrix\",\"feComponentTransfer\",\"feComposite\",\"feConvolveMatrix\",\"feDiffuseLighting\",\"feDisplacementMap\",\"feDropShadow\",\"feFlood\",\"feGaussianBlur\",\"feImage\",\"feMerge\",\"feMorphology\",\"feOffset\",\"feSpecularLighting\",\"feTile\",\"feTurbulence\"];const z=[\"feFuncA\",\"feFuncB\",\"feFuncG\",\"feFuncR\"];const O=[\"feDistantLight\",\"fePointLight\",\"feSpotLight\"];const E=[\"animate\",\"animateMotion\",\"animateTransform\",\"set\"];const T=[\"animate\",\"set\"];const A=[\"animate\",\"animateTransform\",\"set\"];const $=[\"animate\",\"set\"];const I=[...g,...v,...y,...k,...D,...z,...O,...E,\"a\",\"marker\",\"mask\",\"feMergeNode\",\"filter\",\"clipPath\",\"stop\",\"script\",\"style\",\"view\"];const N={a:[...E,...y,...v,...x,...k,\"a\",\"clipPath\",\"filter\",\"image\",\"marker\",\"mask\",\"script\",\"style\",\"text\",\"view\",\"#text\"],animate:[...y,\"script\"],animateMotion:[...y,\"script\",\"mpath\"],animateTransform:[...y,\"script\"],\"bx-title\":[\"#text\"],circle:[...E,...y,...v,\"clipPath\",\"marker\",\"mask\",\"script\",\"style\"],clipPath:[...E,...y,...x,\"text\",\"use\",\"script\",\"style\"],defs:[...E,...y,...v,...x,...k,\"a\",\"clipPath\",\"filter\",\"image\",\"marker\",\"mask\",\"script\",\"style\",\"text\",\"view\",\"bx-grid\",\"bx-guide\"],desc:[\"#text\"],ellipse:[...E,...y,...v,\"clipPath\",\"marker\",\"mask\",\"script\",\"style\"],feBlend:[...y,...T,\"script\",\"style\"],feColorMatrix:[...y,...T,\"script\",\"style\"],feComponentTransfer:[...y,...z,\"script\",\"style\"],feComposite:[...y,...T,\"script\",\"style\"],feConvolveMatrix:[...y,...T,\"script\",\"style\"],feDiffuseLighting:[...y,...O,\"script\",\"style\"],feDisplacementMap:[...y,...T,\"script\",\"style\"],feDistantLight:[...y,...T,\"script\",\"style\"],feDropShadow:[...y,...T,\"script\",\"style\"],feFlood:[...y,...T,\"script\",\"style\"],feFuncR:[...y,...T,\"script\",\"style\"],feFuncG:[...y,...T,\"script\",\"style\"],feFuncB:[...y,...T,\"script\",\"style\"],feFuncA:[...y,...T,\"script\",\"style\"],feGaussianBlur:[...y,...T,\"script\",\"style\"],feImage:[...y,...T,\"script\",\"style\"],feMerge:[...y,\"feMergeNode\",\"script\",\"style\"],feMergeNode:[...y,...T,\"script\",\"style\"],feMorphology:[...y,...T,\"script\",\"style\"],feOffset:[...y,...T,\"script\",\"style\"],fePointLight:[...y,...T,\"script\",\"style\"],feSpecularLighting:[...y,\"feDistantLight\",\"fePointLight\",\"feSpotLight\",\"script\",\"style\"],feSpotLight:[...y,...T,\"script\",\"style\"],feTile:[...y,...T,\"script\",\"style\"],feTurbulence:[...y,...T,\"script\",\"style\"],filter:[...y,...D,...T,\"script\",\"style\"],g:[...E,...y,...v,...x,...k,\"a\",\"clipPath\",\"filter\",\"image\",\"marker\",\"mask\",\"script\",\"style\",\"text\",\"view\"],image:[...E,...y,\"clipPath\",\"mask\",\"script\",\"style\"],line:[...E,...y,...v,\"clipPath\",\"marker\",\"mask\",\"script\",\"style\"],linearGradient:[...y,...A,\"script\",\"stop\",\"style\"],marker:[...E,...y,...v,...x,...k,\"a\",\"clipPath\",\"filter\",\"image\",\"marker\",\"mask\",\"script\",\"style\",\"text\",\"view\"],mask:[...E,...y,...x,...k,...v,\"a\",\"clipPath\",\"filter\",\"image\",\"marker\",\"mask\",\"script\",\"style\",\"text\",\"view\",\"text\"],mpath:[...y,\"script\"],path:[...E,...y,...v,\"clipPath\",\"marker\",\"mask\",\"script\",\"style\"],pattern:[...E,...y,...v,...x,...k,\"a\",\"clipPath\",\"filter\",\"image\",\"marker\",\"mask\",\"script\",\"style\",\"text\",\"view\"],polygon:[...E,...y,...v,\"clipPath\",\"marker\",\"mask\",\"script\",\"style\"],polyline:[...E,...y,...v,\"clipPath\",\"marker\",\"mask\",\"script\",\"style\"],radialGradient:[...y,...A,\"script\",\"stop\",\"style\"],rect:[...E,...y,...v,\"clipPath\",\"marker\",\"mask\",\"script\",\"style\"],script:[\"#text\"],set:[...y,\"script\"],solidcolor:[...y,\"script\",\"style\"],stop:[...y,\"animate\",\"set\",\"script\",\"style\"],style:[\"#text\"],svg:[...E,...y,...v,...x,...k,\"a\",\"clipPath\",\"filter\",\"image\",\"marker\",\"mask\",\"script\",\"style\",\"text\",\"view\"],symbol:[...E,...y,...v,...x,...k,\"a\",\"clipPath\",\"filter\",\"image\",\"marker\",\"mask\",\"script\",\"style\",\"text\",\"view\"],text:[...E,...y,...v,\"a\",\"clipPath\",\"marker\",\"mask\",\"script\",\"style\",\"tspan\",\"textPath\",\"#text\"],textPath:[...y,...v,...$,\"a\",\"clipPath\",\"marker\",\"mask\",\"script\",\"style\",\"tspan\",\"#text\"],tspan:[...y,...v,...$,\"a\",\"script\",\"style\",\"tspan\",\"#text\"],use:[...E,...y,...v,\"clipPath\",\"mask\",\"script\",\"style\"],view:[...E,...y,\"script\",\"style\"]};const sleep=t=>new Promise(e=>{setTimeout(()=>e(),t)});exports.sleep=sleep;const H=s=>{let r=null;if(S[\"includes\"](s[\"localName\"])){let l=getComputedStyle(s)[\"clipPath\"];if(l){let e=l[\"substring\"](6,l[\"length\"]-2),t=Ki(s)[\"querySelector\"](\"#\"+CSS[\"escape\"](e))||null;\"clipPath\"===(t===null||t===void 0?void 0:t[\"localName\"])&&(r=t)}}return r};const fs=(t,...l)=>{let s=[];for(let e=0;e<t.length;e+=1){s.push(t[e]);void 0!==l[e]&&s.push(l[e])}let e='<svg id=\"x-stub\" xmlns=\"http://www.w3.org/2000/svg\">'+s[\"join\"](\"\")+\"</svg>\";xs.innerHTML=e;let r=document.importNode(xs.content,!0);let a=r.querySelector(\"svg#x-stub\");if(1===a.children.length)return a.firstElementChild;for(let e of[...a.childNodes])r.appendChild(e);a.remove();return r};exports.fs=fs;function ks(e,t=500){}exports.ks=ks;const us=(t,l=\"element-\")=>{let s=document;for(let e=t.parentNode;e;e=e.parentNode)if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE||e.nodeType===Node.DOCUMENT_NODE){s=e;break}for(let t=0;t<Infinity;t+=1){let e=l+t;if(!s.querySelector(\"#\"+e))return e}};const ns=(e,t)=>{for(;e=e.parentNode;)if(e.contains&&e.contains(t))return e;return null};exports.ns=ns;const os=t=>{let l=[];for(let e of t)l.push(e);l.sort((e,t)=>3-(6&e.compareDocumentPosition(t)));return l};exports.os=os;const ja=(a,e)=>{let t=getComputedStyle(a);let l=Na(a);!1===a.isConnected&&console[\"warn\"](\"setAppearance() called with a disconnected element.\");for(let r of l){let s=e[r];if(void 0===s){a.style[r]=null;a.removeAttribute(r)}else{if(\"fill\"===r||\"stroke\"===r){if(s.startsWith(\"<linearGradient\")||s.startsWith(\"<radialGradient\")){let e=Ki(a);let t=e[\"querySelector\"](\"defs\");let l=fs`${s}`;l[\"id\"]=us(e,\"gradient-\");(t||e)[\"append\"](l);a[\"style\"][r]=\"url(#\"+l[\"id\"]+\")\"}else t[r]!==s&&(a[\"style\"][r]=s)}else t[r]!==s&&(a[\"style\"][r]=s)}}};exports.ja=ja;const Na=e=>{let t=[];w.includes(e.localName)&&t.push(..._a);g.includes(e.localName)&&t.push(...Fa);Ua.includes(e.localName)&&t.push(...Ga);return t};const Pi=e=>e[\"replace\"](/([A-Z])/g,e=>\"-\"+e[\"toLowerCase\"]());exports.Pi=Pi;const hi=(e,t)=>new DOMRect(te(e[\"x\"],t),te(e[\"y\"],t),te(e[\"width\"],t),te(e[\"height\"],t));exports.hi=hi;const di=(e,t)=>{const l=[new DOMPoint(e[\"x\"],e[\"y\"]),new DOMPoint(e[\"x\"]+e[\"width\"],e[\"y\"]),new DOMPoint(e[\"x\"]+e[\"width\"],e[\"y\"]+e[\"height\"]),new DOMPoint(e[\"x\"],e[\"y\"]+e[\"height\"])].map(e=>e.matrixTransform(t));const s=l.map(e=>e[\"x\"]);const r=l.map(e=>e[\"y\"]);const a=Vt(...s);const o=Vt(...r);const n=Ht(...s);const i=Ht(...r);return new DOMRect(a,o,n-a,i-o)};exports.di=di;const ni=(e,t,l)=>{let s=new ee_1.default(e,t);let r=new ee_1.default(e,l);let a=_t(r[\"y\"],r[\"x\"])-_t(s[\"y\"],s[\"x\"]);return oi(li(a))};exports.ni=ni;const oi=e=>{for(;e<-180;)e+=360;for(;e>180;)e-=360;return e};const ai=(e,t=15)=>{let l=oi(e);let s=[];for(let e=-180;e<=180;e+=t)s.push(e);return s.reduce((e,t)=>Ft(t-l)<Ft(e-l)?t:e)};exports.ai=ai;const ii=(e,t,l=22.5)=>{let s=new DOMPoint(e[\"x\"],e[\"y\"]-1e3);let r=ni(e,s,t);let a=[];for(let e=-180;e<=180;e+=l)a.push(e);let o=Infinity;for(let t of a){let e=t-r;Ft(e)<Ft(o)&&(o=e)}r+=o;let n=ri(r-90);let i=Kt(e,t);let u=new ee_1.default(Bt(n),It(n));return u.length=i,[new DOMPoint(e[\"x\"]+u[\"x\"],e[\"y\"]+u[\"y\"]),r]};exports.ii=ii;const li=e=>e*(180/jt);const ri=e=>jt*e/180;const ci=r=>{if(0===r.length)return new DOMRect(0,0,0,0);if(1===r.length){let e=r[0];return new DOMRect(e[\"x\"],e[\"y\"],e[\"width\"],e[\"height\"])}{let e=Math[\"min\"](...r[\"map\"](e=>e[\"x\"]));let t=Math[\"min\"](...r[\"map\"](e=>e[\"y\"]));let l=Math[\"max\"](...r[\"map\"](e=>e[\"x\"]+e[\"width\"]));let s=Math[\"max\"](...r[\"map\"](e=>e[\"y\"]+e[\"height\"]));return new DOMRect(e,t,l-e,s-t)}};exports.ci=ci;const pi=(e,t)=>t[\"x\"]>=e[\"x\"]&&t[\"y\"]>=e[\"y\"]&&t[\"x\"]+t[\"width\"]<=e[\"x\"]+e[\"width\"]&&t[\"y\"]+t[\"height\"]<=e[\"y\"]+e[\"height\"];exports.pi=pi;const xi=(e,t)=>e[\"left\"]<=t[\"right\"]&&t[\"left\"]<=e[\"right\"]&&e[\"top\"]<=t[\"bottom\"]&&t[\"top\"]<=e[\"bottom\"];exports.xi=xi;const Ki=t=>{let l=\"svg\"===t.localName?t:null;for(let e=t.ownerSVGElement;e;e=e.ownerSVGElement)l=e;return l};const Qi=t=>{for(let e in t.parentElement.children){if(t.parentElement.children[e]===t)return parseInt(e)}};exports.Qi=Qi;const Bi=t=>{let l=Ri(t);let s=0;let r=0;for(let e=l[0][\"parentElement\"];t[\"contains\"](e);e=e[\"parentElement\"])if((\"tspan\"===e.localName||\"text\"===e.localName)&&e[\"x\"].baseVal[\"length\"]>0){s=e[\"x\"].baseVal[0].value;break}for(let e=l[0][\"parentElement\"];t[\"contains\"](e);e=e[\"parentElement\"])if((\"tspan\"===e.localName||\"text\"===e.localName)&&e[\"y\"].baseVal.length>0){r=e[\"y\"].baseVal[0].value;break}return new DOMPoint(s,r)};exports.Bi=Bi;const Ui=e=>{let t=getComputedStyle(e);let l={};let s={};return[l,s]};const Gi=e=>{let l=0;for(let t of e.querySelectorAll(\"tspan\"))if(_i(t)&&t[\"dy\"].baseVal.length>0&&t[\"dy\"].baseVal[0].unitType===SVGLength.SVG_LENGTHTYPE_EMS){let e=t[\"dy\"].baseVal[0].valueInSpecifiedUnits;l=te(e-1,2);break}return l};exports.Gi=Gi;const _i=e=>\"tspan\"===e.localName&&\"​\"===e.textContent;exports._i=_i;const ji=(e,l)=>{let s=null;let r=null;let a=0;let o=0;for(let t of Ri(e)){for(let e=0;e<=t.textContent.length;e+=1,o+=1){if(o===l){if(0===e&&s){r=s;a=s.textContent.length}else{r=t;a=e}}}o-=1;s=t}return[r,a]};exports.ji=ji;const Ii=e=>{let t=Ri(e);let r=[];for(let s of t){let e=s[\"closest\"](\"*\");let t=getComputedStyle(e).textTransform;let l=s.textContent;\"uppercase\"===t?l=l.toUpperCase():\"lowercase\"===t?l=l[\"toLowerCase\"]():\"capitalize\"===t&&(l=Si(l));r[\"push\"](...l[\"split\"](\"\"))}return r};exports.Ii=Ii;const Ni=(t,l)=>{let s=t[\"closest\"](\"text\");let r=0;let a=-1;for(let e of Ri(s)){if(e===t){a=r+l;break}r+=e[\"length\"]}return[s,a]};exports.Ni=Ni;const Ti=(r,a=null)=>{let t=Li(r);let e=a&&r[\"contains\"](a.commonAncestorContainer);let o=e?Ni(a.startContainer,a.startOffset)[1]:-1;let n=e?Ni(a.endContainer,a.endOffset)[1]:-1;if(e&&o!==n){let a=[];for(let r of t[\"childItems\"]){let t=null;if(o>=r[\"startOffset\"]&&n<=r[\"endOffset\"]?t=[r[\"textContent\"][\"slice\"](0,o-r[\"startOffset\"]),r[\"textContent\"][\"slice\"](o-r[\"startOffset\"],n-r[\"startOffset\"]),r[\"textContent\"][\"slice\"](n-r[\"startOffset\"])]:o>=r[\"startOffset\"]&&o<r[\"endOffset\"]?t=[r[\"textContent\"][\"slice\"](0,o-r[\"startOffset\"]),r[\"textContent\"][\"slice\"](o-r[\"startOffset\"])]:n>r[\"startOffset\"]&&n<=r[\"endOffset\"]&&(t=[r[\"textContent\"][\"slice\"](0,n-r[\"startOffset\"]),r[\"textContent\"][\"slice\"](n-r[\"startOffset\"])]),null===t)a[\"push\"](r);else{let e=r[\"startOffset\"];let s=0;for(let l of t)if(l.length>0){let t={textContent:l,href:r[\"href\"],inheritableProperties:r.inheritableProperties,nonInheritableProperties:r.nonInheritableProperties,startOffset:e,endOffset:e+l.length,x:[],y:[],dx:[],dy:[],rotate:[]};for(let e=0;e<l.length;e+=1){t[\"x\"].push(r[\"x\"][s]);t[\"y\"].push(r[\"y\"][s]);t[\"dx\"].push(r[\"dx\"][s]);t[\"dy\"].push(r[\"dy\"][s]);t[\"rotate\"].push(r[\"rotate\"][s]);s+=1}a.push(t);e+=l.length}}}t.childItems=a}r.removeAttribute(\"x\");r.removeAttribute(\"y\");r.removeAttribute(\"dx\");r.removeAttribute(\"dy\");r.removeAttribute(\"rotate\");r.setAttribute(\"style\",\"\");let l=getComputedStyle(r);for(let e of Object.keys(t.rootItem.inheritableProperties))l.getPropertyValue(e)!==t.rootItem.inheritableProperties[e]&&r[\"style\"].setProperty(e,t.rootItem[\"inheritableProperties\"][e]);for(let e of Object.keys(t.rootItem.nonInheritableProperties))l.getPropertyValue(e)!==t.rootItem.nonInheritableProperties[e]&&r[\"style\"].setProperty(e,t.rootItem[\"nonInheritableProperties\"][e]);let i=r[\"querySelector\"](\"textPath\")||r;for(let e of[...i[\"childNodes\"]])\"tspan\"!==e[\"nodeName\"]&&\"a\"!==e[\"nodeName\"]&&\"#text\"!==e[\"nodeName\"]||e[\"remove\"]();if(t[\"childItems\"][\"length\"]>0)for(let s of t[\"childItems\"]){let l=Zi(\"svg:tspan\");i[\"append\"](l);if(s[\"href\"]){let e=Zi(\"svg:a\");e[\"setAttribute\"](\"_href\",s[\"href\"]);e.textContent=s.textContent;l[\"append\"](e)}else l.textContent=s.textContent;{let t=getComputedStyle(l);for(let e of Object.keys(s[\"inheritableProperties\"]))t[\"getPropertyValue\"](e)!==s[\"inheritableProperties\"][e]&&l[\"style\"].setProperty(e,s[\"inheritableProperties\"][e]);for(let e of Object.keys(s[\"nonInheritableProperties\"]))t[\"getPropertyValue\"](e)!==s[\"nonInheritableProperties\"][e]&&l[\"style\"].setProperty(e,s[\"nonInheritableProperties\"][e])}{let e=s[\"x\"][\"filter\"](e=>\"auto\"!==e);e[\"length\"]>0&&l.setAttribute(\"x\",e[\"join\"](\" \"))}{let e=s[\"y\"][\"filter\"](e=>\"auto\"!==e);e[\"length\"]>0&&l.setAttribute(\"y\",e[\"join\"](\" \"))}{let t=[...s[\"dx\"]];for(let e=t.length-1;e>=0&&\"0\"===t[e];e-=1)t[\"pop\"]();t.length>0&&l.setAttribute(\"dx\",t[\"join\"](\" \"))}{let t=[...s[\"dy\"]];for(let e=t.length-1;e>=0&&\"0\"===t[e];e-=1)t[\"pop\"]();t.length>0&&l.setAttribute(\"dy\",t[\"join\"](\" \"))}{let t=[...s[\"rotate\"]];for(let e=t.length-1;e>=0&&t[e]===t[e-1];e-=1)t[\"pop\"]();1===t.length&&\"0\"===t[0]&&(t=[]);t.length>0&&l.setAttribute(\"rotate\",t[\"join\"](\" \"))}}if(e){let l=0;let s=null;for(let t of Ri(r)){for(let e=0;e<=t.textContent.length;e+=1,l+=1){l===o&&a.setStart(t,e);l===n&&(0===e&&s?a.setEnd(s,s[\"textContent\"][\"length\"]):a.setEnd(t,e))}l-=1;s=t}}};exports.Ti=Ti;const $i=(l,e=null)=>{null===e&&(e=l.commonAncestorContainer.closest(\"text\"));let t=(e.querySelector(\"textPath\")||e).querySelectorAll(\"tspan\");let s=[];if(t.length>0){if(l){for(let e of t)l.intersectsNode(e)&&s.push(e)}if(s.length>0){let t=\"backward\"===l.direction?s[s.length-1]:s[0];let e=s.filter(e=>e!==t);s=[t,...e]}}return s};exports.$i=$i;const Li=p=>{let a={rootItem:null,childItems:[]};{let[e,t]=Ui(p);const l={inheritableProperties:e,nonInheritableProperties:t};a.rootItem=l}{let e=0;for(let u of Ri(p)){let s={textContent:u[\"textContent\"],href:null,inheritableProperties:{},nonInheritableProperties:{},isLineBreak:!1,x:[],y:[],dx:[],dy:[],rotate:[],startOffset:e,endOffset:e+u.length};if(e+=u.length,\"​\"===u.textContent&&(s.isLineBreak=!0),!1===s.isLineBreak){for(let e=u.parentNode;e!==p;e=e.parentNode)if(\"a\"===e.localName&&e.hasAttribute(\"_href\")){s.href=e.getAttribute(\"_href\");break}}if(!1===s.isLineBreak){let e=u.closest(\"tspan, text\");let[t,l]=Ui(e);s.inheritableProperties=t;e!==p&&(s.nonInheritableProperties=l)}{let r=[];let a=[];let o=[];let n=[];let i=[];for(let s=u.parentNode;p.contains(s);s=s.parentNode)if(\"tspan\"===s.localName||\"text\"===s.localName){let l=0;for(let e of Ri(s)){if(e===u)break;l+=e.length}for(let e=l,t=0;s.x.baseVal.length,t<u.length;e+=1,t+=1)void 0===r[t]&&void 0!==s.x.baseVal[e]&&(r[t]=s.x.baseVal[e].valueAsString);for(let e=l,t=0;s.y.baseVal.length,t<u.length;e+=1,t+=1)void 0===a[t]&&void 0!==s.y.baseVal[e]&&(a[t]=s.y.baseVal[e].valueAsString);for(let e=l,t=0;s.dx.baseVal.length,t<u.length;e+=1,t+=1)void 0===o[t]&&void 0!==s.dx.baseVal[e]&&(o[t]=s.dx.baseVal[e].valueAsString);for(let e=l,t=0;s.dy.baseVal.length,t<u.length;e+=1,t+=1)void 0===n[t]&&void 0!==s.dy.baseVal[e]&&(n[t]=s.dy.baseVal[e].valueAsString);for(let e=l,t=0;s.rotate.baseVal.length,t<u.length;e+=1,t+=1)void 0===i[t]&&void 0!==s.rotate.baseVal[e]&&(i[t]=\"\"+s.rotate.baseVal[e].value)}let t=\"0\";for(let e=0;e<u.length;e+=1){void 0===r[e]&&(r[e]=\"auto\");void 0===a[e]&&(a[e]=\"auto\");void 0===o[e]&&(o[e]=\"0\");void 0===n[e]&&(n[e]=\"0\");void 0===i[e]&&(i[e]=t);t=i[e]}s.x=r;s.y=a;s.dx=o;s.dy=n;s.rotate=i}a.childItems.push(s)}}for(let t of a.childItems)for(let e of Object.keys(t.inheritableProperties))a.rootItem.inheritableProperties[e]===t.inheritableProperties[e]&&delete t.inheritableProperties[e];{let e=a.childItems.filter(e=>!e.isLineBreak);if(e.length>0){let[s,...r]=e;for(let l of Object.keys(s.inheritableProperties)){let t=!0;for(let e of r)e.inheritableProperties[l]!==s.inheritableProperties[l]&&(t=!1);if(t){a.rootItem.inheritableProperties[l]=s.inheritableProperties[l];for(let e of a.childItems)delete e.inheritableProperties[l]}}}}if(a.childItems.length>1){}return a};const Ri=l=>{let s=[];if(l.closest(\"text\")){let e=[];let t=document.createTreeWalker(l,NodeFilter.SHOW_TEXT);for(;t.nextNode();)e.push(t.currentNode);for(let l of e){let t=l.parentElement;if(\"text\"===t.localName||\"tspan\"===t.localName||\"textPath\"===t.localName)t.getNumberOfChars()>0&&s.push(l);else{if(\"a\"===t.localName){let e=t.getBBox();0===e.x&&0===e.y&&0===e.width&&0===e.height||s.push(l)}}}}return s};exports.Ri=Ri;const yi=(o,e)=>{let n=e[\"x\"];let i=e[\"y\"];let u=!1;for(let r=0,a=o[\"length\"]-1;r<o[\"length\"];a=r++){let e=o[r][\"x\"];let t=o[r][\"y\"];let l=o[a][\"x\"];let s=o[a][\"y\"];t>i!=s>i&&n<(l-e)*(i-t)/(s-t)+e&&(u=!u)}return u};exports.yi=yi;const ki=(e,t)=>JSON.stringify(e)===JSON.stringify(t);const Ci=(e,t,l)=>e.split(t).join(l);const Si=e=>e.replace(/(^|[\\s-])(\\w)/g,(e,t,l)=>t+l.toUpperCase());const fi=(e,t,l)=>bi(e,t,new DOMPoint(l[\"x\"],l[\"y\"]),new DOMPoint(l[\"right\"],l[\"y\"]))||bi(e,t,new DOMPoint(l[\"right\"],l[\"y\"]),new DOMPoint(l[\"right\"],l[\"bottom\"]))||bi(e,t,new DOMPoint(l[\"right\"],l[\"bottom\"]),new DOMPoint(l[\"x\"],l[\"bottom\"]))||bi(e,t,new DOMPoint(l[\"x\"],l[\"bottom\"]),new DOMPoint(l[\"x\"],l[\"y\"]));exports.fi=fi;const bi=(e,t,l,s,r=1e-7)=>{let a=vi(e,t,l,s);return!!a&&(a[\"x\"]+r>=Vt(l[\"x\"],s[\"x\"])&&a[\"x\"]-r<=Ht(l[\"x\"],s[\"x\"])&&a[\"y\"]+r>=Vt(l[\"y\"],s[\"y\"])&&a[\"y\"]-r<=Ht(l[\"y\"],s[\"y\"]))};const wi=(e,t)=>{let l=t[\"y\"]-e[\"y\"];let s=e[\"x\"]-t[\"x\"];return[l,s,l*e[\"x\"]+s*e[\"y\"]]};const vi=(e,t,l,s)=>{let[r,a,o]=wi(e,t);let[n,i,u]=wi(l,s);let p=r*i-n*a;let f=null;0!==p&&(f=new DOMPoint((i*o-a*u)/p,(r*u-n*o)/p));return f};exports.vi=vi;const Wi=(l,e=!0)=>{let a=new DOMRect(0,0,0,0);let t=e?H(l):null;if(t)a=((e,t)=>{let l=Math[\"max\"](e[\"left\"],t[\"left\"]);let s=Math[\"min\"](e[\"right\"],t[\"right\"]);let r=Math[\"max\"](e[\"top\"],t[\"top\"]);let a=Math[\"min\"](e[\"bottom\"],t[\"bottom\"]);return new DOMRect(l,r,s-l,a-r)})(Wi(l,!1),di(DOMRect[\"fromRect\"](t[\"getBBox\"]()),ct(t)));else{if(\"tspan\"===l.localName){let e=Ri(l);let t=document.createRange();if(e.length>0&&(t.setStart(e[0],0),t.setEnd(e[e.length-1],e[e.length-1][\"length\"])),!1===t.collapsed){let l=t.startContainer.closest(\"text\");let[,e]=Ni(t.startContainer,t.startOffset);let[,s]=Ni(t.endContainer,t.endOffset);let r=[];for(let t=e;t<s;t+=1){let e=l.getExtentOfChar(t);r.push(e)}a=ci(r)}}else a=\"use\"===l.localName?new DOMRect(0,0,l[\"width\"][\"baseVal\"][\"value\"],l[\"height\"][\"baseVal\"][\"value\"]):DOMRect[\"fromRect\"](l[\"getBBox\"]())}return a};exports.Wi=Wi;const lt=(e,t)=>e.is2D?new DOMMatrix([te(e[\"a\"],t),te(e[\"b\"],t),te(e[\"c\"],t),te(e[\"d\"],t),te(e[\"e\"],t),te(e[\"f\"],t)]):new DOMMatrix([te(e[\"m11\"],t),te(e[\"m12\"],t),te(e[\"m13\"],t),te(e[\"m14\"],t),te(e[\"m21\"],t),te(e[\"m22\"],t),te(e[\"m23\"],t),te(e[\"m24\"],t),te(e[\"m31\"],t),te(e[\"m32\"],t),te(e[\"m33\"],t),te(e[\"m34\"],t),te(e[\"m41\"],t),te(e[\"m42\"],t),te(e[\"m43\"],t),te(e[\"m44\"],t)]);exports.lt=lt;const ct=s=>{const e=(()=>{var e,t;const l=(t=(e=s.transform)===null||e===void 0?void 0:e.baseVal)===null||t===void 0?void 0:t.consolidate();return l?DOMMatrix.fromMatrix(l.matrix):new DOMMatrix})();return e};exports.ct=ct;const bt=t=>{let l;let s;if(t.hasAttribute(\"data-bx-origin\")){let e=t.getAttribute(\"data-bx-origin\")[\"split\"](\" \");l=parseFloat(e[0]);s=parseFloat(e[1])}else{l=.5;s=.5}return new DOMPoint(l,s)};const wt=(e,t,l=6)=>{let s=te(t[\"x\"],l);let r=te(t[\"y\"],l);e.setAttribute(\"data-bx-origin\",s+\" \"+r)};const vt=e=>{let t=Wi(e);let l=bt(e);return Ot(l,t)};const yt=e=>{let t=ut(e);return vt(e).matrixTransform(t)};const kt=(l,e=!1)=>{let s=l[\"map\"](e=>yt(e));let t=s[0];let r=!0;for(let e of s){if(Kt(e,t)>3){r=!1;break}}let a=null;if(r){if(e){let e=l[\"map\"](e=>Yi(e));let t=ci(e);a=new DOMPoint((s[0][\"x\"]-t[\"x\"])/t[\"width\"],(s[0][\"y\"]-t[\"y\"])/t[\"height\"])}else a=s[0]}else{if(e)a=new DOMPoint(.5,.5);else{let e=l[\"map\"](e=>Yi(e));let t=ci(e);a=new DOMPoint(t[\"x\"]+t[\"width\"]/2,t[\"y\"]+t[\"height\"]/2)}}return a};exports.kt=kt;const St=(e,t=0,l=null,s=null)=>{let r=Ct(e);let a=ct(e);let o=ut(e);let n=o.inverse();null===s&&(s=vt(e));let i=s.matrixTransform(o);let u=DOMMatrix.fromMatrix(a);u.multiplySelf(n);u.translateSelf(i[\"x\"],i[\"y\"]);u.rotateSelf(-r+t);u.translateSelf(-i[\"x\"],-i[\"y\"]);u.multiplySelf(o);null!==l&&(u=lt(u,l));!1===u.isIdentity?e.setAttribute(\"transform\",u.toString()):e.removeAttribute(\"transform\")};exports.St=St;const Ct=(r,a=null)=>{let o=0;if(b.includes(r.localName)){ut(r).inverse();null===a&&(a=vt(r));let e=a.matrixTransform(ut(r));Wi(r);let t=e;let l=new DOMPoint(e[\"x\"]-100,e[\"y\"]);let s=new DOMPoint(a[\"x\"]-100,a[\"y\"]).matrixTransform(ut(r));o=ni(t,l,s)}return o};exports.Ct=Ct;const Mt=(e,r,t=3)=>{let l=Re(e,!0);for(let s of l){if(\"M\"===s.type||\"L\"===s.type||\"R\"===s.type||\"U\"===s.type||\"N\"===s.type){let e=new DOMPoint(s.values[0],s.values[1]).matrixTransform(r);s.values=[e[\"x\"],e[\"y\"]]}else{if(\"C\"===s.type){let e=new DOMPoint(s.values[0],s.values[1]).matrixTransform(r);let t=new DOMPoint(s.values[2],s.values[3]).matrixTransform(r);let l=new DOMPoint(s.values[4],s.values[5]).matrixTransform(r);s.values=[e[\"x\"],e[\"y\"],t[\"x\"],t[\"y\"],l[\"x\"],l[\"y\"]]}}s.values=s.values.map(e=>te(e,t))}return l};exports.Mt=Mt;const Pt=(e,t,l,s=0,r=0)=>{let a=DOMMatrix.fromMatrix(e);let o=ri(t);let n=ri(l);let i=new DOMMatrix;return i=Dt(i,Math.tan(o),Math.tan(n)),a=zt(a,s,r),a.multiplySelf(i),a=zt(a,-s,-r),a};exports.Pt=Pt;const Dt=(e,t,l)=>{let s=DOMMatrix[\"fromMatrix\"](e);let r=s[\"a\"];let a=s[\"b\"];return s[\"a\"]+=l*s[\"c\"],s[\"b\"]+=l*s[\"d\"],s[\"c\"]+=t*r,s[\"d\"]+=t*a,s};const zt=(e,t,l)=>{let s=DOMMatrix[\"fromMatrix\"](e);return s[\"e\"]=s[\"e\"]+t*s[\"a\"]+l*s[\"c\"],s[\"f\"]=s[\"f\"]+t*s[\"b\"]+l*s[\"d\"],s};const Ot=(e,t)=>new DOMPoint(t[\"x\"]+e[\"x\"]*t[\"width\"],t[\"y\"]+e[\"y\"]*t[\"height\"]);const Et=(e,t)=>new DOMPoint(0===t[\"width\"]?0:(e[\"x\"]-t[\"x\"])/t[\"width\"],0===t[\"height\"]?0:(e[\"y\"]-t[\"y\"])/t[\"height\"]);exports.Et=Et;const Zt=(r,a,o,n=0)=>{if(0===n)return 0===(r[\"x\"]*(a[\"y\"]-o[\"y\"])+a[\"x\"]*(o[\"y\"]-r[\"y\"])+o[\"x\"]*(r[\"y\"]-a[\"y\"]))/2;{let e=new ee_1.default(r,a);let t=new ee_1.default(a,o);let l=At(e,t);let s=Ut(l/(e.length*t[\"length\"]));if(isNaN(s))return!0;return li(s)<n}};const Kt=(e,t)=>{let l=t[\"x\"]-e[\"x\"];l*=l;let s=t[\"y\"]-e[\"y\"];s*=s;return Gt(l+s)};exports.Kt=Kt;const Qt=(e,t)=>{let l=(e[\"x\"]+t[\"x\"])/2;let s=(e[\"y\"]+t[\"y\"])/2;return new DOMPoint(l,s)};exports.Qt=Qt;const te=(e,t=0)=>{let l=Math[\"pow\"](10,t);return Math[\"round\"]((e+Number[\"EPSILON\"])*l)/l};exports.te=te;const ie=(e,t,l=Infinity,s=null)=>(null!==s&&(e=te(e,s)),e<t?e=t:e>l&&(e=l),e);exports.ie=ie;const qt=(e,t,l=null)=>null!==l?te(e[\"x\"],l)===te(t[\"x\"],l)&&te(e[\"y\"],l)===te(t[\"y\"],l):e[\"x\"]===t[\"x\"]&&e[\"y\"]===t[\"y\"];exports.qt=qt;const Xt=(e,t=0)=>new DOMPoint(te(e[\"x\"],t),te(e[\"y\"],t),te(e[\"z\"],t),te(e[\"w\"],t));exports.Xt=Xt;const Jt=(e,t,l,s=!0)=>{let r;let a=new DOMPoint(0,0);let o=new DOMPoint(e[\"x\"],e[\"y\"]);let n=new DOMPoint(t[\"x\"],t[\"y\"]);let i=l;let u=new ee_1.default(a,o);let p=new ee_1.default(o,n);let f=new ee_1.default(o,i);let c=At(f,p);let h=At(p,p);r=0!==h?c/h:0;!1===s&&(r<0?r=0:r>1&&(r=1));let y=Lt(u,p[\"multiply\"](r));return[new DOMPoint(y[\"x\"],y[\"y\"]),r]};exports.Jt=Jt;const pt=(a,o,e=!1)=>{let n;if(!1===e)n=DOMMatrix[\"fromMatrix\"](o[\"getScreenCTM\"]()[\"inverse\"]()[\"multiply\"](a[\"getScreenCTM\"]()));else{let t=null;let l=!1;let s=null;let r=!1;if(\"path\"===a[\"localName\"]){let e=a[\"ownerSVGElement\"][\"querySelector\"]('textPath[href=\"#'+CSS[\"escape\"](a[\"id\"])+'\"]');t=e?e[\"closest\"](\"text\"):null;l=!!e&&null!==a[\"closest\"](\"defs\")}if(\"path\"===o[\"localName\"]){let e=a[\"ownerSVGElement\"][\"querySelector\"]('textPath[href=\"#'+CSS[\"escape\"](o[\"id\"])+'\"]');s=e?e[\"closest\"](\"text\"):null;r=!!e&&null!==o[\"closest\"](\"defs\")}n=l&&r?ut(s)[\"multiply\"](ct(o))[\"inverse\"]()[\"multiply\"](ut(t))[\"multiply\"](ct(a)):l?ut(o)[\"inverse\"]()[\"multiply\"](ut(t))[\"multiply\"](ct(a)):r?ut(s)[\"multiply\"](ct(o))[\"inverse\"]()[\"multiply\"](ut(a)):ut(o)[\"inverse\"]()[\"multiply\"](ut(a))}return n};exports.pt=pt;const At=(e,t)=>e[\"x\"]*t[\"x\"]+e[\"y\"]*t[\"y\"];const $t=(e,t)=>new ee_1.default(e[\"x\"]-t[\"x\"],e[\"y\"]-t[\"y\"]);const Lt=(e,t)=>new ee_1.default(e[\"x\"]+t[\"x\"],e[\"y\"]+t[\"y\"]);let ut=(s,e=!1)=>{if(!1===e)return DOMMatrix.fromMatrix(s.getScreenCTM());else{let t=null;let l=!1;if(\"path\"===s[\"localName\"]){const r=s;let e=r[\"ownerSVGElement\"][\"querySelector\"]('textPath[href=\"#'+CSS[\"escape\"](s[\"id\"])+'\"]');t=e?e[\"closest\"](\"text\"):null;l=!!e&&null!==s[\"closest\"](\"defs\")}return l?ut(t)[\"multiply\"](ct(s)):DOMMatrix.fromMatrix(s.getScreenCTM())}};exports.ut=ut;const Hi=(s,e,t,i,l,r)=>{let u;let a=Ii(s)[\"filter\"](e=>\"​\"!==e);let o=a[\"join\"](\"\"),f=/[\\u0590-\\u05FF]/[\"test\"](o);let c=/[\\u0600-\\u06FF]/[\"test\"](o);u=f?e[\"layout\"](a[\"join\"](\"\"),\"hebr\",\"hr\",\"ltr\"):c?e[\"layout\"](a[\"join\"](\"\"),\"arab\",\"ar\",\"ltr\"):e[\"layout\"](o);let h=r?-14:0;let y=1/e[\"head\"][\"unitsPerEm\"]*t;let p={moveTo:\"M\",lineTo:\"L\",quadraticCurveTo:\"Q\",bezierCurveTo:\"C\",closePath:\"Z\"};let v=e[\"hhea\"][\"ascent\"];let x=e[\"hhea\"][\"descent\"];let d=v/20;let m=[];let g=[];let M=[];let b=[];for(let t=0,l=0;t<u[\"glyphs\"][\"length\"];t+=1){let e=u[\"glyphs\"][t];g[\"push\"](s[\"getStartPositionOfChar\"](l));M[\"push\"](s[\"getEndPositionOfChar\"](l));b[\"push\"](s[\"getRotationOfChar\"](l));l+=e[\"codePoints\"][\"length\"]}for(let n=0;n<u[\"glyphs\"][\"length\"];n+=1){let e=u[\"glyphs\"][n];let s=e[\"advanceWidth\"];let t=g[n];let l=M[n];let r=b[n];let a=e[\"path\"][\"commands\"][\"map\"](({command:e,args:t})=>({type:p[e],values:[...t]}));if(i[\"includes\"](\"underline\")){let e=s;let t=d;let l=x/3;a[\"push\"]({type:\"M\",values:[0,l]},{type:\"L\",values:[e,l]},{type:\"L\",values:[e,l-t]},{type:\"L\",values:[0,l-t]},{type:\"Z\",values:[]})}if(i[\"includes\"](\"overline\")){let e=s;let t=d;let l=v-d;a[\"push\"]({type:\"M\",values:[0,l]},{type:\"L\",values:[e,l]},{type:\"L\",values:[e,l-t]},{type:\"L\",values:[0,l-t]},{type:\"Z\",values:[]})}if(i[\"includes\"](\"line-through\")){let e=s;let t=d;let l=(v+x)/2;a[\"push\"]({type:\"M\",values:[0,l]},{type:\"L\",values:[e,l]},{type:\"L\",values:[e,l-t]},{type:\"L\",values:[0,l-t]},{type:\"Z\",values:[]})}let o=[];for(let p of a){let u=new DOMMatrix;if(c||f?u[\"translateSelf\"](l[\"x\"],l[\"y\"]):u[\"translateSelf\"](t[\"x\"],t[\"y\"]),u[\"rotateSelf\"](r),u=Pt(u,h,0,0,0),u[\"scaleSelf\"](y,-y,1,0,0),\"M\"===p[\"type\"]){let[e,t]=p[\"values\"];let l=new DOMPoint(e,t)[\"matrixTransform\"](u);p[\"values\"]=[l[\"x\"],l[\"y\"]]}else{if(\"L\"===p[\"type\"]){let[e,t]=p[\"values\"];let l=new DOMPoint(e,t)[\"matrixTransform\"](u);p[\"values\"]=[l[\"x\"],l[\"y\"]]}else{if(\"Q\"===p[\"type\"]){let[e,t,l,s]=p[\"values\"];let r=new DOMPoint(e,t)[\"matrixTransform\"](u);let a=new DOMPoint(l,s)[\"matrixTransform\"](u);p[\"values\"]=[r[\"x\"],r[\"y\"],a[\"x\"],a[\"y\"]]}else{if(\"C\"===p[\"type\"]){let[e,t,l,s,r,a]=p[\"values\"];let o=new DOMPoint(e,t)[\"matrixTransform\"](u);let n=new DOMPoint(l,s)[\"matrixTransform\"](u);let i=new DOMPoint(r,a)[\"matrixTransform\"](u);p[\"values\"]=[o[\"x\"],o[\"y\"],n[\"x\"],n[\"y\"],i[\"x\"],i[\"y\"]]}}}}o[\"push\"](p)}o[\"length\"]>0&&m[\"push\"](o)}return m};const Yi=(e,t=!0)=>{const l=ut(e);const s=Wi(e,t);return di(s,l)};exports.Yi=Yi;const Xi=e=>{let t=document[\"createDocumentFragment\"]();let l=document[\"createElementNS\"](u[\"svg\"],\"svg\");for(l[\"innerHTML\"]=e;l[\"firstChild\"];)t[\"append\"](l[\"firstChild\"]);return t[\"childElementCount\"]>1?t:1===t[\"childElementCount\"]?t[\"children\"][0]:null};exports.Xi=Xi;const Zi=(e,l=null)=>{const s=e[\"split\"](\":\");let r=null;if(1===s[\"length\"]){let[e]=s;r=document[\"createElement\"](e,l)}else{if(2===s[\"length\"]){let[e,t]=s;\"svg\"===e&&(r=document[\"createElementNS\"](u[\"svg\"],t,l))}}return r};exports.Zi=Zi;const Ig=t=>new Promise(a=>__awaiter(void 0,void 0,void 0,function*(){let e=new Blob([t],{type:\"image/svg+xml;charset=utf-8\"});let s=URL[\"createObjectURL\"](e);let r=new Image;r[\"src\"]=s;r[\"addEventListener\"](\"load\",()=>__awaiter(void 0,void 0,void 0,function*(){let e=new OffscreenCanvas(r[\"naturalWidth\"],r[\"naturalHeight\"]);let t=e[\"getContext\"](\"2d\");t[\"fillStyle\"]=\"rgba(0, 0, 0, 0)\";t[\"fillRect\"](0,0,r[\"naturalWidth\"],r[\"naturalHeight\"]);t[\"drawImage\"](r,0,0);let l=yield e[\"convertToBlob\"]({type:\"image/png\"});URL[\"revokeObjectURL\"](s);a(l)}))}));exports.Ig=Ig;const kc=(e,t=\"xml\",l=2)=>{e=e.cloneNode(!0);let s;let r=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT);for(;s=r.nextNode();)if(s.nodeType===Node.ELEMENT_NODE){if(\"defs\"===s[\"localName\"])0===s[\"children\"][\"length\"]&&s[\"remove\"]();else{if(\"style\"===s[\"localName\"])\"\"===s[\"textContent\"][\"replace\"](/\\s+/g,\" \")[\"trim\"]()?s[\"remove\"]():s[\"matches\"]('[data-bx-fonts=\"google\"]')&&s[\"removeAttribute\"](\"data-bx-fonts\");else{if(\"xml\"===t&&\"path\"===s[\"localName\"]){let e=s[\"getAttribute\"](\"d\");e&&/[\\t\\n\\r]/[\"test\"](e)&&s[\"setAttribute\"](\"d\",e[\"replace\"](/[\\t\\n\\r ]+/g,\" \"))}}}}Mc(e,t);Zd(e,l);return Cc(e,t)};exports.kc=kc;const Cc=(e,t=\"xml\")=>{let l;if(\"xml\"===t){if(l=(new XMLSerializer)[\"serializeToString\"](e),0===l[\"trim\"]()[\"length\"])throw new Error(\"Failed to serialize artwork\");l='<?xml version=\"1.0\" encoding=\"utf-8\"?>'+l}else{if(\"html\"===t){l=e[\"outerHTML\"];if(0===l[\"trim\"]()[\"length\"])throw new Error(\"Failed to serialize artwork\",e);l=\"<!doctype html>\"+l;l=Ci(l,' xmlns:xlink=\"http://www.w3.org/1999/xlink\"',\"\")}}return l=Ci(l,\"url(&quot;\",\"url(\"),l=Ci(l,\"&quot;)\",\")\"),l};const Mc=(t,e)=>{if(\"xml\"===e){let s;let e=document[\"createNodeIterator\"](t,NodeFilter[\"SHOW_ELEMENT\"]);let r=!1;let a=!1;for(;s=e[\"nextNode\"]();)if(\"bx-title\"!==s[\"localName\"]){if(s[\"localName\"][\"startsWith\"](\"bx-\")){let t=document[\"createElementNS\"](u[\"bx\"],\"bx:\"+s[\"localName\"][\"substring\"](3));for(let e of[...s[\"attributes\"]])t[\"setAttribute\"](e[\"name\"],e[\"value\"]);for(let e of[...s[\"childNodes\"]]){t[\"append\"](e);s[\"replaceWith\"](t);a=!0}}else{for(let{name:t,value:l}of[...s[\"attributes\"]])if(\"href\"===t||\"_href\"===t){s[\"setAttribute\"](\"xlink:href\",l);s[\"removeAttribute\"](t);r=!0}else{if(t[\"startsWith\"](\"data-bx-\")){let e=t[\"substring\"](8);s[\"setAttributeNS\"](u[\"bx\"],\"bx:\"+e,l);s[\"removeAttribute\"](t);a=!0}}}}else{let l=Zi(\"svg:title\");l[\"innerHTML\"]=s[\"innerHTML\"];for(let{name:e,value:t}of s[\"attributes\"])l[\"setAttribute\"](e,t);s[\"replaceWith\"](l)}t[\"removeAttribute\"](\"xmlns\");t[\"removeAttribute\"](\"xmlns:bx\");t[\"removeAttribute\"](\"xmlns:xlink\");t[\"setAttributeNS\"](u[\"xmlns\"],\"xmlns\",u[\"svg\"]);r&&t[\"setAttributeNS\"](u[\"xmlns\"],\"xmlns:xlink\",u[\"xlink\"]);a&&t[\"setAttributeNS\"](u[\"xmlns\"],\"xmlns:bx\",u[\"bx\"])}else{if(\"html\"===e){let s;let e=document[\"createNodeIterator\"](t,NodeFilter[\"SHOW_ELEMENT\"]);for(;s=e[\"nextNode\"]();)if(\"bx-title\"!==s[\"localName\"]){for(let{name:e,value:t}of[...s[\"attributes\"]]){if(!(\"href\"!==e&&\"_href\"!==e)){s[\"setAttribute\"](\"xlink:href\",t);s[\"removeAttribute\"](e)}}}else{let l=Zi(\"svg:title\");l[\"innerHTML\"]=s[\"innerHTML\"];for(let{name:e,value:t}of s[\"attributes\"])l[\"setAttribute\"](e,t);s[\"replaceWith\"](l)}}}};const Eo=(e,t,l,s)=>e*s-t*l;const To=(e,t,l,s,r,a,o,n,i)=>e*Eo(r,a,n,i)-s*Eo(t,l,n,i)+o*Eo(t,l,r,a);const Ao=e=>{let t=e[0][0];let l=e[0][1];let s=e[0][2];let r=e[0][3];let a=e[1][0];let o=e[1][1];let n=e[1][2];let i=e[1][3];let u=e[2][0];let p=e[2][1];let f=e[2][2];let c=e[2][3];let h=e[3][0];let y=e[3][1];let v=e[3][2];let x=e[3][3];return t*To(o,p,y,n,f,v,i,c,x)-l*To(a,u,h,n,f,v,i,c,x)+s*To(a,u,h,o,p,y,i,c,x)-r*To(a,u,h,o,p,y,n,f,v)};const $o=e=>{let l=(e=>{})(e);let s=Ao(e);if(Math.abs(s)<1e-8)return!1;for(let t=0;t<4;t++)for(let e=0;e<4;e++)l[t][e]=l[t][e]/s;return l};const Lo=l=>{let s=[[],[],[],[]];for(let t=0;t<4;t++)for(let e=0;e<4;e++)s[t][e]=l[e][t];return s};const Ro=(e,t)=>{let l=[];return l[0]=e[0]*t[0][0]+e[1]*t[1][0]+e[2]*t[2][0]+e[3]*t[3][0],l[1]=e[0]*t[0][1]+e[1]*t[1][1]+e[2]*t[2][1]+e[3]*t[3][1],l[2]=e[0]*t[0][2]+e[1]*t[1][2]+e[2]*t[2][2]+e[3]*t[3][2],l[3]=e[0]*t[0][3]+e[1]*t[1][3]+e[2]*t[2][3]+e[3]*t[3][3],l};const Io=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);const Bo=(t,l)=>{let s=Io(t);if(0!==s){let e=l/s;t[0]*=e;t[1]*=e;t[2]*=e}};const Uo=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2];const _o=(e,t,l,s,r)=>{l[0]=s*e[0]+r*t[0];l[1]=s*e[1]+r*t[1];l[2]=s*e[2]+r*t[2]};const Fo=(e,t,l)=>{l[0]=e[1]*t[2]-e[2]*t[1];l[1]=e[2]*t[0]-e[0]*t[2];l[2]=e[0]*t[1]-e[1]*t[0]};const Oo=e=>{let r={};let a=[[e[\"a\"],e[\"b\"],0,0],[e[\"c\"],e[\"d\"],0,0],[0,0,1,0],[e[\"e\"],e[\"f\"],0,1]];if(0===a[3][3])return null;for(let t=0;t<4;t++)for(let e=0;e<4;e++)a[t][e]/=a[3][3];let o=[];for(let t=0;t<4;t++){o[t]=[];for(let e=0;e<4;e++)o[t][e]=a[t][e]}for(let e=0;e<3;e++)o[e][3]=0;o[3][3]=1;if(0===Ao(o))return null;if(0!==a[0][3]||0!==a[1][3]||0!==a[2][3]){let e=[0,0,0,0];e[0]=a[0][3];e[1]=a[1][3];e[2]=a[2][3];e[3]=a[3][3];let t=$o(o);let l=Lo(t);let s=Ro(e,l);r[\"perspectiveX\"]=s[0];r[\"perspectiveY\"]=s[1];r[\"perspectiveZ\"]=s[2];r[\"perspectiveW\"]=s[3];a[0][3]=a[1][3]=a[2][3]=0;a[3][3]=1}else{r[\"perspectiveX\"]=0;r[\"perspectiveY\"]=0;r[\"perspectiveZ\"]=0;r[\"perspectiveW\"]=1;r[\"translateX\"]=a[3][0];a[3][0]=0;r[\"translateY\"]=a[3][1];a[3][1]=0;r[\"translateZ\"]=a[3][2];a[3][2]=0}let t=[[],[],[]];let l=[0,0,0];for(let e=0;e<3;e++){t[e][0]=a[e][0];t[e][1]=a[e][1];t[e][2]=a[e][2]}if(r[\"scaleX\"]=Io(t[0]),Bo(t[0],1),r[\"skewXY\"]=Uo(t[0],t[1]),_o(t[1],t[0],t[1],1,-r[\"skewXY\"]),r[\"scaleY\"]=Io(t[1]),Bo(t[1],1),r[\"skewXY\"]/=r[\"scaleY\"],r[\"skewXZ\"]=Uo(t[0],t[2]),_o(t[2],t[0],t[2],1,-r[\"skewXZ\"]),r[\"skewYZ\"]=Uo(t[1],t[2]),_o(t[2],t[1],t[2],1,-r[\"skewYZ\"]),r[\"scaleZ\"]=Io(t[2]),Bo(t[2],1),r[\"skewXZ\"]/=r[\"scaleZ\"],r[\"skewYZ\"]/=r[\"scaleZ\"],Fo(t[1],t[2],l),Uo(t[0],l)<0){r[\"scaleX\"]*=-1;r[\"scaleY\"]*=-1;r[\"scaleZ\"]*=-1;for(let e=0;e<3;e++){t[e][0]*=-1;t[e][1]*=-1;t[e][2]*=-1}}let s=0;let n=Math.asin(-t[0][2]);let i=0;return 0!==Math.cos(n)?(s=Math.atan2(t[1][2],t[2][2]),i=Math.atan2(t[0][1],t[0][0])):s=Math.atan2(-t[2][0],t[1][1]),r[\"rotateX\"]=li(s),r[\"rotateY\"]=li(n),r[\"rotateZ\"]=li(i),r};exports.Oo=Oo;const Zd=(e,t=2,l=1)=>{Kd(e);let n=\"\";let s={text:!0,textPath:!0,tspan:!0,title:!0,desc:!0};for(let e=0;e<t;e+=1)n+=\" \";let i=(a,o=2)=>{if(!s[a[\"localName\"]])for(let r of a[\"children\"]){let e=a[\"firstChild\"]===r;let t=a[\"lastChild\"]===r;if(!0===e){let e=document[\"createTextNode\"](\"\\n\");r[\"parentNode\"][\"insertBefore\"](e,r)}let l=\"\";for(let e=0;e<o;e+=1)l+=n;let s=document[\"createTextNode\"](l);if(a[\"insertBefore\"](s,r),!0===t){let e=document[\"createTextNode\"](\"\\n\");a[\"appendChild\"](e);let t=\"\";for(let e=0;e<o-1;e+=1)t+=n;let l=document[\"createTextNode\"](t);a[\"appendChild\"](l)}else{let e=document[\"createTextNode\"](\"\\n\");a[\"insertBefore\"](e,r[\"nextSibling\"])}r[\"childElementCount\"]>0&&i(r,o+1)}};i(e,l)};const Kd=e=>{let t;let l=document[\"createNodeIterator\"](e,NodeFilter.SHOW_TEXT,null);let s={text:!0,textPath:!0,tspan:!0};for(;t=l[\"nextNode\"]();)s[t[\"parentElement\"][\"localName\"]]||Qd(t[\"textContent\"])&&t[\"remove\"]()};const Pc=e=>null!==(new DOMParser).parseFromString(e,\"text/html\").querySelector(\"svg\");exports.Pc=Pc;const Dc=(i,u)=>{var p;const e=e=>{let t=document[\"createElement\"](\"div\");t[\"setAttribute\"](\"style\",\"width: 1px; height: 1px; position: fixed; top: -1px; left: -1px; overflow: hidden;\");t[\"attachShadow\"]({mode:\"open\"});t[\"shadowRoot\"][\"append\"](e);return t};let r=e(i);let t=e(u);document[\"body\"][\"append\"](r);document[\"body\"][\"append\"](t);for(let l of i[\"querySelectorAll\"](\"use\"))if(\"\"!==l[\"href\"][\"baseVal\"]){let e=i[\"querySelector\"](l[\"href\"][\"baseVal\"]);let t=u[\"querySelector\"](l[\"href\"][\"baseVal\"]);e&&t&&Ji(e,t)&&e[\"remove\"]()}{let e=[...i[\"querySelectorAll\"](\"linearGradient,radialGradient\")];e=e[\"filter\"](e=>gn(e));let l=[...u[\"querySelectorAll\"](\"linearGradient,radialGradient\")];l=l[\"filter\"](e=>gn(e));for(let t of e){let e=l[\"find\"](e=>e[\"id\"]===t[\"id\"]);e&&!0===Dn([t,e])&&t[\"remove\"]()}}{let e=[...i[\"querySelectorAll\"](\"linearGradient,radialGradient\")];e=e[\"filter\"](e=>bn(e));let l=[...u[\"querySelectorAll\"](\"linearGradient,radialGradient\")];l=l[\"filter\"](e=>bn(e));for(let t of e){let e=l[\"find\"](e=>e[\"id\"]===t[\"id\"]);e&&!0===Dn([t,e])&&t[\"remove\"]()}}{let e=[...i.querySelectorAll(\"pattern:not([href])\")];let l=[...u.querySelectorAll(\"pattern:not([href])\")];for(let t of e){let e=l[\"find\"](e=>e[\"id\"]===t[\"id\"]);e&&Ji(t,e)&&t[\"remove\"]()}}{let e=[...i.querySelectorAll(\"marker\")];let l=[...u.querySelectorAll(\"marker\")];for(let t of e){let e=l[\"find\"](e=>e[\"id\"]===t[\"id\"]);e&&Ji(t,e)&&t[\"remove\"]()}}{let e=[...i.querySelectorAll(\"filter\")];e=e[\"filter\"](e=>!1===e[\"hasAttribute\"](\"data-bx-preset\"));let l=[...u.querySelectorAll(\"filter\")];l=l[\"filter\"](e=>!1===e[\"hasAttribute\"](\"data-bx-preset\"));for(let t of e){let e=l[\"find\"](e=>e[\"id\"]===t[\"id\"]);e&&Ji(t,e)&&t[\"remove\"]()}}{let t=[...i.querySelectorAll(\"view\")];for(let e of t)e[\"remove\"]()}for(let e of i.querySelectorAll(\"[data-bx-pinned]\"))e[\"removeAttribute\"](\"data-bx-pinned\");{let t=[...i.querySelectorAll(\"style\")][\"filter\"](e=>!e[\"hasAttribute\"](\"data-bx-fonts\"));let l=[...u.querySelectorAll(\"style\")][\"filter\"](e=>!e[\"hasAttribute\"](\"data-bx-fonts\"));let s=new Set;for(let e of[...t,...l])for(let t of e[\"sheet\"][\"cssRules\"])if(t[\"type\"]===CSSRule[\"STYLE_RULE\"]){for(let e of i[\"querySelectorAll\"](t[\"selectorText\"]))s[\"add\"](e)}let a=Symbol();for(let e of s)e[a]=hc(e);for(let e of t)e[\"remove\"]();for(let e of l)r[\"shadowRoot\"][\"append\"](e[\"cloneNode\"](!0));for(let r of s){let l=r[a];let s=hc(r);for(let[e,t]of Object[\"entries\"](l)){t!==s[e]&&r[\"style\"].setProperty(e,t)}}}i.remove();u.remove();r.remove();t.remove();{let t=[...i.querySelectorAll(\"[id]\")][\"map\"](e=>e[\"id\"]);let l=[...u.querySelectorAll(\"[id]\")][\"map\"](e=>e[\"id\"]);i[\"id\"]&&t[\"push\"](i[\"id\"]);u[\"id\"]&&l[\"push\"](u[\"id\"]);let e=t[\"filter\"](e=>l[\"includes\"](e));e=fe(e);let r={};let a={};let o={};for(let e of[...t,...l])o[e]=!0;for(let s of e){let e,t,l;for(e=i[\"id\"]===s?i:i[\"querySelector\"](\"#\"+CSS[\"escape\"](s)),t=\"linearGradient\"===e[\"localName\"]||\"radialGradient\"===e[\"localName\"]?e[\"href\"].baseVal.length>1?e[\"href\"][\"baseVal\"][\"substring\"](1):gn(e)?\"color\":\"gradient\":\"clipPath\"===e[\"localName\"]?\"clip\":e[\"localName\"],void 0===r[t]&&(r[t]=1);;){let e=t+\"-\"+r[t];if(void 0===o[e]){l=e;break}r[t]+=1}a[s]=l;o[l]=!0}let s=document[\"createNodeIterator\"](i,NodeFilter[\"SHOW_ELEMENT\"]);let n=null;for(;n=s[\"nextNode\"]();){if(void 0!==a[n[\"id\"]]&&(n[\"id\"]=a[n[\"id\"]]),\"#\"===((p=n[\"href\"])===null||p===void 0?void 0:p[\"baseVal\"][0])){let e=n[\"href\"][\"baseVal\"][\"substring\"](1);void 0!==a[e]&&n[\"setAttribute\"](\"href\",\"#\"+a[e])}for(let l of U){{let t=n[\"style\"][\"getPropertyValue\"](l);if(t===null||t===void 0?void 0:t[\"startsWith\"](\"url(\")){let e=t[\"substring\"](6,t[\"length\"]-2);if(void 0!==a[e]){n[\"style\"][\"removeProperty\"](l);n[\"style\"].setProperty(l,\"url(#\"+a[e]+\")\")}}}{}}}}};exports.Dc=Dc;let Ji=(t,l)=>{if(t[\"localName\"]!==l[\"localName\"])return!1;if(t[\"namespaceURI\"]!==l[\"namespaceURI\"])return!1;if(t[\"textContent\"]!==l[\"textContent\"])return!1;if(t[\"children\"][\"length\"]!==l[\"children\"][\"length\"])return!1;if(t[\"attributes\"][\"length\"]!==l[\"attributes\"][\"length\"])return!1;for(let e of t[\"attributes\"])if(\"style\"===e[\"name\"]){if(t[\"style\"][\"cssText\"]!==l[\"style\"][\"cssText\"])return!1}else{if(t[\"getAttribute\"](e[\"name\"])!==l[\"getAttribute\"](e[\"name\"]))return!1}for(let e=0;e<t[\"children\"][\"length\"];e+=1)if(!1===Ji(t[\"children\"][e],l[\"children\"][e]))return!1;return!0};const gn=t=>{if(\"linearGradient\"===t[\"localName\"]&&!1===t[\"hasAttribute\"](\"href\")){let e=[...t[\"querySelectorAll\"](\":scope > stop\")];return 1===e[\"length\"]&&!1===e[0][\"hasAttribute\"](\"offset\")}return!1};exports.gn=gn;const fn=e=>null!==e[\"querySelector\"](\":scope > stop\")||!1===e[\"hasAttribute\"](\"href\");const bn=t=>{let l=[];\"linearGradient\"===t[\"localName\"]?l=[\"x1\",\"y1\",\"x2\",\"y2\",\"href\",\"gradientUnits\",\"gradientTransform\",\"href\"]:\"radialGradient\"===t[\"localName\"]&&(l=[\"cx\",\"cy\",\"r\",\"fx\",\"d9\",\"fr\",\"href\",\"gradientUnits\",\"gradientTransform\",\"href\"]);for(let e of l)if(t[\"hasAttribute\"](e))return!1;return!0!==gn(t)};const Dn=l=>{if(0===l[\"length\"])return!1;if(1===l[\"length\"])return!0;{let[t,...r]=l;let a=Symbol();let o=Symbol();let n=Symbol();for(let e of l){e[a]=vn(e)}for(let e of r)if(e[a][\"length\"]!==t[a][\"length\"])return!1;for(let e of l)for(let l of e[a]){let{stopColor:e,stopOpacity:t}=getComputedStyle(l);l[o]=e;l[n]=t}for(let s=0;s<t[a][\"length\"];s+=1){let l=t[a][s];for(let t of r){let e=t[a][s];if(e[\"offset\"][\"baseVal\"]!==l[\"offset\"][\"baseVal\"])return!1;if(e[o]!==l[o])return!1;if(e[n]!==l[n])return!1}}return!0}};const vn=t=>{let e=[];for(let e of[t,...pn(t)]){}return e};const cn=e=>{};const pn=t=>{let l=null;let s=[];let r=t;for(;r&&\"\"!==r[\"href\"][\"baseVal\"];){null===l&&(l=Ki(t));let e=l[\"querySelector\"](r[\"href\"][\"baseVal\"]);if(!e||\"linearGradient\"!==e.localName&&\"radialGradient\"!==e.localName||e===t||!1!==s[\"includes\"](e))break;s[\"push\"](e);r=e}return s};const yn=(e,l)=>{let s=null;if(e[\"hasAttribute\"](l))s=e[\"getAttribute\"](l);else{let t=pn(e);for(let e of t)if(e[\"hasAttribute\"](l)){s=e[\"getAttribute\"](l);break}}return s};const hc=e=>{let l={};const s=getComputedStyle(e);l[\"width\"]=s[\"getPropertyValue\"](\"width\");for(let t of s){let e=s[\"getPropertyValue\"](t);l[t]=e}return l};const Ne=l=>{var s;let r=\"\";for(let t=0,e=l[\"length\"];t<e;t+=1){let e=l[t];t>0&&(r+=\" \");r+=e.type;((s=e===null||e===void 0?void 0:e[\"values\"])===null||s===void 0?void 0:s[\"length\"])>0&&(r+=\" \"+e.values[\"join\"](\" \"))}return r};exports.Ne=Ne;const to=(a,o,n=9)=>{let i=so(o,n);if(i){a[\"setPathData\"](i);let e=a[\"getAttribute\"](\"d\");let t=o.values[\"map\"](e=>te(e,n))[\"join\"](\" \");let l=o[\"type\"]+\" \"+t;let s=Jn[o[\"type\"]];let r=Pe(e+\" / \"+l+\" \"+s)[\"toString\"](32);a[\"setAttribute\"](\"data-bx-shape\",l+\" \"+s+\"@\"+r)}};exports.to=to;const so=(e,t=6)=>{let l=null;\"rect\"===e[\"type\"]?l=no(e,t):\"frame\"===e[\"type\"]?l=oo(e,t):\"ring\"===e[\"type\"]?l=ao(e,t):\"pie\"===e[\"type\"]?l=lo(e,t):\"crescent\"===e[\"type\"]?l=ro(e,t):\"triangle\"===e[\"type\"]?l=ho(e,t):\"n-gon\"===e[\"type\"]?l=co(e,t):\"star\"===e[\"type\"]?l=po(e,t):\"cog\"===e[\"type\"]?l=uo(e,t):\"arrow\"===e[\"type\"]?l=xo(e,t):\"cross\"===e[\"type\"]?l=mo(e,t):\"spiral\"===e[\"type\"]&&(l=go(e,t));return l};const no=(e,t)=>{let[l,s,r,a,o,n,i,u,p,f,c,h]=e[\"values\"];void 0===p&&(p=o);void 0===f&&(f=n);void 0===c&&(c=i);void 0===h&&(h=u);o=o>r/2?r/2:o;n=n>r/2?r/2:n;i=i>r/2?r/2:i;u=u>r/2?r/2:u;p=p>a/2?a/2:p;f=f>a/2?a/2:f;c=c>a/2?a/2:c;h=h>a/2?a/2:h;let y=[{type:\"M\",values:[l+o,s]},{type:\"H\",values:[l+r-n]},{type:\"A\",values:[n,f,0,0,1,l+r,s+f]},{type:\"V\",values:[s+a-c]},{type:\"A\",values:[i,c,0,0,1,l+r-i,s+a]},{type:\"H\",values:[l+u]},{type:\"A\",values:[u,h,0,0,1,l,s+a-h]},{type:\"V\",values:[s+p]},{type:\"A\",values:[o,p,0,0,1,l+o,s]},{type:\"Z\",values:[]}];y=y[\"filter\"](e=>\"A\"!==e[\"type\"]||0!==e[\"values\"][0]&&0!==e[\"values\"][1]);for(let e of y)e[\"values\"]=e[\"values\"][\"map\"](e=>te(e,t));return y};const oo=(e,t)=>{let[l,s,r,a,o,n,i,u,p,f]=e[\"values\"];let c=Math[\"min\"](r/2,a/2);o=ie(o,0,r/2);n=ie(n,0,a/2);i=ie(i,0,c);u=ie(u,0,c);p=ie(p,0,c);f=ie(f,0,c);let h=r-2*o;let y=a-2*n;let v=l+o;let x=s+n;let d=Math[\"min\"](h/2,y/2);let m=ie(i-o/2,0,d);let g=ie(u-o/2,0,d);let M=ie(p-o/2,0,d);let b=ie(f-o/2,0,d);let w=[{type:\"M\",values:[l+i,s]},{type:\"H\",values:[l+r-u]},{type:\"A\",values:[u,u,0,0,1,l+r,s+u]},{type:\"V\",values:[s+a-p]},{type:\"A\",values:[p,p,0,0,1,l+r-p,s+a]},{type:\"H\",values:[l+f]},{type:\"A\",values:[f,f,0,0,1,l,s+a-f]},{type:\"V\",values:[s+i]},{type:\"A\",values:[i,i,0,0,1,l+i,s]},{type:\"Z\",values:[]},{type:\"M\",values:[v,x+m]},{type:\"V\",values:[x+y-b]},{type:\"A\",values:[b,b,0,0,0,v+b,x+y]},{type:\"H\",values:[v+h-M]},{type:\"A\",values:[M,M,0,0,0,v+h,x+y-M]},{type:\"V\",values:[x+g]},{type:\"A\",values:[g,g,0,0,0,v+h-g,x]},{type:\"H\",values:[v+m]},{type:\"A\",values:[m,m,0,0,0,v,x+m]},{type:\"Z\",values:[]}];w=w[\"filter\"](e=>\"A\"!==e[\"type\"]||0!==e[\"values\"][0]&&0!==e[\"values\"][1]);for(let e of w)e[\"values\"]=e[\"values\"][\"map\"](e=>te(e,t));return w};const ao=(e,t)=>{let[l,s,r,a,o,n]=e[\"values\"];let i=[{type:\"M\",values:[l,s]},{type:\"m\",values:[-o,0]},{type:\"a\",values:[o,n,0,1,0,2*o,0]},{type:\"a\",values:[o,n,0,1,0,-2*o,0]},{type:\"Z\",values:[]},{type:\"M\",values:[l,s]},{type:\"m\",values:[-r,0]},{type:\"a\",values:[r,a,0,0,1,2*r,0]},{type:\"a\",values:[r,a,0,0,1,-2*r,0]},{type:\"Z\",values:[]}];for(let e of i)e[\"values\"]=e[\"values\"][\"map\"](e=>te(e,t));return i};const lo=(e,t)=>{let[l,s,r,a,o,n]=e.values;let i=ri(o);let u=ri(n);let p=n-o;let f=p>=180||p>=-180&&p<=0?1:0;let c=[{type:\"M\",values:[l+a*Math.sin(i),s+a*-Math.cos(i)]},{type:\"A\",values:[a,a,0,f,1,l+a*Math.sin(u),s+a*-Math.cos(u)]},{type:\"L\",values:[l+r*Math.sin(u),s+r*-Math.cos(u)]}];if(r>0){let e=l+r*Math.sin(i),t=s+r*-Math.cos(i);c[\"push\"]({type:\"A\",values:[r,r,0,f,0,e,t]})}c[\"push\"]({type:\"Z\",values:[]});for(let e of c)e.values=e.values.map(e=>te(e,t));return c};const ro=(e,t)=>{let[l,s,r,a,o]=e.values;let n=oi(90-a/2);let i=ri(n);let u=oi(n+a);let p=ri(u);let f=u-n;let c=f>=180||f>=-180&&f<=0?1:0;let h=new DOMPoint(l+r*Math.sin(i),s+r*-Math.cos(i));let y=new DOMPoint(l+r*Math.sin(p),s+r*-Math.cos(p));let v=new DOMPoint(l-r+2*r*o,s);let x=[];x[\"push\"]({type:\"M\",values:[h[\"x\"],h[\"y\"]]});x[\"push\"]({type:\"A\",values:[r,r,0,c,1,y[\"x\"],y[\"y\"]]});!0===Zt(h,y,v)?x[\"push\"]({type:\"L\",values:[h[\"x\"],h[\"y\"]]}):x.push(((a,o,n)=>{if(!0===Zt(a,o,n))throw new Error(\"Given points are colinear\");{let e=Kt(o,n);let t=Kt(n,a);let l=Kt(a,o);let s=Ut((e*e+t*t-l*l)/(2*e*t));let r=e*t*l/4/(.5*e*t*It(s));return{type:\"A\",values:[r,r,0,+(jt/2>s),+((o.x-a[\"x\"])*(n[\"y\"]-a[\"y\"])-(o.y-a[\"y\"])*(n[\"x\"]-a[\"x\"])<0),o.x,o.y]}}})(y,h,v));x[\"push\"]({type:\"Z\",values:[]});for(let e of x)e.values=e.values.map(e=>te(e,t));return x};const ho=(e,t)=>{let[l,s,r,a,o,i]=e.values;let u=[];if(0===i){u[\"push\"]({type:\"M\",values:[l+r*o,s]});u[\"push\"]({type:\"L\",values:[l+r,s+a]});u[\"push\"]({type:\"L\",values:[l,s+a]});u[\"push\"]({type:\"L\",values:[l+r*o,s]})}else{let n=[{x:l+r*o,y:s},{x:l+r,y:s+a},{x:l,y:s+a}];for(let o=0;o<n.length;o+=1){let e=n[o];let t=n[o+1]||n[0];let l=n[o-1]||n[n.length-1];let s={x:e[\"x\"]+(l[\"x\"]-e[\"x\"])*i,y:e[\"y\"]+(l[\"y\"]-e[\"y\"])*i};let r={x:e[\"x\"]+(t[\"x\"]-e[\"x\"])*i,y:e[\"y\"]+(t[\"y\"]-e[\"y\"])*i};let a={x:e[\"x\"],y:e[\"y\"]};u[\"push\"]({type:0===o?\"M\":\"L\",values:[s[\"x\"],s[\"y\"]]});u[\"push\"]({type:\"Q\",values:[a[\"x\"],a[\"y\"],r[\"x\"],r[\"y\"]]})}}u[\"push\"]({type:\"Z\",values:[]});for(let e of u)e.values=e.values.map(e=>te(e,t));return u};const co=(e,t)=>{let[r,a,o,i,u,p]=e.values;let f=[];if(0===p)for(let s=0;s<u;s+=1){let e=2*Math.PI*(s/u)-Math.PI/2;let t=o*Math.cos(e)+r;let l=i*Math.sin(e)+a;0===s?f.push({type:\"M\",values:[t,l]}):f.push({type:\"L\",values:[t,l]})}else{let n=[];for(let t=0;t<u;t+=1){let e=2*Math.PI*(t/u)-Math.PI/2;n[\"push\"]({x:o*Math.cos(e)+r,y:i*Math.sin(e)+a})}for(let o=0;o<n.length;o+=1){let e=n[o];let t=n[o+1]||n[0];let l=n[o-1]||n[n.length-1];let s={x:e[\"x\"]+(l[\"x\"]-e[\"x\"])*p,y:e[\"y\"]+(l[\"y\"]-e[\"y\"])*p};let r={x:e[\"x\"]+(t.x-e[\"x\"])*p,y:e[\"y\"]+(t.y-e[\"y\"])*p};let a={x:e[\"x\"],y:e[\"y\"]};f[\"push\"]({type:0===o?\"M\":\"L\",values:[s[\"x\"],s[\"y\"]]});f[\"push\"]({type:\"Q\",values:[a[\"x\"],a[\"y\"],r[\"x\"],r[\"y\"]]})}}f[\"push\"]({type:\"Z\",values:[]});for(let e of f)e.values=e.values.map(e=>te(e,t));return f};const po=(e,t)=>{let[r,a,o,n,i,u]=e.values;let p=[];for(let s=0;s<u;s+=1){let e=2*Math.PI*(s/u)-Math.PI/2;let t=o*Math.cos(e)+r;let l=n*Math.sin(e)+a;0===s?p.push({type:\"M\",values:[t,l]}):p.push({type:\"L\",values:[t,l]});e=2*Math.PI*(s/u)+Math.PI/u-Math.PI/2;t=i*o*Math.cos(e)+r;l=i*n*Math.sin(e)+a;p.push({type:\"L\",values:[t,l]})}p[\"push\"]({type:\"Z\",values:[]});for(let e of p)e.values=e.values.map(e=>te(e,t));return p};const uo=(e,t)=>{let[n,i,l,u,p,f,s]=e.values;let c=360/s;let h=c/4;let y=Math.tan(ri(h-f*h))*p;let v=[];for(let o=0;o<s;o+=1){let e=c*o-90;let t=e+h+f*h;let l=e+c-h-f*h;let s=ri(e);let r=ri(t);let a=ri(l);v[\"push\"]({type:0===o?\"M\":\"L\",values:[n+p*Math.cos(s)+Math.sin(s)*y,i+p*Math.sin(s)-Math.cos(s)*y]});v[\"push\"]({type:\"L\",values:[n+p*Math.cos(s)-Math.sin(s)*y,i+p*Math.sin(s)+Math.cos(s)*y]});v[\"push\"]({type:\"L\",values:[n+u*Math.cos(r),i+u*Math.sin(r)]});v[\"push\"]({type:\"A\",values:[u,u,0,0,1,n+u*Math.cos(a),i+u*Math.sin(a)]})}v[\"push\"]({type:\"Z\",values:[]});v[\"push\"]({type:\"M\",values:[n,i-l]});v[\"push\"]({type:\"A\",values:[l,l,0,0,0,n,i+l]});v[\"push\"]({type:\"A\",values:[l,l,0,0,0,n,i-l]});for(let e of v)e.values=e.values.map(e=>te(e,t));return v};const xo=(e,t)=>{let[l,s,r,a,o,n,i]=e.values;n>r&&(n=r);i<0?i=0:i>n&&(i=n);let u=[{type:\"M\",values:[l,s+a/2-o/2]},{type:\"H\",values:[l+r-n+i]},{type:\"L\",values:[l+r-n,s]},{type:\"L\",values:[l+r,s+a/2]},{type:\"L\",values:[l+r-n,s+a]},{type:\"L\",values:[l+r-n+i,s+a/2+o/2]},{type:\"H\",values:[l]},{type:\"V\",values:[s+a/2-o/2]},{type:\"Z\",values:[]}];for(let e of u)e.values=e.values.map(e=>te(e,t));return u};const mo=(e,t)=>{let[l,s,r,a,o,n,i]=e.values;let u=[{type:\"M\",values:[l+r/2-n/2,s]},{type:\"H\",values:[l+r/2+n/2]},{type:\"V\",values:[s+a*i-o/2]},{type:\"H\",values:[l+r]},{type:\"V\",values:[s+a*i+o/2]},{type:\"H\",values:[l+r/2+n/2]},{type:\"V\",values:[s+a]},{type:\"H\",values:[l+r/2-n/2]},{type:\"V\",values:[s+a*i+o/2]},{type:\"H\",values:[l]},{type:\"V\",values:[s+a*i-o/2]},{type:\"H\",values:[l+r/2-n/2]},{type:\"Z\",values:[]}];for(let e of u)e[\"values\"]=e[\"values\"][\"map\"](e=>te(e,t));return u};const go=(e,t)=>{let[r,a,l,s,o,n]=e[\"values\"];let i=30;o<0&&(o=0);n<o+1&&(n=o+1);n-o<i&&(i=n-o);l>=s&&(l=s-.01);let u=l;let p=(s-l)/(n/360)/Math[\"PI\"]/2;let f=o*Math[\"PI\"]/180;let c=f;let h=n*Math[\"PI\"]/180;let y=i*Math[\"PI\"]/180;let v=u+p*f;let x=u+p*c;let d=[];let m={x:r+x*Math[\"cos\"](c),y:a+x*Math[\"sin\"](c)};let g=(p*Math[\"sin\"](f)+(u+p*c)*Math[\"cos\"](f))/(p*Math[\"cos\"](f)-(u+p*c)*Math[\"sin\"](f));let M=g;d[\"push\"]({type:\"M\",values:[m.x,m.y]});do{f+y+y>h&&(y=h-c);f=c;c+=y;v=x;x=u+p*c;m.x=r+x*Math[\"cos\"](c);m.y=a+x*Math[\"sin\"](c);let e=u+p*c;g=M;M=(p*Math[\"sin\"](c)+e*Math[\"cos\"](c))/(p*Math[\"cos\"](c)-e*Math[\"sin\"](c));let t=-(g*v*Math[\"cos\"](f)-v*Math[\"sin\"](f));let l=(-(M*x*Math[\"cos\"](c)-x*Math[\"sin\"](c))-t)/(g-M);let s={x:l,y:g*l+t};s[\"x\"]+=r;s[\"y\"]+=a;d[\"push\"]({type:\"Q\",values:[s[\"x\"],s[\"y\"],m.x,m.y]})}while(f+y<h);{let n=(new DOMMatrix)[\"translateSelf\"](r,a)[\"rotateSelf\"](-90)[\"translateSelf\"](-r,-a);for(let o of d)if(\"M\"===o[\"type\"]){let[e,t]=o[\"values\"];let l=new DOMPoint(e,t)[\"matrixTransform\"](n);o[\"values\"]=[l[\"x\"],l[\"y\"]]}else{if(\"Q\"===o[\"type\"]){let[e,t,l,s]=o[\"values\"];let r=new DOMPoint(e,t)[\"matrixTransform\"](n);let a=new DOMPoint(l,s)[\"matrixTransform\"](n);o[\"values\"]=[r[\"x\"],r[\"y\"],a[\"x\"],a[\"y\"]]}}}for(let e of d)e[\"values\"]=e[\"values\"][\"map\"](e=>te(e,t));return d};const fo=(e,t,l,s,r,a)=>{let o=2*Math.PI*(e/a)-Math.PI/2;let n=s*Math.cos(o)+t;let i=r*Math.sin(o)+l;return new DOMPoint(n,i)};exports.fo=fo;const Ve=(t,l)=>{let s=[];let r=[];for(let e of l){if(Oe.has(e.type)){r.push(e)}else{if(\"M\"===e.type){if(r.length>0){s.push(r);r=[]}r.push(e)}else{if(\"Z\"===e.type){r.push(e);s.push(r);r=[]}}}}r.length>0&&s.push(r);return s.find(e=>e.includes(t))||null};exports.Ve=Ve;const He=(e,s)=>{let r=0;let a=0;let t=$e(e);let o=-1;let n=-1;for(let l of t){o+=1;let t=-1;for(let e of l){n+=1;t+=1;if(n===s){r=o;a=t;break}}}return[r,a]};exports.He=He;const We=(e,t)=>{let l=Ve(e,t);return\"Z\"===l[l[\"length\"]-1][\"type\"]};exports.We=We;const Ye=(e,t,a=2)=>{let o=\"sharp\";if(e&&t&&\"C\"===e[\"type\"]&&\"C\"===t[\"type\"]){let l=new DOMPoint(e[\"values\"][4],e[\"values\"][5]);let s=new DOMPoint(t[\"values\"][0],t[\"values\"][1]);let r=new DOMPoint(e[\"values\"][2],e[\"values\"][3]);if(!1===qt(l,s)&&!1===qt(l,r)&&!0===Zt(s,l,r,a)){let e=new ee_1.default(l,s);let t=new ee_1.default(l,r);o=te(e[\"length\"],2)===te(t[\"length\"],2)?\"symmetric-smooth\":\"smooth\"}}return o};exports.Ye=Ye;const qe=(e,t,l=!1)=>{let s=new DOMPoint(t[\"values\"][4],t[\"values\"][5]);let r=new DOMPoint(e[\"values\"][0],e[\"values\"][1]);let a=new DOMPoint(t[\"values\"][2],t[\"values\"][3]);let o=new ee_1.default(s,r);let n=new ee_1.default(s,a);let i=o[\"getOppositeVector\"]();!1===l&&(i[\"length\"]=n[\"length\"]);t[\"values\"][2]=s[\"x\"]+i[\"x\"];t[\"values\"][3]=s[\"y\"]+i[\"y\"]};exports.qe=qe;const Xe=(e,t,l=!1)=>{let s=new DOMPoint(e[\"values\"][4],e[\"values\"][5]);let r=new DOMPoint(e[\"values\"][2],e[\"values\"][3]);let a=new DOMPoint(t[\"values\"][0],t[\"values\"][1]);let o=new ee_1.default(s,r);let n=new ee_1.default(s,a);let i=o[\"getOppositeVector\"]();!1===l&&(i[\"length\"]=n[\"length\"]);t[\"values\"][0]=s[\"x\"]+i[\"x\"];t[\"values\"][1]=s[\"y\"]+i[\"y\"]};exports.Xe=Xe;const Ze=(e,t,l)=>{let s;\"M\"===e[\"type\"]||\"L\"===e[\"type\"]?s=new DOMPoint(e[\"values\"][0],e[\"values\"][1]):\"C\"===e[\"type\"]&&(s=new DOMPoint(e[\"values\"][4],e[\"values\"][5]));let r=new DOMPoint(l[\"values\"][4],l[\"values\"][5]);let a=new DOMPoint(t[\"values\"][4],t[\"values\"][5]);let o=new ee_1.default(a,s);let n=new ee_1.default(a,r);let i=o[\"length\"]/n[\"length\"];let u=new ee_1.default(i*n[\"x\"]-o[\"x\"],i*n[\"y\"]-o[\"y\"])[\"normalize\"]();t[\"values\"][2]=a[\"x\"]+-u[\"x\"]*(o[\"length\"]/3);t[\"values\"][3]=a[\"y\"]+-u[\"y\"]*(o[\"length\"]/3);l[\"values\"][0]=a[\"x\"]+u[\"x\"]*(n[\"length\"]/3);l[\"values\"][1]=a[\"y\"]+u[\"y\"]*(n[\"length\"]/3)};exports.Ze=Ze;const Ke=e=>{let a=null;for(let r of e){if(\"L\"===r[\"type\"]){let[e,t]=r[\"values\"];let l=\"C\"===a[\"type\"]?a[\"values\"][4]:a[\"values\"][0];let s=\"C\"===a[\"type\"]?a[\"values\"][5]:a[\"values\"][1];r[\"type\"]=\"C\";r[\"values\"]=[l,s,e,t,e,t]}a=r}};exports.Ke=Ke;const Qe=e=>{let u=null;for(let i of e){if(\"C\"===i[\"type\"]){let[e,t,l,s,r,a]=i[\"values\"];let o=\"C\"===u[\"type\"]?u[\"values\"][4]:u[\"values\"][0];let n=\"C\"===u[\"type\"]?u[\"values\"][5]:u[\"values\"][1];if(e===o&&t===n&&l===r&&s===a){i[\"type\"]=\"L\";i[\"values\"]=[r,a]}}u=i}};exports.Qe=Qe;const Je=(s,t)=>{let r=s[\"getTotalLength\"]();let a=r/s[\"getPathData\"]()[\"length\"]*.125;let o=null;let n=null;let i=Infinity;let u=e=>Math[\"pow\"](e[\"x\"]-t[\"x\"],2)+Math[\"pow\"](e[\"y\"]-t[\"y\"],2);for(let l=0;l<=r;l+=a){let e=DOMPoint[\"fromPoint\"](s[\"getPointAtLength\"](l));let t=u(e);if(t<i){o=e;n=l;i=t}}for(a*=.5;a>.5;){let e=n-a;let t=DOMPoint[\"fromPoint\"](s[\"getPointAtLength\"](e));let l=u(t);if(e>=0&&l<i){o=t;n=e;i=l}else{let e=n+a;let t=DOMPoint[\"fromPoint\"](s[\"getPointAtLength\"](e));let l=u(t);if(e<=r&&l<i){o=t;n=e;i=l}else{a*=.5}}}return[o,n,i]};exports.Je=Je;const ke=(e,t=!1,l=.5)=>{let s;e[0]instanceof DOMPoint&&(e=e[\"map\"](e=>[e[\"x\"],e[\"y\"]]));s=t?Se(e,l):Ce(e,l);return s};exports.ke=ke;const Ce=(l,s)=>{let i;let u;let p;let f;let c;let h;let y;let v;let x;let d;let m;let g;let M;let r;let b=[];let a=!1;let w=!1;let o=(o,n)=>{if(M){let e=c-o;let t=h-n;g=Math[\"pow\"](e*e+t*t,s);x=Math[\"sqrt\"](g)}if(0===M){M=1;if(r){w=!0;b[\"push\"]({type:\"L\",values:[o,n]})}else{w=!0;b[\"push\"]({type:\"M\",values:[o,n]})}}else{if(1===M)M=2;else{2===M&&(M=3);let l=p,s=f,r=c,a=h;if(y>1e-12){let e=2*d+3*y*v+m;let t=3*y*(y+v);l=(l*e-i*m+c*d)/t;s=(s*e-u*m+h*d)/t}if(x>1e-12){let e=2*g+3*x*v+m;let t=3*x*(x+v);r=(r*e+p*g-o*m)/t;a=(a*e+f*g-n*m)/t}w=!0;b[\"push\"]({type:\"C\",values:[l,s,r,a,c,h]})}}y=v;v=x;d=m;m=g;i=p;p=c;c=o;u=f;f=h;h=n};for(let e=0,t=l[\"length\"];e<=t;e+=1){if(e<t){if(!1===a){a=!0;y=0;v=0;x=0;d=0;m=0;g=0;M=0}o(l[e][0],l[e][1])}else{if(!0===a){a=!1;if(2===M){w=!0;b[\"push\"]({type:\"L\",values:[c,h]})}else{3===M&&o(c,h);(r||0!==r&&1===M)&&w&&b[\"push\"]({type:\"Z\",values:[]});r=1-r}}}}return b};const Se=(l,s=.5)=>{let i;let u;let p;let f;let c;let h;let r;let a;let y;let v;let x;let d;let m;let g;let M;let b;let w;let P;let A;let S=[];let o=!1;let n=(o,n)=>{if(A){let e=c-o;let t=h-n;P=Math[\"pow\"](e*e+t*t,s);M=Math[\"sqrt\"](P)}if(0===A){A=1;r=o;a=n}else{if(1===A){A=2;y=o;v=n;S[\"push\"]({type:\"M\",values:[y,v]})}else{if(2===A){A=3;x=o;d=n}else{let l=p;let s=f;let r=c;let a=h;if(m>1e-12){let e=2*b+3*m*g+w;let t=3*m*(m+g);l=(l*e-i*w+c*b)/t;s=(s*e-u*w+h*b)/t}if(M>1e-12){let e=2*P+3*M*g+w;let t=3*M*(M+g);r=(r*e+p*P-o*w)/t;a=(a*e+f*P-n*w)/t}S[\"push\"]({type:\"C\",values:[l,s,r,a,c,h]})}}}m=g;g=M;b=w;w=P;i=p;p=c;c=o;u=f;f=h;h=n};for(let e=0,t=(l=xe(l,!0))[\"length\"];e<=t;e+=1){if(e<t){if(!1===o){o=!0;m=0;g=0;M=0;b=0;w=0;P=0;A=0;n(l[e][0],l[e][1])}}else{if(!0===o){o=!1;if(1===A){S[\"push\"]({type:\"M\",values:[r,a]},{type:\"Z\",values:[]})}else{if(2===A){S[\"push\"]({type:\"L\",values:[r,a]},{type:\"Z\",values:[]})}else{if(3===A){n(r,a);n(y,v);n(x,d)}}}}}}return S};const Pe=(l,e=\"hex\")=>{let s=2166136261;for(let e=0,t=l[\"length\"];e<t;e+=1){s^=l[\"charCodeAt\"](e);s+=(s<<1)+(s<<4)+(s<<7)+(s<<8)+(s<<24)}s>>>=0;\"hex\"===e&&(s=(\"0000000\"+s[\"toString\"](16))[\"substr\"](-8));return s};const Ae=(o,n,i=null)=>{if(!1===(void 0!==n[\"find\"](e=>Ee[\"has\"](e[\"type\"])))){if(null!==i){for(let e of n)e[\"values\"]=e[\"values\"][\"map\"](e=>te(e,i))}o[\"setPathData\"](n);o[\"removeAttribute\"](\"data-bx-d\")}else{let e=Re(n,!1);let t=n;if(null!==i){e[\"forEach\"](e=>e[\"values\"]=e[\"values\"][\"map\"](e=>te(e,i)));t[\"forEach\"](e=>e[\"values\"]=e[\"values\"][\"map\"](e=>te(e,i)))}let l=Ne(e);let s=Ne(t);let r=1;let a=Pe(l+\" / \"+s+\" \"+r)[\"toString\"](32);o[\"setAttribute\"](\"d\",l);o[\"setAttribute\"](\"data-bx-d\",s+\" \"+r+\"@\"+a)}};exports.Ae=Ae;const $e=t=>{let l=[];let s=[];for(let e of t){if(\"M\"===e[\"type\"]||\"m\"===e[\"type\"]){if(s[0]){l[\"push\"](s);s=[]}s[\"push\"](e)}else{if(\"Z\"===e[\"type\"]||\"z\"===e[\"type\"]){s[\"push\"](e);l[\"push\"](s);s=[]}else{s[\"push\"](e)}}}s[0]&&l[\"push\"](s);return l};exports.$e=$e;const Le=t=>{let a=!1;if(t[\"hasAttribute\"](\"data-bx-d\")){let r=t[\"getAttribute\"](\"d\"),e=t[\"getAttribute\"](\"data-bx-d\")[\"trim\"]()[\"split\"](/[\\s+,]+/);if(e.length>=3){let l=e[\"slice\"](0,e.length-1),s=e[e.length-1];if(s[\"includes\"](\"@\")){let[e,t]=s[\"split\"](\"@\");t===Pe(r+\" / \"+l[\"join\"](\" \")+\" \"+e)[\"toString\"](32)&&(a=!0)}}}return a};const Re=(a,e=!1)=>{var t,l,s;let o=[];let n=[];{let t=[];let l=null;let s=0;let r=0;for(let e of a){if(\"M\"===e[\"type\"]||\"m\"===e[\"type\"]){if(t[0]){n[\"push\"](t);t=[]}t[\"push\"](e);s=e[\"values\"][0];r=e[\"values\"][1]}else{if(\"Z\"===e[\"type\"]||\"z\"===e[\"type\"]){t[\"push\"](e);n[\"push\"](t);t=[]}else{\"Z\"!==l&&\"z\"!==l||t[\"push\"]({type:\"M\",values:[s,r]});t[\"push\"](e)}}l=e[\"type\"]}t[0]&&n[\"push\"](t)}for(let r of n)if(\"R\"===((t=r[1])===null||t===void 0?void 0:t[\"type\"])){if(e)o[\"push\"](...r);else{let t=[];let l=!1;for(let e of r)\"M\"===e[\"type\"]||\"R\"===e[\"type\"]?t[\"push\"]([e[\"values\"][0],e[\"values\"][1]]):\"Z\"===e[\"type\"]&&(l=!0);o[\"push\"](...ke(t,l))}}else{if(\"U\"===((l=r[1])===null||l===void 0?void 0:l[\"type\"])){if(e)o[\"push\"](...r);else{let t=[];let l=!1;for(let e of r)\"M\"===e[\"type\"]||\"U\"===e[\"type\"]?t[\"push\"]([e[\"values\"][0],e[\"values\"][1]]):\"Z\"===e[\"type\"]&&(l=!0);o[\"push\"](...we(t,l))}}else{if(\"N\"===((s=r[1])===null||s===void 0?void 0:s[\"type\"])){}else{let y=[];let v=[];{let n=null;let i=null;let l=null;let s=null;for(let o of r){let e=o[\"type\"];if(\"M\"===e){let e=o[\"values\"][0];let t=o[\"values\"][1];y[\"push\"]({type:\"M\",values:[e,t]});l=e;s=t;n=e;i=t}else{if(\"m\"===e){let e=n+o[\"values\"][0];let t=i+o[\"values\"][1];y[\"push\"]({type:\"M\",values:[e,t]});l=e;s=t;n=e;i=t}else{if(\"L\"===e){let e=o[\"values\"][0];let t=o[\"values\"][1];y[\"push\"]({type:\"L\",values:[e,t]});n=e;i=t}else{if(\"l\"===e){let e=n+o[\"values\"][0];let t=i+o[\"values\"][1];y[\"push\"]({type:\"L\",values:[e,t]});n=e;i=t}else{if(\"C\"===e){let e=o[\"values\"][0];let t=o[\"values\"][1];let l=o[\"values\"][2];let s=o[\"values\"][3];let r=o[\"values\"][4];let a=o[\"values\"][5];y[\"push\"]({type:\"C\",values:[e,t,l,s,r,a]});n=r;i=a}else{if(\"c\"===e){let e=n+o[\"values\"][0];let t=i+o[\"values\"][1];let l=n+o[\"values\"][2];let s=i+o[\"values\"][3];let r=n+o[\"values\"][4];let a=i+o[\"values\"][5];y[\"push\"]({type:\"C\",values:[e,t,l,s,r,a]});n=r;i=a}else{if(\"Q\"===e){let e=o[\"values\"][0];let t=o[\"values\"][1];let l=o[\"values\"][2];let s=o[\"values\"][3];y[\"push\"]({type:\"Q\",values:[e,t,l,s]});n=l;i=s}else{if(\"q\"===e){let e=n+o[\"values\"][0];let t=i+o[\"values\"][1];let l=n+o[\"values\"][2];let s=i+o[\"values\"][3];y[\"push\"]({type:\"Q\",values:[e,t,l,s]});n=l;i=s}else{if(\"A\"===e){let e=o[\"values\"][5];let t=o[\"values\"][6];y[\"push\"]({type:\"A\",values:[o[\"values\"][0],o[\"values\"][1],o[\"values\"][2],o[\"values\"][3],o[\"values\"][4],e,t]});n=e;i=t}else{if(\"a\"===e){let e=n+o[\"values\"][5];let t=i+o[\"values\"][6];y[\"push\"]({type:\"A\",values:[o[\"values\"][0],o[\"values\"][1],o[\"values\"][2],o[\"values\"][3],o[\"values\"][4],e,t]});n=e;i=t}else{if(\"H\"===e){let e=o[\"values\"][0];y[\"push\"]({type:\"H\",values:[e]});n=e}else{if(\"h\"===e){let e=n+o[\"values\"][0];y[\"push\"]({type:\"H\",values:[e]});n=e}else{if(\"V\"===e){let e=o[\"values\"][0];y[\"push\"]({type:\"V\",values:[e]});i=e}else{if(\"v\"===e){let e=i+o[\"values\"][0];y[\"push\"]({type:\"V\",values:[e]});i=e}else{if(\"S\"===e){let e=o[\"values\"][0];let t=o[\"values\"][1];let l=o[\"values\"][2];let s=o[\"values\"][3];y[\"push\"]({type:\"S\",values:[e,t,l,s]});n=l;i=s}else{if(\"s\"===e){let e=n+o[\"values\"][0];let t=i+o[\"values\"][1];let l=n+o[\"values\"][2];let s=i+o[\"values\"][3];y[\"push\"]({type:\"S\",values:[e,t,l,s]});n=l;i=s}else{if(\"T\"===e){let e=o[\"values\"][0];let t=o[\"values\"][1];y[\"push\"]({type:\"T\",values:[e,t]});n=e;i=t}else{if(\"t\"===e){let e=n+o[\"values\"][0];let t=i+o[\"values\"][1];y[\"push\"]({type:\"T\",values:[e,t]});n=e;i=t}else{if(!(\"Z\"!==e&&\"z\"!==e)){y[\"push\"]({type:\"Z\",values:[]});n=l;i=s}}}}}}}}}}}}}}}}}}}}}{let u=0;let p=0;let l=0;let s=0;let f=null;let c=null;let h=null;for(let e=0;e<y[\"length\"];e+=1){let i=y[e];if(\"M\"===i[\"type\"]){let e=i[\"values\"][0];let t=i[\"values\"][1];v[\"push\"]({type:\"M\",values:[e,t]});l=e;s=t;u=e;p=t}else{if(\"C\"===i[\"type\"]){let e=i[\"values\"][0];let t=i[\"values\"][1];let l=i[\"values\"][2];let s=i[\"values\"][3];let r=i[\"values\"][4];let a=i[\"values\"][5];v[\"push\"]({type:\"C\",values:[e,t,l,s,r,a]});f=l;c=s;u=r;p=a}else{if(\"L\"===i[\"type\"]){let e=i[\"values\"][0];let t=i[\"values\"][1];v[\"push\"]({type:\"L\",values:[e,t]});u=e;p=t}else{if(\"H\"===i[\"type\"]){let e=i[\"values\"][0];v[\"push\"]({type:\"L\",values:[e,p]});u=e}else{if(\"V\"===i[\"type\"]){let e=i[\"values\"][0];v[\"push\"]({type:\"L\",values:[u,e]});p=e}else{if(\"S\"===i[\"type\"]){let e;let t;let l=i[\"values\"][0];let s=i[\"values\"][1];let r=i[\"values\"][2];let a=i[\"values\"][3];if(\"C\"===h||\"S\"===h){e=u+(u-Number(f));t=p+(p-Number(c))}else{e=u;t=p}v[\"push\"]({type:\"C\",values:[e,t,l,s,r,a]});f=l;c=s;u=r;p=a}else{if(\"T\"===i[\"type\"]){let e;let t;let l=i[\"values\"][0];let s=i[\"values\"][1];if(\"Q\"===h||\"T\"===h){e=u+(u-Number(f));t=p+(p-Number(c))}else{e=u;t=p}let r=u+2*(e-u)/3;let a=p+2*(t-p)/3;let o=l+2*(e-l)/3;let n=s+2*(t-s)/3;v[\"push\"]({type:\"C\",values:[r,a,o,n,l,s]});f=e;c=t;u=l;p=s}else{if(\"Q\"===i[\"type\"]){let e=i[\"values\"][0];let t=i[\"values\"][1];let l=i[\"values\"][2];let s=i[\"values\"][3];let r=u+2*(e-u)/3;let a=p+2*(t-p)/3;let o=l+2*(e-l)/3;let n=s+2*(t-s)/3;v[\"push\"]({type:\"C\",values:[r,a,o,n,l,s]});f=e;c=t;u=l;p=s}else{if(\"A\"===i[\"type\"]){let e=Math[\"abs\"](i[\"values\"][0]);let t=Math[\"abs\"](i[\"values\"][1]);let l=i[\"values\"][2];let s=i[\"values\"][3];let r=i[\"values\"][4];let a=i[\"values\"][5];let o=i[\"values\"][6];if(0===e||0===t){v[\"push\"]({type:\"C\",values:[u,p,a,o,a,o]});u=a;p=o}else{if(u!==a||p!==o){ue(u,p,a,o,e,t,l,s,r)[\"forEach\"](function(e){v[\"push\"]({type:\"C\",values:e})});u=a;p=o}}}else{if(\"Z\"===i[\"type\"]){v[\"push\"](i);u=l;p=s}}}}}}}}}}h=i[\"type\"]}}o[\"push\"](...v)}}}return o};exports.Re=Re;const Ie=l=>{let e=(l=structuredClone(l))[0];let s=null;let r=[];for(let t=1;t<l[\"length\"];t+=1){let e=l[t];\"Z\"===e[\"type\"]?s=e:r[\"push\"](e)}let n=e.values[0];let i=e.values[1];if(\"C\"===r[r.length-1][\"type\"]){e.values[0]=r[r.length-1].values[4];e.values[1]=r[r.length-1].values[5]}else{e.values[0]=r[r.length-1].values[0];e.values[1]=r[r.length-1].values[1]}for(let o of r)if(\"L\"===o[\"type\"]||\"R\"===o[\"type\"]||\"U\"===o[\"type\"]||\"N\"===o[\"type\"]){let[e,t]=o[\"values\"];o[\"values\"]=[n,i];n=e;i=t}else{if(\"C\"===o[\"type\"]){let[e,t,l,s,r,a]=o[\"values\"];o[\"values\"]=[l,s,e,t,n,i];n=r;i=a}}r[\"reverse\"]();let t=[];t[\"push\"](e);for(let e of r)t[\"push\"](e);s&&t[\"push\"](s);return t};exports.Ie=Ie;let ue=(u,p,f,c,h,y,s,v,x,e)=>{let d;let m;let g;let M;let b=ri(s);let a=[];let w=(e,t,l)=>({x:e*Math.cos(l)-t*Math.sin(l),y:e*Math.sin(l)+t*Math.cos(l)});if(e){d=e[0];m=e[1];g=e[2];M=e[3]}else{let e=w(u,p,-b);u=e[\"x\"];p=e[\"y\"];let t,l=w(f,c,-b),s=(u-(f=l[\"x\"]))/2,r=(p-(c=l[\"y\"]))/2,a=s*s/(h*h)+r*r/(y*y);if(a>1){a=Math.sqrt(a);h*=a;y*=a}t=v===x?-1:1;let o=h*h;let n=y*y;let i=t*Math.sqrt(Math.abs((o*n-o*r*r-n*s*s)/(o*r*r+n*s*s)));g=i*h*r/y+(u+f)/2;M=i*-y*s/h+(p+c)/2;d=Math.asin(parseFloat(((p-M)/y).toFixed(9)));m=Math.asin(parseFloat(((c-M)/y).toFixed(9)));u<g&&(d=Math.PI-d);f<g&&(m=Math.PI-m);d<0&&(d=2*Math.PI+d);m<0&&(m=2*Math.PI+m);x&&d>m&&(d-=2*Math.PI);!x&&m>d&&(m-=2*Math.PI)}let t=m-d;if(Math.abs(t)>120*Math.PI/180){let e=m;let t=f;let l=c;m=x&&m>d?d+120*Math.PI/180*1:d+120*Math.PI/180*-1;f=g+h*Math.cos(m);c=M+y*Math.sin(m);a=ue(f,c,t,l,h,y,s,0,x,[m,e,g,M])}t=m-d;let l=Math.cos(d);let r=Math.sin(d);let o=Math.cos(m);let n=Math.sin(m);let i=Math.tan(t/4);let P=4/3*h*i;let A=4/3*y*i;let S=[u,p];let N=[u+P*r,p-A*l];let O=[f+P*n,c-A*o];let L=[f,c];N[0]=2*S[0]-N[0];N[1]=2*S[1]-N[1];if(e)return[N,O,L][\"concat\"](a);{a=[N,O,L][\"concat\"](a);let r=[];for(let s=0;s<a[\"length\"];s+=3){let e=w(a[s][0],a[s][1],b);let t=w(a[s+1][0],a[s+1][1],b);let l=w(a[s+2][0],a[s+2][1],b);r[\"push\"]([e[\"x\"],e[\"y\"],t[\"x\"],t[\"y\"],l[\"x\"],l[\"y\"]])}return r}};const xe=(e,t=!1)=>t?e[\"unshift\"](e[\"pop\"]()):e[\"push\"](e[\"shift\"]());const me=(t,l,e=!1)=>{if(t[\"length\"]!==l[\"length\"])return!1;if(e)for(let e in t){if(t[e]!==l[e])return!1}else{for(let e=0;e<t[\"length\"];e+=1)if(!l[\"includes\"](t[e]))return!1;for(let e=0;e<l[\"length\"];e+=1)if(!t[\"includes\"](l[e]))return!1}return!0};exports.me=me;const fe=e=>[...new Set(e)];const we=(e,t=!1)=>{let l;e[0]instanceof DOMPoint&&(e=e[\"map\"](e=>[e[\"x\"],e[\"y\"]]));l=t?ye(e):ve(e);return l};const ve=l=>{let s;let r;let a;let o;let n;let i;let u=[];let p=!1,f=!1;var c;var h;for(let e=0,t=l[\"length\"];e<=t;e+=1){if(e<t){if(!1===p){p=!0;s=0}c=l[e][0];h=l[e][1];if(0===s){s=1;f=!0;r?u[\"push\"]({type:\"L\",values:[c,h]}):u[\"push\"]({type:\"M\",values:[c,h]})}else{if(1===s){s=2}else{if(2===s){s=3;f=!0;u[\"push\"]({type:\"L\",values:[(5*a+n)/6,(5*o+i)/6]},{type:\"C\",values:[(2*a+n)/3,(2*o+i)/3,(a+2*n)/3,(o+2*i)/3,(a+4*n+c)/6,(o+4*i+h)/6]})}else{f=!0;u[\"push\"]({type:\"C\",values:[(2*a+n)/3,(2*o+i)/3,(a+2*n)/3,(o+2*i)/3,(a+4*n+c)/6,(o+4*i+h)/6]})}}}a=n;o=i;n=c;i=h}else{if(!0===p){p=!1;if(3===s){f=!0;u[\"push\"]({type:\"C\",values:[(2*a+n)/3,(2*o+i)/3,(a+2*n)/3,(o+2*i)/3,(a+4*n+n)/6,(o+4*i+i)/6]},{type:\"L\",values:[n,i]})}else{if(2===s){f=!0;u[\"push\"]({type:\"L\",values:[n,i]})}}(r||0!==r&&1===s)&&f&&u[\"push\"]({type:\"Z\",values:[]});r=1-r}}}return u};const ye=l=>{let s;let r;let a;let o;let n;let i;let u;let p;let f;let c;let h;let y=[];let v=!1;let x=(e,t)=>{if(0===s){s=1;i=e;u=t}else{if(1===s){s=2;p=e;f=t}else{if(2===s){s=3;c=e;h=t;y[\"push\"]({type:\"M\",values:[(r+4*o+e)/6,(a+4*n+t)/6]})}else{y[\"push\"]({type:\"C\",values:[(2*r+o)/3,(2*a+n)/3,(r+2*o)/3,(a+2*n)/3,(r+4*o+e)/6,(a+4*n+t)/6]})}}}r=o;a=n;o=e;n=t};for(let e=0,t=(l=xe(l,!0))[\"length\"];e<=t;e+=1){if(e<t){if(!1===v){v=!0;s=0}x(l[e][0],l[e][1])}else{if(!0===v){v=!1;if(1===s){y[\"push\"]({type:\"M\",values:[i,u]});y[\"push\"]({type:\"Z\",values:[]})}else{if(2===s){y[\"push\"]({type:\"M\",values:[(i+2*p)/3,(u+2*f)/3]});y[\"push\"]({type:\"L\",values:[(p+2*i)/3,(f+2*u)/3]});y[\"push\"]({type:\"Z\",values:[]})}else{if(3===s){x(i,u);x(p,f);x(c,h)}}}}}}return y};const ze=new Set([\"M\",\"Z\",\"L\",\"C\",\"R\",\"U\",\"N\"]);const Oe=new Set([\"L\",\"C\",\"Q\",\"A\",\"H\",\"V\",\"S\",\"T\",\"R\",\"U\",\"N\"]);const Ee=new Set([\"R\",\"U\",\"N\"]);const Te=(e,t=!0)=>{let l=[];if(\"path\"===e[\"localName\"]){if(!1===t)l=tt(e[\"getPathData\"]({normalize:!0}));else{let r=void 0;if(e[\"hasAttribute\"](\"data-bx-d\")){let s=e[\"getAttribute\"](\"data-bx-d\")[\"trim\"]()[\"split\"](/[\\s+,]+/);if(s.length>=3){if(s[s.length-1][\"includes\"](\"@\")?s[s.length-1]:null){let l=void 0;r=[];for(let t=0;t<s.length-1;t+=1){let e=s[t];if(ze[\"has\"](e)){l={type:e,values:[]};r[\"push\"](l)}else{l[\"values\"][\"push\"](parseFloat(e))}}}}}l=r||tt(e.getPathData({normalize:!0}))}}else[\"circle\",\"ellipse\",\"line\",\"polygon\",\"polyline\",\"rect\"].includes(e.localName)&&(l=e.getPathData({normalize:!0}));return l};exports.Te=Te;const tt=t=>{if(!t.find(e=>\"C\"===e.type||\"L\"===e.type))return[];let l=[];let s=null;let r=0;let a=0;let o=0;let n=0;for(let e of t){if(\"M\"===e.type){\"M\"===s&&l.pop();l.push(e);r=e.values[0];a=e.values[1];o=e.values[0];n=e.values[1]}else{if(\"L\"===e[\"type\"]){if(\"Z\"===s)l[\"push\"]({type:\"M\",values:[o,n]});else{if(e[\"values\"][0]===r&&e[\"values\"][1]===a)continue}l[\"push\"](e);r=e[\"values\"][0];a=e[\"values\"][1]}else{if(\"C\"===e[\"type\"]){\"Z\"===s&&l[\"push\"]({type:\"M\",values:[o,n]});l[\"push\"](e);r=e[\"values\"][4];a=e[\"values\"][5]}else{r===o&&a===n||l[\"push\"]({type:\"L\",values:[o,n]});l[\"push\"](e);r=o;a=n}}}s=e[\"type\"]}return l};const ti=e=>{let t=Yt[\"createSVGPoint\"]();t[\"x\"]=e[\"x\"];t[\"y\"]=e[\"y\"];return t};exports.ti=ti;const il=(e,t)=>{let l=$t(new ee_1.default(e[1]),new ee_1.default(e[0]));let s=$t(new ee_1.default(e[e[\"length\"]-3]),new ee_1.default(e[e[\"length\"]-2]));l=l[\"normalize\"]();s=s[\"normalize\"]();return sl(e,0,e[\"length\"]-1,l,s,t)};exports.il=il;let sl=(n,i,u,p,f,s)=>{if(u-i===1){let e=n[i];let t=n[u];let l=Kt(e,t)/3;let s=new ee_1.default(e);let r=new ee_1.default(t);let a=Lt(s,p[\"scale\"](l));let o=Lt(r,f[\"scale\"](l));return[[e,new DOMPoint(a[\"x\"],a[\"y\"]),new DOMPoint(o[\"x\"],o[\"y\"]),t]]}let r;let a=ol(n,i,u);let o=Math.max(s,s*s);for(let e=0;e<=4;e+=1){let e=nl(n,i,u,a,p,f);let[t,l]=hl(n,i,u,e,a);if(t<s)return[e];r=l;if(t>=o)break;al(n,i,u,a,e);o=t}let e=$t(new ee_1.default(n[r-1]),new ee_1.default(n[r]));let t=$t(new ee_1.default(n[r]),new ee_1.default(n[r+1]));let l=Lt(e,t)[\"multiply\"](.5)[\"normalize\"]();let c=sl(n,i,r,p,l,s);let h=sl(n,r,u,l[\"multiply\"](-1),f,s);return c[\"concat\"](h)};const nl=(f,c,e,h,y,v)=>{let t=f[c];let l=f[e];let x=new ee_1.default(t);let d=new ee_1.default(l);let m=[[0,0],[0,0]];let g=[0,0];let s=e-c+1;for(let p=0;p<s;p+=1){let e=h[p];let t=1-e;let l=3*e*t;let s=t*t*t;let r=l*t;let a=l*e;let o=e*e*e;let n=y[\"scale\"](r);let i=v[\"scale\"](a);m[0][0]+=At(n,n);m[0][1]+=At(n,i);m[1][0]=m[0][1];m[1][1]+=At(i,i);let u=new ee_1.default(f[c+p]);u=$t(u,x[\"multiply\"](s+r));u=$t(u,d[\"multiply\"](a+o));g[0]+=At(n,u);g[1]+=At(i,u)}let r,a,o=m[0][0]*m[1][1]-m[1][0]*m[0][1],n=1e-6;if(Math.abs(o)>n){let e=m[0][0]*g[1]-m[1][0]*g[0];r=(g[0]*m[1][1]-g[1]*m[0][1])/o;a=e/o}else{let e=m[0][0]+m[0][1];let t=m[1][0]+m[1][1];r=a=Math.abs(e)>n?g[0]/e:Math.abs(t)>n?g[1]/t:0}let i=Kt(l,t);n*=i;(r<n||a<n)&&(r=a=i/3);let u=Lt(x,y[\"scale\"](r));let p=Lt(d,v[\"scale\"](a));return[t,new DOMPoint(u.x,u.y),new DOMPoint(p[\"x\"],p[\"y\"]),l]};const ol=(t,l,s)=>{let r=[0];for(let e=l+1;e<=s;e+=1)r[e-l]=r[e-l-1]+Kt(t[e],t[e-1]);for(let e=1,t=s-l;e<=t;e+=1)r[e]/=r[s-l];return r};const al=(t,l,s,r,a)=>{let o=[];for(let e=l;e<=s;e+=1)o[e-l]=ll(a,t[e],r[e-l]);return o};const ll=(l,e,t)=>{let s=[];let r=[];for(let t=0;t<=2;t+=1){let e=$t(new ee_1.default(l[t+1]),new ee_1.default(l[t]));s[t]=e[\"multiply\"](3)}for(let t=0;t<=1;t++){let e=$t(s[t+1],s[t]);r[t]=e[\"multiply\"](2)}let a=rl(3,l,t);let o=rl(2,s,t);let n=rl(1,r,t);let i=$t(a,new ee_1.default(e));let u=At(o,o)+At(i,n);return Math.abs(u)<1e-6?t:t-At(i,o)/u};const rl=(l,e,s)=>{let r=e[\"map\"](e=>new ee_1.default(e));for(let t=1;t<=l;t+=1)for(let e=0;e<=l-t;e+=1)r[e]=Lt(r[e][\"multiply\"](1-s),r[e+1][\"multiply\"](s));return r[0]};const hl=(l,s,e,r,a)=>{let o=Math.floor((e-s+1)/2);let n=0;for(let t=s+1;t<e;t++){let e=$t(rl(3,r,a[t-s]),new ee_1.default(l[t]))[\"length\"];if(e>=n){n=e;o=t}}return[n,o]};const Qd=e=>!/[^\\t\\n\\r ]/[\"test\"](e);exports.Qd=Qd;const Xd=t=>{for(let e=t;e;e=e[\"parentNode\"])if(e instanceof ShadowRoot||e===window[\"document\"])return e};exports.Xd=Xd;const Xl=l=>new Promise(e=>{let t=new FileReader;t[\"readAsDataURL\"](l);t[\"onloadend\"]=()=>{e(t[\"result\"])}});exports.Xl=Xl;const Il=s=>{let t=s[\"querySelectorAll\"](\"textPath\");s[\"querySelectorAll\"](\"tspan\");let r=t[\"length\"]>0?t[0]:null;{let e=s[\"hasAttribute\"](\"width\")||s[\"hasAttribute\"](\"height\")?\"pre-wrap\":\"pre\";s[\"style\"].setProperty(\"white-space\",e)}if(t[\"length\"]>1){for(let e of t)e!==r&&e[\"remove\"]()}if(r){r[\"parentElement\"]!==s&&s[\"append\"](r);for(let e of[...s[\"childNodes\"]])[\"a\",\"tspan\",\"#text\"][\"includes\"](e.localName)&&e[\"remove\"]();if(r[\"hasAttribute\"](\"style\")){for(let l of r[\"style\"]){let e=s[\"style\"][\"getPropertyValue\"](l),t=r[\"style\"][\"getPropertyValue\"](l);e!==t&&s[\"style\"].setProperty(l,t)}r[\"removeAttribute\"](\"style\")}}};const Bl=e=>{let t=Ki(e);let l=e[\"href\"][\"baseVal\"]?t[\"querySelector\"](e[\"href\"][\"baseVal\"]):null;if(l&&[\"rect\",\"circle\",\"ellipse\",\"line\",\"polyline\",\"polygon\"][\"includes\"](l[\"localName\"])){let e=zl(l);l[\"replaceWith\"](e)}};const Ul=e=>{let l=0;let s=[...e[\"children\"]][\"filter\"](e=>\"stop\"===e[\"localName\"]);for(let t of s)if(t[\"hasAttribute\"](\"offset\")){let e=t[\"offset\"][\"baseVal\"];e<l&&(e=l);e=ie(e,0,1,4);l=e;t[\"setAttribute\"](\"offset\",e)}};const _l=t=>{{let l=0;let e=[...t[\"children\"]][\"filter\"](e=>\"stop\"===e[\"localName\"]);for(let t of e)if(t[\"hasAttribute\"](\"offset\")){let e=t[\"offset\"][\"baseVal\"];e<l&&(e=l);e=ie(e,0,1,4);l=e;t[\"setAttribute\"](\"offset\",e)}}t[\"removeAttribute\"](\"fx\");t[\"removeAttribute\"](\"d9\");t[\"removeAttribute\"](\"fr\")};const Fl=t=>{let l=Ki(t);if(!1===t[\"hasAttribute\"](\"id\")){let e=0;for(;null!==l[\"querySelector\"](\"#pattern-\"+e);)e+=1;t[\"setAttribute\"](\"id\",\"pattern-\"+e)}};const Gl=t=>{let l=Ki(t);if(!1===t[\"hasAttribute\"](\"id\")){let e=0;for(;null!==l[\"querySelector\"](\"#symbol-\"+e);)e+=1;t[\"setAttribute\"](\"id\",\"symbol-\"+e)}};const Nl=t=>{let l=Ki(t);if(!1===t[\"hasAttribute\"](\"id\")){let e=0;for(;null!==l[\"querySelector\"](\"#marker-\"+e);)e+=1;t[\"setAttribute\"](\"id\",\"marker-\"+e)}};const jl=e=>{};const Vl=e=>{let t=new DOMParser;let l=t[\"parseFromString\"](e,\"text/html\")[\"querySelector\"](\"body\");let a=null;Object[\"values\"](u);let s=!0;if(1===l[\"children\"][\"length\"]&&\"svg\"===l[\"children\"][0][\"localName\"]){for(let e of l[\"children\"][0][\"attributes\"])if(e[\"name\"][\"startsWith\"](\"xmlns\")&&e[\"value\"][\"startsWith\"](\"http://schemas.microsoft.com/visio\")){s=!1;break}}else s=!1;if(s)a=l[\"children\"][0];else{let s=t[\"parseFromString\"](e,\"image/svg+xml\")[\"querySelector\"](\"svg\")||null;let r={title:!0,switch:!0};for(let e of I)r[e]=!0;if(s){let e;let t=document[\"createNodeIterator\"](s,NodeFilter[\"SHOW_ELEMENT\"],{acceptNode:e=>\"foreignObject\"===e[\"localName\"]?NodeFilter[\"FILTER_SKIP\"]:NodeFilter[\"FILTER_ACCEPT\"]});for(;e=t[\"nextNode\"]();)e[\"namespaceURI\"]===u[\"svg\"]?!0!==r[e[\"localName\"]]&&e[\"remove\"]():e[\"namespaceURI\"]===u[\"bx\"]||e[\"remove\"]();if(!1===s[\"hasAttribute\"](\"xmlns\")){let t=document[\"createElementNS\"](u[\"svg\"],\"svg\");t[\"setAttribute\"](\"xmlns\",u[\"svg\"]);for(let e of s[\"attributes\"])t[\"setAttribute\"](e[\"name\"],s[\"getAttribute\"](e[\"name\"]));for(let e of[...s[\"childNodes\"]])t[\"append\"](e);s=t}let l='<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n'+(new XMLSerializer)[\"serializeToString\"](s);a=(new DOMParser)[\"parseFromString\"](l,\"text/html\")[\"querySelector\"](\"svg\")||null}}return a};let Sl=e=>{let s=[];let o=!1;for(let t of e.querySelectorAll(\"style\")){let o={};let e=[];for(let a of t[\"sheet\"][\"cssRules\"])if(a[\"type\"]===CSSRule[\"FONT_FACE_RULE\"]){}else{if(a[\"type\"]===CSSRule[\"IMPORT_RULE\"]){if(a[\"href\"][\"startsWith\"](\"https://fonts.css2\")){let r=new URL(a[\"href\"]);let e=new URLSearchParams(r[\"search\"]);for(let s of e[\"getAll\"](\"family\")){let[e]=s[\"split\"](\":\");let t=new URLSearchParams(r[\"search\"]);t[\"set\"](\"family\",s);let l=\"https://fonts.css2?\"+decodeURIComponent(t[\"toString\"]());void 0===o[e]&&(o[e]=[]);o[e][\"push\"]({cssText:'@import url(\"'+encodeURI(l)+'\");',href:l,type:a[\"type\"]})}}else{if(a[\"href\"][\"startsWith\"](\"https://fonts.css\")){let r=new URL(a[\"href\"]);let e=new URLSearchParams(r[\"search\"]);for(let s of e[\"get\"](\"family\")[\"split\"](\"|\")){let[e]=s[\"split\"](\":\");let t=new URLSearchParams(r[\"search\"]);t[\"set\"](\"family\",s);let l=\"https://fonts.css?\"+decodeURIComponent(t[\"toString\"]());void 0===o[e]&&(o[e]=[]);o[e][\"push\"]({cssText:'@import url(\"'+encodeURI(l)+'\");',href:l,type:a[\"type\"]})}}else e[\"push\"](a)}}else e[\"push\"](a)}(Object.keys(o).length>0||t.hasAttribute(\"data-bx-fonts\"))&&s[\"push\"]({styleElement:t,fontRulesByFamily:o,otherRules:e})}{let a=[];for(let r of s){let{styleElement:t,fontRulesByFamily:e,otherRules:l}=r;let s=Object.keys(e);if(0===s.length){if(t.hasAttribute(\"data-bx-fonts\")){o=!0;break}}else{if(1===s.length){let e=s[0];if(a.includes(e)){o=!0;break}if(t.getAttribute(\"data-bx-fonts\"!==e)){o=!0;break}if(l.length>0){o=!0;break}}else{if(s.length>1){o=!0;break}}}a.push(...s)}}if(!0===o){for(let l of s)for(let[t,e]of Object.entries(l.fontRulesByFamily)){let e=s.find(e=>void 0!==e.fontRulesByFamily[t]);if(e!==l){delete l.fontRulesByFamily[t]}}for(let{styleElement:r,fontRulesByFamily:e,otherRules:l}of s){for(let[l,s]of Object.entries(e)){let e=Zi(\"svg:style\");let t=\"\";s.sort(e=>e.type===CSSRule.IMPORT_RULE?-1:1);for(let e of s)t+=e.cssText;e.textContent=t;e.setAttribute(\"data-bx-fonts\",l);r.hasAttribute(\"data-bx-pinned\")&&e.setAttribute(\"data-bx-pinned\",\"\");r.before(e)}if(0===l.length)r.remove();else{let t=\"\";for(let e of l)t+=e.cssText;r.removeAttribute(\"data-bx-fonts\");r.removeAttribute(\"data-bx-pinned\");r.textContent=t}}}};const ql=(a,e)=>new Promise(t=>{let l;let s;let r=new FileReader;r.addEventListener(\"error\",s=()=>{r.removeEventListener(\"load\",l);r.removeEventListener(\"error\",s);t(null)});if(\"text\"===e){r.readAsText(a);r.addEventListener(\"load\",l=e=>{r.removeEventListener(\"load\",l);r.removeEventListener(\"error\",s);t(e.target.result)})}else{if(\"arrayBuffer\"===e){r.readAsArrayBuffer(a);r.addEventListener(\"load\",l=e=>{r.removeEventListener(\"load\",l);r.removeEventListener(\"error\",s);t(new Uint8Array(e.target.result))})}else{if(\"dataURL\"===e){let e=Kl(a);r.readAsDataURL(a);r.addEventListener(\"load\",l=e=>{r.removeEventListener(\"load\",l);r.removeEventListener(\"error\",s);t(e.target.result)})}}}});exports.ql=ql;const Kl=e=>e.name&&e.name.includes(\".\")?e.name.substring(e.name.lastIndexOf(\".\")+1).toLowerCase():\"\";const zl=(e,t=6)=>{let l=null;\"rect\"===e.localName?l=Ol(e,t):\"circle\"===e.localName?l=El(e,t):\"ellipse\"===e.localName?l=Tl(e,t):\"line\"===e.localName?l=Al(e,t):\"polyline\"===e.localName?l=$l(e,t):\"polygon\"===e.localName&&(l=Ll(e,t));return l};const Ol=(t,l=6)=>{let s=Zi(\"svg:path\");let r=t.getPathData();for(let e of r)e.values=e.values[\"map\"](e=>te(e,l));s.setPathData(r);for(let e of t.attributes)!1===[\"x\",\"y\",\"width\",\"height\",\"rx\",\"ry\"].includes(e.name)&&s.setAttribute(e.name,e.value);s.innerHTML=t.innerHTML;return s};const El=(t,l=6)=>{let s=Zi(\"svg:path\");let r=t.getPathData();for(let e of r)e.values=e.values.map(e=>te(e,l));s.setPathData(r);for(let e of t.attributes)[\"cx\",\"cy\",\"r\"].includes(e.name)||s.setAttribute(e.name,e.value);s.innerHTML=t.innerHTML;return s};const Tl=(t,l=6)=>{let s=Zi(\"svg:path\");let r=t.getPathData();for(let e of r)e.values=e.values.map(e=>te(e,l));s.setPathData(r);for(let e of t.attributes)[\"cx\",\"cy\",\"rx\",\"ry\"].includes(e.name)||s.setAttribute(e.name,e.value);s.innerHTML=t.innerHTML;return s};const Al=(t,l=6)=>{let s=Zi(\"svg:path\");let r=t.getPathData();for(let e of r)e.values=e.values.map(e=>te(e,l));s.setPathData(r);for(let e of t.attributes)[\"x1\",\"y1\",\"x2\",\"y2\"].includes(e.name)||s.setAttribute(e.name,e.value);s.innerHTML=t.innerHTML;return s};const $l=(t,l=6)=>{let s=Zi(\"svg:path\");let r=t.getPathData();for(let e of r)e.values=e.values.map(e=>te(e,l));s.setPathData(r);for(let e of t.attributes)\"points\"!==e.name&&s.setAttribute(e.name,e.value);s.innerHTML=t.innerHTML;return s};const Ll=(t,l=6)=>{let s=Zi(\"svg:path\");let r=t.getPathData();for(let e of r)e.values=e.values.map(e=>te(e,l));s.setPathData(t.getPathData());for(let e of t.attributes)\"points\"!==e.name&&s.setAttribute(e.name,e.value);s.innerHTML=t.innerHTML;return s};const Rl=e=>{let s;let r=Vl(e);let t=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT;let l=document.createNodeIterator(r,t);for(;s=l.nextNode();)if(s.nodeType!==Node.ELEMENT_NODE)!1===(N[s.parentNode.nodeName]||[]).includes(s.nodeName)&&s.remove();else{if(s.localName.includes(\":\")){if(s.localName.startsWith(\"bx:\")){let e=s.localName.split(\":\")[1];let t=document.createElement(\"bx-\"+e);for(let e of[...s.attributes])t.setAttribute(e.name,e.value);for(let e of[...s.childNodes])t.append(e);s.replaceWith(t)}else s.remove()}else{if(\"title\"===s.localName){let l=Zi(\"svg:bx-title\");l.innerHTML=s.innerHTML;for(let{name:e,value:t}of s.attributes)l.setAttribute(e,t);s.replaceWith(l);continue}if(\"switch\"===s.localName){let e=\":scope > *:not([systemLanguage]):not([requiredExtensions])\";let t=s.querySelector(e)||s.firstElementChild;t&&s.replaceWith(t);continue}if(s!==r){if(!1===(N[s.parentNode.localName]||[]).includes(s.localName)){s.remove();continue}}for(let{name:e,value:t}of[...s.attributes]){if(e.includes(\":\")){s.removeAttribute(e);if(e.startsWith(\"bx:\")){e=\"data-bx-\"+e[\"split\"](\":\")[1];s.setAttribute(e,t)}else{if(\"xlink:href\"===e&&!1===s.hasAttribute(\"href\")){e=\"href\";s.setAttribute(e,t)}else{if(\"xlink:title\"===e&&!1===s.hasAttribute(\"title\")){e=\"title\";s.setAttribute(e,t)}else{if(\"xml:lang\"!==e)continue;e=\"lang\";s.setAttribute(e,t)}}}}if(e.startsWith(\"data-\")){\"data-bx-shape\"===e&&!1===io(s)&&s.removeAttribute(e);\"data-bx-d\"===e&&!1===Le(s)&&s.removeAttribute(e)}else{if(\"href\"===e&&\"a\"===s.localName){s.removeAttribute(e);s.setAttribute(\"_href\",t)}}}}}for(let e of r.querySelectorAll(\"text\"))Il(e);for(let e of r.querySelectorAll(\"textPath\"))Bl(e);for(let e of r.querySelectorAll(\"linearGradient\"))Ul(e);for(let e of r.querySelectorAll(\"radialGradient\"))_l(e);for(let e of r.querySelectorAll(\"pattern\"))Fl(e);for(let e of r.querySelectorAll(\"marker\"))Nl(e);for(let e of r.querySelectorAll(\"symbol\"))Gl(e);{let l=[];for(let{name:e,value:t}of[...r.attributes]){r.removeAttribute(e);\"xmlns\"!==e&&\"xmlns:bx\"!==e&&l[\"push\"]({name:e,value:t})}r.setAttribute(\"xmlns\",u[\"svg\"]);r.setAttribute(\"xmlns:bx\",u[\"bx\"]);for(let{name:e,value:t}of l)r.setAttribute(e,t)}{let e=r.querySelector(\":scope > defs\");if(!e){e=Zi(\"svg:defs\");r.prepend(e)}}return Sl(r),document.importNode(r,!0),r};exports.Rl=Rl;const io=t=>{let o=!1;if(t.hasAttribute(\"data-bx-shape\")){let a=t.getAttribute(\"d\");let e=t.getAttribute(\"data-bx-shape\").trim().split(/[\\s+,]+/);if(e.length>=3){let l=e[0];let s=e.slice(1,e.length-1);let r=e[e.length-1];if(r.includes(\"@\")){let[e,t]=r.split(\"@\");t===Pe(a+\" / \"+l+\" \"+s.join(\" \")+\" \"+e).toString(32)&&(o=!0)}}}return o};const Sd=Zi(\"svg:marker\");const Md=e=>(e.hasAttribute(\"refX\")?Sd.setAttribute(\"refX\",e.getAttribute(\"refX\")):Sd.removeAttribute(\"refX\"),e.hasAttribute(\"refY\")?Sd.setAttribute(\"refY\",e.getAttribute(\"refY\")):Sd.removeAttribute(\"refY\"),new DOMPoint(Sd.refX.baseVal.value,Sd.refY.baseVal.value));exports.Md=Md;const On=l=>new Promise(e=>{let t=new Image;t[\"onload\"]=()=>{e({width:t.naturalWidth,height:t.naturalHeight})};t.src=l});exports.On=On;const as=e=>{let s=[];e=os(e);for(let l of e)if(l===e[0])s.push([l]);else{let t=!1;for(let e of s){if(l.parentElement===e[0].parentElement){e.push(l);t=!0}}!1===t&&s.push([l])}return s};exports.as=as;const ds=(e,t)=>{if(!e.transform||!t.transform)return!1;const l=Yi(e);const s=Yi(t);return xi(l,s)};exports.ds=ds;const cs=a=>{let t=[];let o=[];for(let e of a){let s=[];let r=l=>{for(let t of a){let e=!s.includes(t)&&!o.includes(t);if(t!==l&&e&&ds(t,l)){s.push(t);o.push(t);r(t)}}};r(e);s.length>0&&t.push(os(s))}for(let e of a)o.includes(e)||t.push([e]);return t};exports.cs=cs;const pd=(o,n,i,u,p)=>{var f;var c;var h;var y;let v=e=>Math.abs(e)<1e-11?0:e>0?1:-1;let e=(e,t,l,s,r)=>{let a=3*t-e-3*l+s;0===a&&(a=1e-10);let o=[3,-1];x(o,(3*e-6*t+3*l)/a,(-3*e+3*t)/a,(-r+e)/a);let n=[];for(let e of o)e>=0&&e<=1&&n.push(e);return n};let x=(l,s,e,t)=>{let r=(Math.pow(s,2)-3*e)/9;let a=(2*Math.pow(s,3)-9*s*e+27*t)/54;if(Math.pow(a,2)<Math.pow(r,3)){let e=Math.acos(a/Math.sqrt(Math.pow(r,3)))/3;return l.splice(0,0,-2*Math.sqrt(r)*Math.cos(e)-s/3),l.splice(1,0,-2*Math.sqrt(r)*Math.cos(e+4*Math.PI/3)-s/3),l.splice(2,0,-2*Math.sqrt(r)*Math.cos(e-4*Math.PI/3)-s/3),3}{let e=-v(a)*Math.pow(Math.abs(a)+Math.sqrt(Math.pow(a,2)-Math.pow(r,3)),1/3);let t=0==v(e)?0:r/e;return l.splice(0,0,e+t-s/3),l.splice(1,0,-.5*(e+t)-s/3),l.splice(2,0,.5*Math.sqrt(3)*Math.abs(e-t)),l[2]+1===1?2:1}};let t=[...e(n[\"x\"],i[\"x\"],u[\"x\"],p[\"x\"],o[\"x\"]),...e(n[\"y\"],i[\"y\"],u[\"y\"],p[\"y\"],o[\"y\"])];if(0===t.length)return-1;{let r=-1;let a=3;for(let s of t){let e=Math.pow(1-s,3)*n[\"x\"]+3*Math.pow(1-s,2)*s*i[\"x\"]+3*(1-s)*Math.pow(s,2)*u[\"x\"]+Math.pow(s,3)*p[\"x\"];let t=Math.pow(1-s,3)*n[\"y\"]+3*Math.pow(1-s,2)*s*i[\"y\"]+3*(1-s)*Math.pow(s,2)*u[\"y\"]+Math.pow(s,3)*p[\"y\"];f=o[\"x\"];c=o[\"y\"];let l=Math.sqrt(((h=e)-f)*(h-f)+((y=t)-c)*(y-c));if(l<a){r=s;a=l}}return r}};exports.pd=pd;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/utils/common.js?");

/***/ }),

/***/ "./node_modules/foxyjs/utils/config.js":
/*!*********************************************!*\
  !*** ./node_modules/foxyjs/utils/config.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,i,t,s){if(t===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof i===\"function\"?e!==i||!s:!i.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return t===\"m\"?s:t===\"a\"?s.call(e):s?s.value:i.get(e)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,i,t,s,r){if(s===\"m\")throw new TypeError(\"Private method is not writable\");if(s===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof i===\"function\"?e!==i||!r:!i.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return s===\"a\"?r.call(e,t):r?r.value=t:i.set(e,t),t};var _Config_stage,_Config_theme,_Config_draw,_Config_text,_Config_manualGuides,_Config_grid,_Config_smartGuides,_Config_scaleGrippies,_Config_rotateGrippies,_Config_skewGrippies;Object.defineProperty(exports, \"__esModule\", ({value:true}));class Config{set manualGuides(e){__classPrivateFieldSet(this,_Config_manualGuides,Object.assign(__classPrivateFieldGet(this,_Config_manualGuides,\"f\"),e),\"f\")}get manualGuides(){return __classPrivateFieldGet(this,_Config_manualGuides,\"f\")}set grid(e){__classPrivateFieldSet(this,_Config_grid,Object.assign(__classPrivateFieldGet(this,_Config_grid,\"f\"),e),\"f\")}get grid(){return __classPrivateFieldGet(this,_Config_grid,\"f\")}set smartGuides(e){__classPrivateFieldSet(this,_Config_smartGuides,Object.assign(__classPrivateFieldGet(this,_Config_smartGuides,\"f\"),e),\"f\")}get smartGuides(){return __classPrivateFieldGet(this,_Config_smartGuides,\"f\")}set theme(e){__classPrivateFieldSet(this,_Config_theme,e,\"f\")}get scaleGrippie(){return __classPrivateFieldGet(this,_Config_scaleGrippies,\"f\")}set scaleGrippie(e){__classPrivateFieldSet(this,_Config_scaleGrippies,Object.assign(__classPrivateFieldGet(this,_Config_scaleGrippies,\"f\"),e),\"f\");const i=document.querySelectorAll('#transform-hud [uid=\"scale-grippies\"] .grippie');if(i.length>0)i===null||i===void 0?void 0:i.forEach(e=>{const i=e;Object.keys(__classPrivateFieldGet(this,_Config_scaleGrippies,\"f\")).forEach(e=>{if(e===\"size\"){i.style.setProperty(\"width\",__classPrivateFieldGet(this,_Config_scaleGrippies,\"f\").size.toString());i.style.setProperty(\"height\",__classPrivateFieldGet(this,_Config_scaleGrippies,\"f\").size.toString())}else i.style.setProperty(e,__classPrivateFieldGet(this,_Config_scaleGrippies,\"f\")[e])})});__classPrivateFieldGet(this,_Config_stage,\"f\").board.dispatchEvent(new CustomEvent(\"zoomchange\"))}get rotateGrippie(){return __classPrivateFieldGet(this,_Config_rotateGrippies,\"f\")}set rotateGrippie(e){__classPrivateFieldSet(this,_Config_rotateGrippies,Object.assign(__classPrivateFieldGet(this,_Config_rotateGrippies,\"f\"),e),\"f\");const i=document.querySelectorAll('#transform-hud [uid=\"rotate-grippies\"] .grippie');if(i.length>0)i===null||i===void 0?void 0:i.forEach(e=>{const i=e;Object.keys(__classPrivateFieldGet(this,_Config_rotateGrippies,\"f\")).forEach(e=>{if(e===\"size\"){i.style.setProperty(\"width\",__classPrivateFieldGet(this,_Config_rotateGrippies,\"f\").size.toString());i.style.setProperty(\"height\",__classPrivateFieldGet(this,_Config_rotateGrippies,\"f\").size.toString())}else i.style.setProperty(e,__classPrivateFieldGet(this,_Config_rotateGrippies,\"f\")[e])})});__classPrivateFieldGet(this,_Config_stage,\"f\").board.dispatchEvent(new CustomEvent(\"zoomchange\"))}get skewGrippie(){return __classPrivateFieldGet(this,_Config_skewGrippies,\"f\")}set skewGrippie(e){__classPrivateFieldSet(this,_Config_skewGrippies,Object.assign(__classPrivateFieldGet(this,_Config_skewGrippies,\"f\"),e),\"f\");const i=document.querySelectorAll('#transform-hud [uid=\"skew-grippies\"] .grippie');if(i.length>0)i===null||i===void 0?void 0:i.forEach(e=>{const i=e;Object.keys(__classPrivateFieldGet(this,_Config_skewGrippies,\"f\")).forEach(e=>{if(e===\"size\"){i.style.setProperty(\"width\",__classPrivateFieldGet(this,_Config_skewGrippies,\"f\").size.toString());i.style.setProperty(\"height\",__classPrivateFieldGet(this,_Config_skewGrippies,\"f\").size.toString())}else i.style.setProperty(e,__classPrivateFieldGet(this,_Config_skewGrippies,\"f\")[e])})});__classPrivateFieldGet(this,_Config_stage,\"f\").board.dispatchEvent(new CustomEvent(\"zoomchange\"))}get text(){return __classPrivateFieldGet(this,_Config_text,\"f\")}set text(e){__classPrivateFieldSet(this,_Config_text,Object.assign(__classPrivateFieldGet(this,_Config_text,\"f\"),e),\"f\")}get draw(){return __classPrivateFieldGet(this,_Config_draw,\"f\")}set draw(e){__classPrivateFieldSet(this,_Config_draw,Object.assign(__classPrivateFieldGet(this,_Config_draw,\"f\"),e),\"f\")}constructor(e){_Config_stage.set(this,void 0);_Config_theme.set(this,\"dark\");_Config_draw.set(this,{fill:\"pink\",stroke:\"#000000\",strokeWidth:1});_Config_text.set(this,{fill:\"#333333\",\"font-size\":\"28px\",\"font-family\":'\"Arial\", sans-serif',textContent:\"Hello World\"});_Config_manualGuides.set(this,{disabled:false,color:\"#448aff\",active:\"red\"});_Config_grid.set(this,{disabled:false,color:\"#5c5c5c\"});_Config_smartGuides.set(this,{disabled:false,color:\"blue\"});_Config_scaleGrippies.set(this,{fill:\"#448aff\",stroke:\"white\",\"stroke-width\":2,size:12});_Config_rotateGrippies.set(this,{fill:\"#fa2792\",stroke:\"white\",\"stroke-width\":2,size:12,rx:999});_Config_skewGrippies.set(this,{fill:\"#ff7a00\",stroke:\"white\",\"stroke-width\":2,size:12});__classPrivateFieldSet(this,_Config_stage,e,\"f\")}}_Config_stage=new WeakMap,_Config_theme=new WeakMap,_Config_draw=new WeakMap,_Config_text=new WeakMap,_Config_manualGuides=new WeakMap,_Config_grid=new WeakMap,_Config_smartGuides=new WeakMap,_Config_scaleGrippies=new WeakMap,_Config_rotateGrippies=new WeakMap,_Config_skewGrippies=new WeakMap;exports[\"default\"]=Config;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/utils/config.js?");

/***/ }),

/***/ "./node_modules/foxyjs/utils/ee.js":
/*!*****************************************!*\
  !*** ./node_modules/foxyjs/utils/ee.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("Object.defineProperty(exports, \"__esModule\", ({value:true}));const{isFinite:Y,isNaN:q,parseFloat:X}=Number;const{sqrt:Q}=Math;const Z=t=>!q(t)&&\"number\"==typeof t;class ee{constructor(...i){this[\"x\"]=0;this[\"y\"]=0;if(1===i[\"length\"]){if(!Z(i[0][\"x\"])||!Z(i[0][\"y\"]))throw new Error(\"\");this[\"x\"]=i[0][\"x\"];this[\"y\"]=i[0][\"y\"]}else{if(2===i[\"length\"]){if(Z(i[0])&&Z(i[1])){this[\"x\"]=i[0];this[\"y\"]=i[1]}else{if(!(i[0]instanceof DOMPoint&&i[1]instanceof DOMPoint))throw new Error(\"\");{let t=i[0];let e=i[1];this[\"x\"]=e[\"x\"]-t[\"x\"];this[\"y\"]=e[\"y\"]-t[\"y\"]}}}else{if(i[\"length\"]>=3)throw new Error(\"\")}}}static[\"fromVector\"](t){return new ee(t[\"x\"],t[\"y\"])}get[\"length\"](){return Q(this[\"x\"]*this[\"x\"]+this[\"y\"]*this[\"y\"])}set[\"length\"](t){if(0!==this[\"length\"]){t/=this[\"length\"];this[\"x\"]=this[\"x\"]*t;this[\"y\"]=this[\"y\"]*t}}[\"getNormalVector\"](){return new ee(-this[\"y\"],this[\"x\"])}[\"getOppositeVector\"](){return new ee(-this[\"x\"],-this[\"y\"])}[\"negate\"](){return this[\"multiply\"](-1)}[\"multiply\"](t){return new ee(this[\"x\"]*t,this[\"y\"]*t)}[\"multiplySelf\"](t){return this[\"x\"]=this[\"x\"]*t,this[\"y\"]=this[\"y\"]*t,this}[\"divide\"](t){return new ee(this[\"x\"]/t,this[\"y\"]/t)}[\"divideSelf\"](t){return this[\"x\"]=this[\"x\"]/t,this[\"y\"]=this[\"y\"]/t,this}[\"normalize\"](){return 0===this[\"length\"]?new ee(this):new ee(this[\"x\"]/this[\"length\"],this[\"y\"]/this[\"length\"])}[\"scale\"](t){return 0===this[\"length\"]?new ee(this):(t/=this[\"length\"],new ee(this[\"x\"]*t,this[\"y\"]*t))}[\"transformPoint\"](t){return new DOMPoint(t[\"x\"]+this[\"x\"],t[\"y\"]+this[\"y\"])}[\"transformRect\"](t){return new DOMRect(t[\"x\"]+this[\"x\"],t[\"y\"]+this[\"y\"],t[\"width\"],t[\"height\"])}[\"matrixTransform\"](t){let e=new DOMPoint(0,0)[\"matrixTransform\"](t);let i=new DOMPoint(this[\"x\"],this[\"y\"])[\"matrixTransform\"](t);return new ee(e,i)}[\"toString\"](){return\"(\"+this[\"x\"]+\", \"+this[\"y\"]+\")\"}}exports[\"default\"]=ee;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/utils/ee.js?");

/***/ }),

/***/ "./node_modules/foxyjs/utils/it.js":
/*!*****************************************!*\
  !*** ./node_modules/foxyjs/utils/it.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(t,e,i,r,s){if(r===\"m\")throw new TypeError(\"Private method is not writable\");if(r===\"a\"&&!s)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof e===\"function\"?t!==e||!s:!e.has(t))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return r===\"a\"?s.call(t,i):s?s.value=i:e.set(t,i),i};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(t,e,i,r){if(i===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof e===\"function\"?t!==e||!r:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return i===\"m\"?r:i===\"a\"?r.call(t):r?r.value:e.get(t)};var _it_u;Object.defineProperty(exports, \"__esModule\", ({value:true}));class it{constructor(t){this[\"currentToken\"]=null;this[\"position\"]=0;_it_u.set(this,void 0);__classPrivateFieldSet(this,_it_u,t,\"f\")}[(_it_u=new WeakMap,\"read\")](){let t=__classPrivateFieldGet(this,_it_u,\"f\")[this[\"position\"]];this[\"currentToken\"]=t;\"EOF\"===t[\"tokenType\"]||(this[\"position\"]+=1);return t}[\"reset\"](t){this[\"position\"]=t}}exports[\"default\"]=it;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/utils/it.js?");

/***/ }),

/***/ "./node_modules/foxyjs/utils/nt.js":
/*!*****************************************!*\
  !*** ./node_modules/foxyjs/utils/nt.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,n,r){if(n===\"a\"&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof t===\"function\"?e!==t||!r:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return n===\"m\"?r:n===\"a\"?r.call(e):r?r.value:t.get(e)};var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,n,r,o){if(r===\"m\")throw new TypeError(\"Private method is not writable\");if(r===\"a\"&&!o)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof t===\"function\"?e!==t||!o:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return r===\"a\"?o.call(e,n):o?o.value=n:t.set(e,n),n};var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var _nt_g,_nt_f,_nt_b,_nt_w;Object.defineProperty(exports, \"__esModule\", ({value:true}));const it_1=__importDefault(__webpack_require__(/*! ./it */ \"./node_modules/foxyjs/utils/it.js\"));class nt{get[(_nt_g=new WeakMap,_nt_f=new WeakMap,_nt_b=new WeakMap,_nt_w=new WeakMap,\"type\")](){return\"<view-box>\"}get[\"x\"](){return __classPrivateFieldGet(this,_nt_g,\"f\")}set[\"x\"](e){__classPrivateFieldSet(this,_nt_g,e,\"f\")}get[\"y\"](){return __classPrivateFieldGet(this,_nt_f,\"f\")}set[\"y\"](e){__classPrivateFieldSet(this,_nt_f,e,\"f\")}get[\"width\"](){return __classPrivateFieldGet(this,_nt_b,\"f\")}set[\"width\"](e){__classPrivateFieldSet(this,_nt_b,e,\"f\")}get[\"height\"](){return __classPrivateFieldGet(this,_nt_w,\"f\")}set[\"height\"](e){__classPrivateFieldSet(this,_nt_w,e,\"f\")}constructor(e=0,t=0,n=0,r=0){_nt_g.set(this,void 0);_nt_f.set(this,void 0);_nt_b.set(this,void 0);_nt_w.set(this,void 0);this[\"x\"]=e;this[\"y\"]=t;this[\"width\"]=n;this[\"height\"]=r}static[\"fromRect\"](e){return new nt(e[\"x\"],e[\"y\"],e[\"width\"],e[\"height\"])}static[\"fromString\"](e,t=!1){let n;let r;let o;let i;let a=[0,0];let c=new it_1.default(a);c[\"read\"]();\"WHITESPACE\"===c[\"currentToken\"][\"tokenType\"]&&c[\"read\"]();if(\"NUMBER\"!==c[\"currentToken\"][\"tokenType\"]){if(t)throw new DOMException(\"Unexpected \"+c[\"currentToken\"][\"tokenType\"]+\" token.\",\"SyntaxError\");return null}if(n=c[\"currentToken\"][\"value\"],c[\"read\"](),\"WHITESPACE\"!==c[\"currentToken\"][\"tokenType\"]&&\",\"!==c[\"currentToken\"][\"tokenType\"]){if(t)throw new DOMException(\"Unexpected \"+c[\"currentToken\"][\"tokenType\"]+\" token.\",\"SyntaxError\");return null}if(\"WHITESPACE\"===c[\"currentToken\"][\"tokenType\"]&&c[\"read\"](),\",\"===c[\"currentToken\"][\"tokenType\"]&&c[\"read\"](),\"WHITESPACE\"===c[\"currentToken\"][\"tokenType\"]&&c[\"read\"](),\"NUMBER\"!==c[\"currentToken\"][\"tokenType\"]){if(t)throw new DOMException(\"Unexpected \"+c[\"currentToken\"][\"tokenType\"]+\" token.\",\"SyntaxError\");return null}if(r=c[\"currentToken\"][\"value\"],c[\"read\"](),\"WHITESPACE\"!==c[\"currentToken\"][\"tokenType\"]&&\",\"!==c[\"currentToken\"][\"tokenType\"]){if(t)throw new DOMException(\"Unexpected \"+c[\"currentToken\"][\"tokenType\"]+\" token.\",\"SyntaxError\");return null}if(\"WHITESPACE\"===c[\"currentToken\"][\"tokenType\"]&&c[\"read\"](),\",\"===c[\"currentToken\"][\"tokenType\"]&&c[\"read\"](),\"WHITESPACE\"===c[\"currentToken\"][\"tokenType\"]&&c[\"read\"](),!\"NUMBER\"===c[\"currentToken\"][\"tokenType\"]&&c[\"currentToken\"][\"value\"]>=0){if(t)throw new DOMException(\"Unexpected \"+c[\"currentToken\"][\"tokenType\"]+\" token.\",\"SyntaxError\");return null}if(o=c[\"currentToken\"][\"value\"],c[\"read\"](),\"WHITESPACE\"!==c[\"currentToken\"][\"tokenType\"]&&\",\"!==c[\"currentToken\"][\"tokenType\"]){if(t)throw new DOMException(\"Unexpected \"+c[\"currentToken\"][\"tokenType\"]+\" token.\",\"SyntaxError\");return null}if(\"WHITESPACE\"===c[\"currentToken\"][\"tokenType\"]&&c[\"read\"](),\",\"===c[\"currentToken\"][\"tokenType\"]&&c[\"read\"](),\"WHITESPACE\"===c[\"currentToken\"][\"tokenType\"]&&c[\"read\"](),!\"NUMBER\"===c[\"currentToken\"][\"tokenType\"]&&c[\"currentToken\"][\"value\"]>=0){if(t)throw new DOMException(\"Unexpected \"+c[\"currentToken\"][\"tokenType\"]+\" token.\",\"SyntaxError\");return null}if(i=c[\"currentToken\"][\"value\"],c[\"read\"](),\"WHITESPACE\"===c[\"currentToken\"][\"tokenType\"]&&c[\"read\"](),\"EOF\"===c[\"currentToken\"][\"tokenType\"])return new nt(n,r,o,i);if(t)throw new DOMException(\"Unexpected \"+c[\"currentToken\"][\"tokenType\"]+\" token.\",\"SyntaxError\");return null}[\"toString\"](){return this[\"x\"]+\" \"+this[\"y\"]+\" \"+this[\"width\"]+\" \"+this[\"height\"]}[\"toRect\"](){return new DOMRect(this[\"x\"],this[\"y\"],this[\"width\"],this[\"height\"])}}exports[\"default\"]=nt;\n\n//# sourceURL=webpack:///./node_modules/foxyjs/utils/nt.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./examples/transformTool.js");
/******/ 	
/******/ })()
;